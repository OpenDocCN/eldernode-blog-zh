<html>
<head>
<title>How to Install NTP server on Linux CentOS - ElderNode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Linux CentOS - ElderNode博客上安装NTP服务器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-ntp-server-on-linux-centos/#0001-01-01">https://blog.eldernode.com/install-ntp-server-on-linux-centos/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/ddc61404792cd68b6fd5f70a957e3fb8.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Install NTP server on Linux CentOS" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/IMG_2324.png"/><p>【更新】NTP 是一种网络时间协议。NTP负责统一系统的时间和日期，以防止大型全球网络出现通信问题。在运行程序或打开网站时，您可能会看到一条消息，内容为“更新您的系统时间和时区”。当您的系统显示不正确的日期和时间时，会发生此过程。在大型Windows网络上，PDC Emulator服务负责同步系统时间，而在Linux系统上，通常选择一个服务器作为NTP服务器。NTP服务器从声誉良好的NTP互联网服务器接收及时的信息，并将它们提交给网络内系统。在这篇关于<a href="https://blog.eldernode.com/tag/linux/" target="_blank" rel="noopener"> Linux </a>教程合集的文章中，我们将学习<strong>在Linux CentOS </strong>上安装NTP服务器。您可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>中提供的包来购买<a href="https://eldernode.com/centos-vps/" target="_blank" rel="noopener"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="Tutorial_Install_NTP_server_on_Linux_CentOS_8_CentOS_7"/> <strong>教程在Linux CentOS 8 | CentOS 7上安装NTP服务器</strong> <span class="ez-toc-section-end"/></h2><p>在本教程中，我们将了解如何使用<a href="https://blog.eldernode.com/initial-set-up-centos-8/" target="_blank" rel="noopener noreferrer"> Linux命令</a>在Linux CentOS上设置NTP服务器，并运行NTP服务器。请继续关注本教程的剩余部分。</p><h3><span class="ez-toc-section" id="How_does_the_NTP_protocol_work"/><strong>NTP协议是如何工作的？</strong>T3】</h3><p>NTP向服务器提供来自原子钟的时间信号，并在UTC世界时钟的帮助下在系统中分发该信号。NTP服务器由同步设备组成，如客户端和接收UTC时间并将其提供给客户端的NTP服务器。</p><p>客户端和服务器通过一系列请求和响应进行通信，如下所示:</p><p>–客户端向时间服务器发送NTP请求数据包，并确认执行时间(源开始时间)。</p><p>–服务器确认收到请求包的时间。</p><p>–服务器再次向客户端发送响应数据包。</p><p>–客户在收到响应包时确认目的地时间。</p><p>这个过程可能只需要几纳秒。时间戳允许客户端计算环岛中的延迟，检查其内部时间与服务器提供的时间之间的差异，并在必要时准确重置时钟。</p><p>在本文的后续部分，我们将学习如何在Linux <a href="https://blog.eldernode.com/tag/centos/"> CentOS </a>上安装NTP服务器。</p><h3><span class="ez-toc-section" id="How_to_Install_NTP_server_on_Linux_CentOS"/> <strong>如何在Linux CentOS上安装NTP服务器</strong> <span class="ez-toc-section-end"/></h3><p>1-首先，连接到您的CentOS Linux控制台。</p><p>2-使用<strong> yum </strong>命令安装NTP服务包。</p><pre><code class="language-bash">yum install ntp</code></pre><p>3-安装后，用编辑器打开<strong> NTP设置文件</strong>。</p><pre><code class="language-bash">nano /etc/ntp.conf</code></pre><p><em> <strong>注意</strong> : </em>在这个文件中，你会看到你的NTP服务器的相关设置。查找以“服务器”开头的短语，然后用#号将它们改为注释。你可以从ntppool.org<a href="https://www.ntppool.org/en/" target="_blank" rel="noopener noreferrer">那里得到帮助，选择一个更好更近的服务器。首先，登录并选择您的地理区域，以显示离您最近的服务器的名称。建议您向该文件添加2或3个服务器。</a></p><p>4-接下来，在<span> <strong> ntp.conf </strong> </span>文件中输入以下命令，向您的网络IPs发送服务许可。</p><pre class=""><code class="language-bash">restrict 192.168.1.0 netmask 255.255.255.0 nomodify notrap</code></pre><p><em> <strong>注</strong> : </em>上述命令<strong>允许</strong>访问192.168.1.0。确保输入<strong>您的</strong>网络IP地址，而不是网络的IP地址。然后在对<strong> ntp.conf </strong>文件进行更改后保存它。</p><p>5-如果您需要观察故障排除或服务操作，请创建一个日志文件，并在<strong> ntp.conf </strong>文件中添加以下短语。</p><pre><code class="language-bash">logfile /var/log/ntp.log  </code></pre><p>6-最后，在执行上述命令后，您的<strong> ntp.conf </strong>文件的图像如下。</p><p> </p><p><img data-lazyloaded="1" src="../Images/c649a8fd271b06bbfd0b0ef57fabc48c.png" decoding="async" loading="lazy" class="aligncenter wp-image-24727 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/NTP-config-file-2.png" alt="NTP-config-file" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/NTP-config-file-2.png 788w, https://blog.eldernode.com/wp-content/uploads/2020/06/NTP-config-file-2-262x300.png 262w, https://blog.eldernode.com/wp-content/uploads/2020/06/NTP-config-file-2-768x881.png 768w" data-sizes="(max-width: 788px) 100vw, 788px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/NTP-config-file-2.png"/></p><p> </p><p>7-当您完成所有更改后，<strong>重启</strong>服务一次。</p><pre><code class="language-bash">service ntpd restart</code></pre><p>8-输入以下命令来测试NTP服务的准确性。</p><pre><code class="language-bash">ntpq -p</code></pre><pre><code class="language-bash">date -R</code></pre><p>第一个命令将检查添加的服务器的连接。第二个命令将显示完整的系统更新日期。如果从上述命令中获得正确的结果，则在<a href="https://blog.eldernode.com/tag/centos/" target="_blank" rel="noopener"> CentOS </a> Linux中的NTP服务器设置过程将成功完成。注意NTP协议在端口123上工作，并且使用UDP协议，所以在你的<a href="https://blog.eldernode.com/tag/linux/"> Linux </a>防火墙上做适当的改变来打开这个端口。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>网络时间协议是与传输层的UDP 123端口一起工作的协议。该协议允许网络计算机同步时间。随着时间的推移，计算机的内部时钟忽略了时间的问题。尤其是在客户端和服务器日志文件的情况下，或者如果您想要复制服务器或数据库。在本文中，我们试图向您展示如何在Linux CentOS上安装NTP服务器。如果想在Ubuntu、Debian、Windows Server上安装NTP Server，也可以参考这些文章。</p></div></div>    
</body>
</html>