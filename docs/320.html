<html>
<head>
<title>Tutorial add a new disk to Linux server - Add disk to existing Linux server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程向Linux服务器添加新磁盘——向现有Linux服务器添加磁盘</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/add-a-new-disk-to-linux-server/#0001-01-01">https://blog.eldernode.com/add-a-new-disk-to-linux-server/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/23ce3d01aeee6640bfeede759f4ce39c.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial add a new disk to Linux server" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2275.png"/><p>作为系统管理员，您需要知道如何为现有服务器配置原始硬盘。在本文中，您将学习<strong>教程向Linux服务器</strong>添加新磁盘。在下文中，您将看到如何向现有服务器添加新磁盘，作为升级服务器容量的一部分，或者在磁盘出现故障时替换磁盘。因此，请加入我们，看看如何将新的原始硬盘添加到现有的<a href="https://en.wikipedia.org/wiki/Linux" target="_blank" rel="noopener noreferrer"> Linux服务器</a>中，例如<a href="https://eldernode.com/tag/centos/" target="_blank" rel="noopener noreferrer"><strong>【RHEL】</strong>/<strong>CentOS</strong></a>或<a href="https://eldernode.com/tag/debian/" target="_blank" rel="noopener noreferrer"><strong>Debian</strong></a>/<strong><a href="https://eldernode.com/tag/ubuntu/" target="_blank" rel="noopener noreferrer">Ubuntu</a>。</strong></p><p> </p><p id="prerequisites"><strong>先决条件</strong></p><p>如果您知道以下内容，本教程可能会更有用:</p><ul><li>请注意，您将只学习创建一个新分区，而不是任何分区扩展或其他开关。</li><li>使用fdisk实用程序进行此配置。</li><li class="fjpost-info">要挂载为<span>/数据</span>分区，添加一个<strong> 20GB </strong>容量的硬盘。</li></ul><h2><span>教程向Linux服务器添加新磁盘</span></h2><p>要查看和管理Linux系统上的硬盘和分区，请运行以下命令。</p><pre><code class="language-bash">fdisk -l  </code></pre><p>分区和配置如下所示。</p><pre><code class="language-bash">[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0f7d60607b4f4a636b6a7d61606b6a">[email protected]</a> installer]# -l  Disk /dev/xvda: 107.4 GB, 107374182400 bytes, 209715200 sectors  Units = sectors of 1 * 512 bytes  Sector size (logical/physical): 512 bytes 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes  Disk lable type: dos  Disk identifier: 0x000969af       Device Boot     Start      End     Blocks   Id  System  /dev/xvda1    *       2048   1026047    512000   83  Linux  /dev/xvda2         1026048  209715199  104344576 8e  Linux LVM  Disk /dev/mapper/rhel-root: 104.7 GB 104681439232 bytes, 204455936 sectors  Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical): 512 bytes / 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes    Disk / dev/mapper/rhel-swap: 2164 MB, 2164260864 bytes, 4227072 sectors  Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical): 512 bytes / 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes    </code></pre><figure id="attachment_25236" class="wp-caption aligncenter" aria-describedby="caption-attachment-25236"/><p>fdisk -l在附加了<strong> 20GB </strong>容量的硬盘后，会给出如下输出。</p><pre><code class="language-bash">fdisk -l    [<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0d7f6262794d486169687f63626968">[email protected]</a> installer]# fdisk -l  Disk /dev/xvda: 107.4 GB, 107374182400 bytes, 209715200 sectors  Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical): 512 bytes / 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes   I/O size lable type: dos  Disk identifier: 0x000969af        Device Boot    Start     End    Blocks  Id  System  /dev/xvda1    *       2048    1026047  512000  83 Linux  /dev/xvda2         1026048 209715199 104344576 8e Linix LVM  Disk /dev/mapper/rhel-root: 104.7 GB, 104681439232 bytes, 204455936 sectors  Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical): 512 bytes / 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes     Disk /dev/mapper/rhel-swap: 2164 MB, 2164260864 bytes, 4227072 sectors  Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical): 512 bytes / 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes  <span><span>Disk /dev/xvdc: 21.5 GB, 21474836480 bytes, 41943040 sectors</span>  <span>Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical): 512 bytes / 512 bytes  I/O size (minimum/optimal): 512 bytes / 512 bytes  </span></span></code></pre><p>可以查看新添加的磁盘为<span> /dev/xvdc </span>。如果您添加了物理磁盘，它将根据磁盘类型显示为<span> /dev/sda </span>。在本教程中，我们使用了虚拟磁盘。</p><p>例如<strong> /dev/xvdc，</strong>对特定硬盘进行分区。</p><pre><code class="language-bash">fdisk /dev/xvdc    </code></pre><p><span> <a href="https://eldernode.com/linux-hosting/" target="_blank" rel="noopener noreferrer">购买Linux虚拟主机</a> </span></p><pre><code class="language-bash"/></pre><p>在下面，您可以使用fdisk命令。</p><ul><li><span>n</span>–创建分区</li><li><span>p</span>–打印分区表</li><li><span>d</span>–删除一个分区</li><li><span>q</span>–退出而不保存更改</li><li><span>w</span>–写入更改并退出。</li></ul><p>使用<span> n </span>选项时，创建的分区如下。</p><pre><code class="language-bash">[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d0a2bfbfa49095bcb4b5a2bebfb4b5">[email protected]</a> installer]#  fdisk  /dev/xvdc  Welcome to fdisk (unil-linux 2.23.2).    Changes will remain in memory only, until you decide to write them.  Be careful before using the write command.    device does not contain a recognized partition table  <span>Building</span> a new Dos disklable with disk identifier 0xea4ddcaf    <span>Command (m for help): n</span></code></pre><p> </p><p>此外，建议您创建主/扩展分区。默认情况下，最多可以有4个主分区。</p><pre><code class="language-bash">Command (m for help): n  Partition type:      P    primary (0 primary, 0 extended, 4 free)      e    extended  <span>Select   (default p): p</span></code></pre><p> </p><p>现在建议您使用默认值<span> 1 </span>。根据需要给出分区号。</p><pre><code class="language-bash">Partition number (1-4, default 1) : 1</code></pre><p>在使用新磁盘的情况下，您应该始终选择默认值。要在同一个磁盘上创建第二个分区，需要将<span> 1 </span>添加到前一个分区的最后一个扇区。</p><pre><code class="language-bash">First sector (2048-41943039, default 2048) : 2048</code></pre><p>是时候给出最后一个扇区的值或分区大小了。总是试图给出分区的大小和前缀<span> + </span>以避免值超出范围的错误。</p><pre><code class="language-bash">Last sector, +sectors or +size{k,m,g} (2048-41943039, default 41943039) : +18G</code></pre><p>然后保存更改并退出。</p><pre><code class="language-bash">Partition 1 of type Linux and of size 18 Gib is set  Command (m for help) : w    Calling ioctl() to re-read partition table.  Syncing disk.  [<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fc8e939388bcb99098998e92939899">[email protected]</a> installer]#</code></pre><p> </p><pre><code class="language-bash">Disk /dev/xvdc: 21.5 GB, 21474836480 bytes, 41943040 sectors  Units = sectors of 1 * 512 = 512 bytes  Sector size (logical/physical) : 512 bytes / 512 bytes  I/o size (minimum/optimal) : 512 bytes / 512 bytes  Disk lable type: dos  Disk identifier : 0xea4ddcaf          Device boot     Start      End      Blocks    Id   System  /dev/xvdcl             2048  37750783 18874368      83   Linux  [<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="87f5e8e8f3c7c2ebe3e2f5e9e8e3e2">[email protected]</a> installer]#</code></pre><p> </p><p>现在用<strong> mkfs </strong>命令格式化磁盘。</p><pre><code class="language-bash">mkfs.ext4 /dev/xvdc1</code></pre><pre><code class="language-bash">[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="89fbe6e6fdc9cce5edecfbe7e6edec">[email protected]</a> installer]# mkfs.ext4 /dev/xvdc1  mke2fs 1.42.9 (28-Dec-2013)  Filesystem lable=  OS type: Linux  Block size=4096 (log=2)  Fragment size=4096 (log=2)  Stride=0 blocks, Stripe width=0 blocks  1179648 inodes, 4718592 blocks  235929 blocks (5.00%) reserved for thr super user  First data block=0  Maximum filesystem blocks=2153775104  144 block groups  32768 blocks per group, 32768 fragment per group  8192 inodes per group  Superblock backups stored on blocks:        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 4096000    Allocating group tables: done  Writting inode tables: done  <span>Creating</span> Journal (32768 blocks): done   Writting superblocks and filesystem accounting <span>information</span>: done    </code></pre><p>格式化完成后挂载分区。</p><pre><code class="language-bash">mount /dev/xvdc1 /data  </code></pre><p>现在，您应该在<strong> /etc/fstab </strong>文件中为引导时的永久挂载创建一个条目。</p><pre><code class="language-bash">/dev/xvdc1	/data	ext4	defaults     0   0</code></pre><p> </p><p><strong>使用分区时请注意</strong>，尤其是在编辑已配置的磁盘时。</p><p> </p><p>亲爱的用户，我们希望这个向Linux服务器添加新磁盘的教程对你有所帮助，如果你有任何问题或者想查看我们的用户关于这篇文章的对话，请访问<a href="https://eldernode.com/ask">提问页面。</a>也为了提高你的知识，<a href="https://eldernode.com/blog/">老年节点培训准备了很多有用的教程。</a></p><p> </p><p> </p><p><strong> <span>亦作，见</span> </strong></p><p class="fjpost-title px-0"><span> <a href="https://eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener noreferrer">教程Linux上连接ssh</a></span></p><p class="fjpost-title px-0"><span> <a href="https://eldernode.com/work-with-fping-in-linux/">如何在Linux中使用Fping</a></span></p><p class="fjpost-title px-0"><span> <a href="https://eldernode.com/send-messages-to-all-users-on-linux/">教程向Linux服务器上的所有用户发送消息</a> </span></p><p class="fjpost-info"/><p> </p></div></div>    
</body>
</html>