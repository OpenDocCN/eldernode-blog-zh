<html>
<head>
<title>How to Install and Configure Redmine on Centos 7 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Centos 7 - Eldernode博客上安装和配置Redmine</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-and-configure-redmine-on-centos-7/#0001-01-01">https://blog.eldernode.com/install-and-configure-redmine-on-centos-7/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/365438356e77b860fee402e463a3ca7c.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Install and Configure Redmine on Centos 7" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Install-and-Configure-Redmine-on-Centos-7.png"/><p>逐步了解如何在Centos 7 上安装和配置Redmine。Redmine是一个很棒的基于web的项目管理工具，用Ruby on Rails框架编写。Redmine是开源的，并在<a href="https://en.wikipedia.org/wiki/GNU_General_Public_License"> GPL </a>下获得许可，被设计为跨平台和跨数据库。在本文中，我们将讨论如何在CentOS 7中安装和配置这个强大的项目管理器。你可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener noreferrer"> Eldernode </a>提供的包来购买<a href="https://eldernode.com/centos-vps/" target="_blank" rel="noopener noreferrer"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="Tutorial_Install_and_Configure_Redmine_on_Centos_7"/>教程在Centos 7上安装和配置red mine<span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="Prerequisites_for_Installing_Redmine"/>安装Redmine的先决条件<span class="ez-toc-section-end"/></h3><p>在Centos 7上开始安装Redmine之前，您需要确保以下先决条件:</p><p><strong> 1) </strong>指向你服务器公共IP的域名。在本教程中，我们考虑了域名【eldernode.com】<em><strong/></em>。所以你要输入你想要的域名。</p><p>在Centos 7上安装Redmine的下一个先决条件是一个<a href="https://blog.eldernode.com/install-ruby-centos8/"> Ruby </a>应用服务器，我们将使用带有<a href="https://blog.eldernode.com/install-nginx-on-ubuntu-20-04-lts/"> Nginx </a>的Passenger。</p><p>最后，你需要有一个数据库。在本教程中，我们使用了<a href="https://blog.eldernode.com/whats-mariadb-how-it-works/"> MariaDB </a>数据库。您可以根据需要拥有自己的数据库。</p><h2><span class="ez-toc-section" id="Install_and_Configure_Redmine_on_Centos_7"/>在Centos 7上安装和配置red mine<span class="ez-toc-section-end"/></h2><p>准备安装Redmine的第一步是安装必要的ruby和Redmine包。要安装这些软件包，您必须键入并执行以下命令:</p><pre><code class="language-bash">$ sudo yum install curl gpg gcc gcc-c++ make patch autoconf automake bison libffi-devel libtool</code></pre><pre><code class="language-bash">$ sudo yum install readline-devel sqlite-devel zlib-devel openssl-develh readline glibc-headers glibc-devel  </code></pre><pre><code class="language-bash">$ sudo yum install mariadb-devel zlib libyaml-devel bzip2 iconv-devel ImageMagick ImageMagick-devel</code></pre><p>在下一步中，您必须安装所需的数据库。在本教程中，我们将在CentOS 7上安装MariaDB:</p><pre><code class="language-bash">$ sudo yum install mariadb-server</code></pre><p>现在，您需要键入并执行以下命令来激活数据库(MariaDB):</p><pre><code class="language-bash">$ sudo systemctl start mariadb</code></pre><pre><code class="language-bash">$ sudo systemctl enable mariadb</code></pre><p>安装数据库后，可以使用以下命令检查其安装状态:</p><pre><code class="language-bash">$ sudo systemctl status mariadb</code></pre><p>现在，您必须键入并执行以下命令来安装安全脚本。执行以下命令后，将会询问您几个问题。输入“<strong> Y </strong>以响应它们:</p><pre><code class="language-bash">$ sudo mysql_secure_installation</code></pre><h3><span class="ez-toc-section" id="Tutorial_Create_a_MySQL_Database"/>教程创建MySQL数据库<span class="ez-toc-section-end"/></h3><p>要创建一个<a href="https://blog.eldernode.com/install-mysql-on-linux-ubuntu-20-04/"> MySQL </a>数据库，您首先需要使用以下命令登录到您的MySQL shell:</p><pre><code class="language-bash">$ sudo mysql</code></pre><p>现在，您需要键入并运行以下命令，在MySQL shell中创建新的数据库:</p><pre><code class="language-bash">mysql&gt; CREATE DATABASE redmine CHARACTER SET utf8;</code></pre><p>在MySQL shell中成功创建了一个新数据库之后，现在必须使用下面的命令在MySQL中创建一个帐户。您还需要为该用户提供访问数据库的权限。在下面的命令中，您需要键入您想要的密码，而不是<strong> EnterPasswordHere </strong>。</p><pre><code class="language-bash">mysql&gt; GRANT ALL ON redmine.* TO 'redmine'@'localhost' IDENTIFIED BY 'EnterPasswordHere';</code></pre><h3><span class="ez-toc-section" id="Learn_how_to_install_Passenger_and_Nginx"/>了解如何安装乘客和Nginx <span class="ez-toc-section-end"/></h3><p>在本文的其余部分，我们将尝试教您如何为<a href="https://blog.eldernode.com/install-nginx-on-ubuntu-20-04-lts/"> Nginx </a>安装乘客模块。Passenger是一个开源的web和应用服务器，它极大地简化了Ruby应用、<a href="https://blog.eldernode.com/install-python-3-8-on-centos/"> Python </a>和<a href="https://blog.eldernode.com/install-node-js-centos-7/"> Node.js </a>的部署。Passenger是一种在所有DreamHost服务器上部署和托管Ruby on Rails应用程序的便捷方式。应该注意的是，乘客在每个DreamHost托管计划中都是免费的。</p><p>在第一步中，您必须使用以下命令来安装EPEL系统信息库:</p><pre><code class="language-bash">$ sudo yum install epel-release yum-utils pygpgme</code></pre><pre><code class="language-bash">$ sudo yum-config-manager --enable epel</code></pre><p>在安装了所需的包之后，您现在应该激活Phusionpassenger存储库。</p><pre><code class="language-bash">$ sudo yum-config-manager --add-repo https://oss-binaries.phusionpassenger.com/yum/definitions/el-passenger.repo</code></pre><p>现在是时候键入并运行以下命令来安装Passenger和Nginx了:</p><pre><code class="language-bash">$ sudo yum install nginx passenger passenger-devel</code></pre><p>在这篇文章的后续部分，在我们教你如何在CentOS 7上安装Redmine之前，我们将教你如何创建一个新的系统用户以及如何安装Ruby。请加入我们。</p><h3><span class="ez-toc-section" id="How_to_Create_a_New_System_User"/>如何创建新的系统用户<span class="ez-toc-section-end"/></h3><p>创建新系统用户的目的是为了能够运行Redmine。因此，您必须键入并执行以下命令:</p><pre><code class="language-bash">$ sudo useradd -m -U -r -d /opt/redmine redmine</code></pre><p>下一步，您需要将Nginx用户添加到新的用户组中。因此，您必须键入并执行以下命令:</p><pre><code class="language-bash">$ sudo usermod -a -G redmine nginx</code></pre><p>要访问Nginx，请输入以下命令:</p><pre><code class="language-bash">$ sudo chmod 750 /opt/redmine</code></pre><h3><span class="ez-toc-section" id="Tutorial_install_Ruby"/>教程安装Ruby <span class="ez-toc-section-end"/></h3><p>准备在CentOS 7发行版上安装Redmine的最后一件事是安装Ruby。在第一步中，您必须通过键入以下命令转到Redmine用户:</p><pre><code class="language-bash">$ sudo su - redmine</code></pre><p>在第二步中，您必须通过键入并执行以下命令来输入<strong> GPG键</strong>:</p><pre><code class="language-bash">$ gpg --keyserver hkp://pool.sks-keyservers.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</code></pre><p>现在你需要安装<a href="https://en.wikipedia.org/wiki/Ruby_Version_Manager"> RVM </a>:</p><pre><code class="language-bash">$ curl -sSL https://get.rvm.io | bash -s stable</code></pre><p>安装RVM后，在下一步中，您必须找到RVM文件才能使用它。为此，键入并运行以下命令:</p><pre><code class="language-bash">$ source /opt/redmine/.rvm/scripts/rvm</code></pre><p>现在输入下面的命令行来安装Ruby。需要注意的是，在下面的命令中，2.7.2表示的是Ruby的最新版本，如果有新版本可以更改。</p><pre><code class="language-bash">$ rvm install 2.7.2</code></pre><pre><code class="language-bash">$ rvm --default use 2.7.2</code></pre><h2><span class="ez-toc-section" id="How_to_install_Redmine_on_CentOS_7"/>如何在CentOS 7上安装red mine<span class="ez-toc-section-end"/></h2><p>首先以Redmine用户的身份登录。然后，您需要使用下面的Curl命令下载Redmine归档文件:</p><pre><code class="language-bash">$ curl -L http://www.redmine.org/releases/redmine-4.1.1.tar.gz -o redmine.tar.gz</code></pre><p>现在您需要解压缩下载的文件:</p><pre><code class="language-bash">$ tar -xvf redmine.tar.gz</code></pre><p>下一步是配置Redmine数据库，您可以使用以下示例来完成:</p><pre><code class="language-bash">$ cp /opt/redmine/redmine-4.1.1/config/database.yml.example /opt/redmine/redmine-4.1.1/config/database.yml</code></pre><p>然后使用文本编辑器打开文件:</p><pre><code class="language-bash">nano /opt/redmine/redmine-4.1.1/config/database.yml</code></pre><p>通过在生产部分进行搜索，输入创建的数据库信息。请注意，您必须输入您想要的密码，而不是在此输入密码。然后<strong>救</strong>它。</p><p><strong>制作:</strong> <br/> <strong>适配器:</strong> mysql2 <br/> <strong>数据库:</strong> redmine <br/> <strong>主机:</strong> localhost <br/> <strong>用户名:</strong> redmine <br/> <strong>密码:</strong>【enter password here】<br/><strong>编码:</strong> utf8</p><p>接下来，您需要安装所有的ruby依赖项和bundler。为此，请转到redmine-4.1.1目录，打开终端，输入以下命令:</p><pre><code class="language-bash">$ cd ~/redmine-4.1.1</code></pre><pre><code class="language-bash">$ gem install bundler --no-rdoc --no-ri</code></pre><pre><code class="language-bash">$ bundle install --without development test postgresql sqlite</code></pre><p>在下一步中，通过键入以下命令，您必须生成密钥并移动数据库:</p><pre><code class="language-bash">$ bundle exec rake generate_secret_token</code></pre><pre><code class="language-bash">$ RAILS_ENV=production bundle exec rake db:migrate</code></pre><p>在运行Redmine之前，您必须做的另一个步骤是配置Nginx。只需切换到您的sudo用户:</p><pre><code class="language-bash">$ exit</code></pre><p>通过重新打开您喜欢的文本编辑器来创建Nginx服务器块:</p><pre><code class="language-bash">$ sudo nano /etc/nginx/conf.d/example.com.conf</code></pre><p>在用下面文本中的www.example.com替换您想要的Redmine域后，将其复制并粘贴到您打开的文件中:</p><pre><code class="language-bash">passenger_root /usr/share/ruby/vendor_ruby/phusion_passenger/locations.ini;  passenger_ruby /opt/redmine/.rvm/gems/default/wrappers/ruby;  passenger_instance_registry_dir /var/run/passenger-instreg;    server {  listen 80;  server_name example.com www.example.com;    root /opt/redmine/redmine-4.1.1/public;    # log files  access_log /var/log/nginx/example.com.access.log;  error_log /var/log/nginx/example.com.error.log;    passenger_enabled on;  passenger_min_instances 1;    client_max_body_size 10m;  }</code></pre><p>如果您成功完成了所有任务和步骤，您应该会看到以下输出:</p><pre><code class="language-bash">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</code></pre><pre><code class="language-bash">nginx: configuration file /etc/nginx/nginx.conf test is successful</code></pre><p>最后重启Nginx服务器:</p><pre><code class="language-bash">sudo systemctl restart nginx</code></pre><p>完整安装Redmine的最后一步是用SSL加密<a href="https://blog.eldernode.com/install-nginx-debian-10/"> Nginx </a>。为此，您必须首先使用下面的命令行打开Nginx配置文件:</p><pre><code class="language-bash">$ sudo nano /etc/nginx/conf.d/example.com.conf</code></pre><p>然后，您需要编辑您的Redmine域，而不是下面命令中的<strong>example.com</strong>。这样就完成了Redmine的安装，您可以访问它:</p><pre><code class="language-bash">passenger_root /usr/share/ruby/vendor_ruby/phusion_passenger/locations.ini;  passenger_ruby /opt/redmine/.rvm/gems/default/wrappers/ruby;  passenger_instance_registry_dir /var/run/passenger-instreg;    # Redirect HTTP -&gt; HTTPS  server {  listen 80;  server_name www.example.com example.com;    include snippets/letsencrypt.conf;  return 301 https://example.com$request_uri;  }    # Redirect WWW -&gt; NON WWW  server {  listen 443 ssl http2;  server_name www.example.com;    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;  ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;  ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;  include snippets/ssl.conf;    return 301 https://example.com$request_uri;  }    server {  listen 443 ssl http2;  server_name example.com;    root /opt/redmine/redmine-4.1.1/public;    # SSL parameters  ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;  ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;  ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;  include snippets/ssl.conf;  include snippets/letsencrypt.conf;    # log files  access_log /var/log/nginx/example.com.access.log;  error_log /var/log/nginx/example.com.error.log;    passenger_enabled on;  passenger_min_instances 1;  client_max_body_size 10m;  }</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，我们首先介绍作为项目控制程序的免费开源Redmine程序。然后，在解释了安装该软件的必要先决条件后，我们教您如何在Centos 7上安装和配置Redmine。</p></div></div>    
</body>
</html>