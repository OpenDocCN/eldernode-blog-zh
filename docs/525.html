<html>
<head>
<title>Tutorial Install Diaspora Social Media on Ubuntu 20.04 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在Ubuntu 20.04上安装Diaspora社交媒体- Eldernode博客</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-diaspora-social-media-on-ubuntu/#0001-01-01">https://blog.eldernode.com/install-diaspora-social-media-on-ubuntu/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/d835710afd8720505c3a93896ca61e99.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install Diaspora Social Media on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Install-Diaspora-Social-Media-on-Ubuntu-20.04.png"/><p>Diaspora是一个非盈利、用户所有的分布式社交网络。该程序由一组独立的节点组成，这些节点一起工作形成一个网络。这个社交网络不属于任何人或机构，使网络不受公司或广告的占用。在本文中，我们尝试学习你的教程在Ubuntu 20.04上安装Diaspora社交媒体。你可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>提供的包来购买<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener"> Ubuntu VPS </a>服务器。</p><h2><span class="ez-toc-section" id="How_to_Install_Diaspora_Social_Media_on_Ubuntu_2004"/> <strong>如何在Ubuntu 20.04上安装Diaspora社交媒体</strong> <span class="ez-toc-section-end"/></h2><p>本文涵盖的部分包括以下主题。我们将首先学习如何安装依赖包。然后需要为Diaspora创建一个PostgreSQL用户。下一步，我们将解释如何安装RVM和<a href="https://blog.eldernode.com/install-ruby-centos8/"> Ruby </a>，最后我们将学习如何下载和配置Diaspora。在本教程中跟随我们。</p><h3><span class="ez-toc-section" id="How_to_install_package_dependencies_to_install_Diaspora"/> <strong>如何安装包依赖安装流散</strong> <span class="ez-toc-section-end"/></h3><p>在你开始在Ubuntu 20.04上安装Diaspora社交媒体之前，你必须先安装依赖项。这些依赖包包括<a href="https://blog.eldernode.com/install-postgresql-debian10/"> PostgreSQL </a>、<a href="https://blog.eldernode.com/configure-redis-on-linux-ubuntu-20-04/"> Redis </a>和<a href="https://blog.eldernode.com/install-nginx-on-ubuntu-20-04-lts/"> Nginx </a> web服务器。使用以下命令安装依赖项:</p><pre><code class="language-bash">sudo apt-get install build-essential cmake gnupg2 libssl-dev libcurl4-openssl-dev libxml2-dev libxslt-dev imagemagick ghostscript curl libmagickwand-dev git libpq-dev redis-server nodejs postgresql</code></pre><p>现在您已经安装了依赖包，您需要启动并激活它们。为此，您可以运行以下命令:</p><pre><code class="language-bash">systemctl start redis-server</code></pre><pre><code class="language-bash">systemctl enable redis-server</code></pre><pre><code class="language-bash">systemctl start postgresql</code></pre><pre><code class="language-bash">systemctl enable postgresql</code></pre><h3><span class="ez-toc-section" id="How_to_Create_New_PostgreSQL_User_for_Diaspora"/>如何为Diaspora创建新的PostgreSQL用户<span class="ez-toc-section-end"/></h3><p>在为Diaspora创建新的PostgreSQL用户之前，首先需要更改默认的postgres用户密码。您必须首先登录PostgreSQL:</p><pre><code class="language-bash">sudo -i -u postgres psql</code></pre><p>现在，您需要使用以下命令来更改密码。输入以下命令后，您必须输入新密码并再次键入，以便为postgres用户设置新密码。</p><pre><code class="language-bash">\password postgres</code></pre><p>更改密码后，现在是时候创建一个新的<strong> diaspora </strong>用户，该用户拥有<strong> CREATEDB </strong>权限来创建数据库。为此，请运行以下命令。</p><p><em> <strong>注意:</strong> </em>在下面的命令中，你必须输入你的密码，而不是<strong> yourpassword </strong>。</p><pre><code class="language-bash">CREATE USER diaspora WITH CREATEDB PASSWORD 'yourpassword';</code></pre><p>输入以下命令退出PostgreSQL shell:</p><pre><code class="language-bash">EXIT</code></pre><h3><span class="ez-toc-section" id="Learn_how_to_Create_a_New_User"/>了解如何创建新用户<span class="ez-toc-section-end"/></h3><p>在这一步中，您必须使用以下命令创建一个名为diaspora的新系统用户。然后使用下一个命令为其设置密码。应该注意的是，这个用户是在创建之后添加到sudo组中的。</p><pre><code class="language-bash">adduser --disabled-login Diaspora</code></pre><pre><code class="language-bash">passwd diaspora</code></pre><pre><code class="language-bash">usermod -a -G sudo diaspora</code></pre><h3><span class="ez-toc-section" id="Tutorial_Install_RVM_and_Ruby"/>教程安装RVM和红宝石<span class="ez-toc-section-end"/></h3><p>要安装RVM和Ruby，您必须首先使用以下命令登录到<strong> diaspora </strong>用户:</p><pre><code class="language-bash">su - diaspora</code></pre><p>还需要安装RVM和红宝石<strong> GPGP键</strong>。为此，请运行以下命令:</p><pre><code class="language-bash">gpg2 --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</code></pre><p>完成上述步骤后，您现在可以安装RVM了。通过以下命令成功安装RVM后，您必须输入diaspora用户的密码。</p><pre><code class="language-bash">curl -sSL https://get.rvm.io | bash -s stable</code></pre><p>然后，您需要使用以下命令将rvm脚本加载到您的服务器:</p><pre><code class="language-bash">source /home/diaspora/.rvm/scripts/rvm</code></pre><p>需要注意的是，您可以使用以下命令轻松安装<strong> Ruby 2.6 </strong>，然后检查其版本:</p><pre><code class="language-bash">rvm install 2.6</code></pre><pre><code class="language-bash">ruby -v    </code></pre><h3><span class="ez-toc-section" id="How_to_download_and_configure_Diaspora"/>如何下载和配置Diaspora <span class="ez-toc-section-end"/></h3><p>您必须首先通过运行以下命令来安装Diaspora源代码:</p><pre><code class="language-bash">git clone -b master https://github.com/diaspora/diaspora.git</code></pre><pre><code class="language-bash">cd diaspora</code></pre><p>接下来，您需要运行以下命令来配置数据库和diaspora:</p><pre><code class="language-bash">cp config/database.yml.example config/database.yml</code></pre><pre><code class="language-bash">cp config/diaspora.yml.example config/diaspora.yml</code></pre><p>现在您需要用Vim编辑器编辑数据库配置文件:</p><pre><code class="language-bash">vim config/database.yml</code></pre><p>打开文件后，将用户名和密码信息更改为您想要的数据。然后<strong>保存</strong>文件并退出。</p><pre><code class="language-bash">postgresql: &amp;postgresql  adapter: postgresql  host: "localhost"  port: 5432  username: "diaspora"  password: "yourpassword"  encoding: unicode</code></pre><p>现在您需要使用vim编辑器编辑diaspora配置文件:</p><pre><code class="language-bash">vim config/diaspora.yml</code></pre><p>打开diaspora配置文件后，必须按如下方式进行配置。在下面的命令中，你必须输入你想要的域名，而不是<strong> yourdomainname </strong>。做出更改后，您可以<strong>保存</strong>它们。</p><pre><code class="language-bash">configuration: ## Section  ...  environment: ## Section  ...  url: "https://yourdomainname.com/"  certificate_authorities: '/etc/ssl/certs/ca-certificates.crt'  require_ssl: true  ...  server: ## Section  rails_environment: 'production'  ...</code></pre><p>成功完成上述步骤后，现在应该安装gem和ruby库了:</p><pre><code class="language-bash">gem install bundler</code></pre><pre><code class="language-bash">script/configure_bundler</code></pre><pre><code class="language-bash">bin/bundle install --full-index</code></pre><p>接下来，您需要将数据库迁移到Diaspora:</p><pre><code class="language-bash">RAILS_ENV=production bundle exec rake db:create db:migrate</code></pre><p>最后，您必须运行以下命令来编译所有rails资产管道:</p><pre><code class="language-bash">RAILS_ENV=production bin/rake assets:precompile</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>Diaspora是一个社交网络，由一组相互隶属的独立节点(pod)组成，这些节点一起工作形成一个网络。在这篇文章中，我们试图一步一步地学习如何在Ubuntu 20.04上安装Diaspora社交媒体。</p></div></div>    
</body>
</html>