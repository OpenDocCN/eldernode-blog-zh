<html>
<head>
<title>Tutorial Create a Self-Signed SSL Certificate for Apache in Debian 10 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在Debian 10 - Eldernode中为Apache创建自签名SSL证书</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/create-ssl-apache-debian-10/#0001-01-01">https://blog.eldernode.com/create-ssl-apache-debian-10/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/f8712779417c8d93338019b3810a4809.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Create a Self-Signed SSL Certificate for Apache in Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2052.png"/><p><span> TLS，即传输层安全性，以及它的前身<a href="https://eldernode.com/how-to-install-and-activate-the-ssl-certificate/" target="_blank" rel="noopener noreferrer"> SSL </a>，代表安全套接字层，是用于将正常流量包装在受保护的加密包装中的web协议。</span></p><p>使用这种技术，服务器可以在服务器和客户端之间安全地发送流量，而不存在消息被外界截取的可能性。证书系统还帮助用户验证他们正在连接的站点的身份。不要错过最强大的<a href="https://eldernode.com/linux-hosting/" target="_blank" rel="noopener noreferrer"> Linux主机</a>来享受与您的研究工作。</p><p> </p><p> </p><p>为了让本教程更好地发挥作用，请考虑以下<strong>先决条件</strong> : </p><p><span>一个拥有sudo权限</span> <br/> <span>的非根用户，按照我们在Debian 10 上的<a href="https://eldernode.com/initial-setup-with-debian-10/" target="_blank" rel="noopener noreferrer">初始服务器设置进行设置。</a></span> <br/> <span>您还需要安装Apache webserver。要查看细节，你可以按照我们的指南<a href="https://eldernode.com/install-lamp-debian-10/" target="_blank" rel="noopener noreferrer">在Debian 10 </a>上设置灯。</span></p><p><span> </span></p><p><span> <strong>在开始</strong>并遵循本教程的步骤之前，<strong>请注意</strong>自签名证书将加密您的服务器和任何客户端之间的通信。但是，因为它不是由web浏览器附带的任何可信证书颁发机构签名的，所以用户不能使用该证书来自动验证服务器的身份。</span></p><p>如果您没有与服务器相关联的域名，并且加密的web界面不是面向用户的，那么自签名证书可能是合适的。如果您有域名，在许多情况下最好使用CA签名的证书。你可以在这里 的<strong> <a href="https://eldernode.com/secure-apache-debian-10/" target="_blank" rel="noopener noreferrer">项目中找到如何设置一个免费的可信证书。</a></strong></p><p> </p><p> </p><h2><span class="ez-toc-section" id="Tutorial_Create_a_Self-Signed_SSL_Certificate_for_Apache_in_Debian_10"/> <span>教程在Debian 10 </span> <span class="ez-toc-section-end"/>中为Apache创建自签名SSL证书</h2><p><span>完成先决条件后，您可以浏览本指南，学习如何在<strong> Debian 10 </strong>中为<strong> Apache </strong>创建<strong>自签名SSL证书</strong>。</span></p><p> </p><h3 id="step-1-—-creating-the-ssl-certificate"><span class="ez-toc-section" id="1-_How_To_Create_the_SSL_Certificate"/> <span> 1-如何创建SSL证书</span> <span class="ez-toc-section-end"/></h3><p><span>由于TLS/SSL通过使用公共证书和私有密钥的组合来工作，SSL密钥在服务器上保持秘密，并用于加密发送给客户端的内容。SSL证书与请求内容的任何人公开共享。它可用于解密由相关SSL密钥签名的内容。</span></p><p><span>因此，使用OpenSSL创建自签名密钥和证书对:</span></p><pre><code class="language-bash"><span>sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt</span></code></pre><p>由于您将被问及一系列问题，让我们来看看您发出的命令中发生了什么，以帮助您解决这些问题。</p><p> </p><p><span> <strong> openssl </strong>:这是创建和管理openssl证书、密钥和其他文件的基本命令行工具。</span></p><p><span> <strong> req </strong>:这个子命令指定您想要使用X.509证书签名请求(CSR)管理。“X.509”是一种公钥基础设施标准，SSL和TLS遵守这一标准来管理其密钥和证书。您想要创建一个新的X.509证书，所以我们使用这个子命令。</span></p><p><span> <strong> -x509 </strong>:这进一步修改了前面的子命令，告诉实用程序您想要生成一个自签名证书，而不是像通常情况下那样生成一个证书签名请求。</span></p><p><span><strong>-节点</strong>:这告诉OpenSSL跳过用密码短语保护我们的证书的选项。当服务器启动时，您需要Apache能够在没有用户干预的情况下读取文件。密码可以防止这种情况发生，因为我们必须在每次重启后输入密码。</span></p><p><span><strong>-365天</strong>:该选项设置证书被认为有效的时间长度。你在这里设定了一年。</span></p><p><span> <strong> -newkey rsa </strong> :2048:表示你要同时生成新证书和新密钥。在前面的步骤中，您没有创建签名证书所需的密钥，因此您需要在创建证书的同时创建密钥。rsa:2048部分告诉它生成一个2048位长的rsa密钥。</span></p><p><span><strong>-keyut</strong>:这一行告诉OpenSSL将您正在创建的生成的私钥文件放在哪里。</span></p><p><span> <strong> -out </strong>:这告诉OpenSSL在哪里放置您正在创建的证书。</span></p><p>这些选项将创建密钥文件和证书。为了将信息正确地嵌入到证书中，您将被询问一些关于我们的服务器的问题。</p><p><span>尽量适当填写提示。<strong>最重要的一行是请求</strong>通用名称(如服务器FQDN或您的名字)<strong>的那一行。您需要输入与您的服务器相关联的域名，或者更有可能是您的服务器的公共IP地址。</strong> </span></p><p><span>全部提示如下输出。</span></p><p title="Output"><span>输出</span></p><pre><code class="language-bash"><span>Country Name (2 letter code) [AU]:US  State or Province Name (full name) [Some-State]:New York  Locality Name (eg, city) []:New York City  Organization Name (eg, company) [Internet Widgits Pty Ltd]:Bouncy Castles, Inc.  Organizational Unit Name (eg, section) []:Ministry of Water Slides  Common Name (e.g. server FQDN or YOUR name) []:server_IP_address  Email Address []:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="84e5e0e9edeac4fdebf1f6">[email protected]</a>_domain.co</span></code></pre><p><span> <strong>点</strong>:你创建的两个文件都会放在/etc/ssl下相应的子目录中。</span></p><p> </p><p> </p><h3 id="step-2-—-configuring-apache-to-use-ssl"><span class="ez-toc-section" id="2-_How_To_Configure_Apache_to_Use_SSL"/> <span> 2-如何配置</span> <span> Apache使用SSL </span> <span class="ez-toc-section-end"/></h3><p>当在/etc/ssl目录下创建了我们的密钥和证书文件后，您只需要修改我们的Apache配置就可以利用它们了。</p><p><span>这样，您将对您的配置进行一些调整:</span></p><p><span>您将创建一个配置片段来指定强默认SSL设置。</span> <br/> <span>您将修改包含的SSL Apache虚拟主机文件，以指向我们生成的SSL证书。</span> <br/> <span>(推荐)您将修改未加密的虚拟主机文件，以自动将请求重定向到加密的虚拟主机。</span></p><p><span>毕竟，如果</span> <span>您验证，您将拥有一个安全的SSL配置。</span></p><p> </p><p> </p><h3 id="creating-an-apache-configuration-snippet-with-strong-encryption-settings"><span class="ez-toc-section" id="Lets_Create_an_Apache_Configuration_Snippet_with_Strong_Encryption_Settings"/> <span>让我们创建一个具有强加密设置的Apache配置片段</span> <span class="ez-toc-section-end"/></h3><p>为了开始这一步，您将创建一个Apache配置片段来定义一些SSL设置。这将为Apache设置一个强大的SSL密码套件，并启用一些有助于保持服务器安全的高级功能。我们将设置的参数可以由任何启用SSL的虚拟主机使用。</p><p><span>在/etc/apache2/conf-available目录中创建一个新的代码片段。我们将该文件命名为ssl-params.conf，以使其用途更加清晰:</span></p><pre><code class="language-bash"><span>sudo nano /etc/apache2/conf-available/ssl-params.conf</span></code></pre><p>此外，您还可以完全复制所提供的设置。您只需对此做一个小小的改变，禁用<strong>严格传输安全</strong>报头(HSTS)。</p><p>预加载HSTS提供了更高的安全性，但如果意外启用或启用不正确，可能会产生深远的后果。在本指南中，我们不会启用这些设置，但是如果您确定理解其含义，您可以修改这些设置。</p><p><span>但是在决定之前，花点时间阅读一下<a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security" target="_blank" rel="noopener noreferrer"> HTTP严格传输安全，或者HSTS </a>，特别是关于“预加载”功能。</span></p><p><span>然后，将以下配置粘贴到您打开的ssl-params.conf文件中:</span></p><p class="code-label" title="/etc/apache2/conf-available/ssl-params.conf"><span>/etc/Apache 2/conf-available/SSL-params . conf</span></p><pre><code class="language-bash"><span>SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH  SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1  SSLHonorCipherOrder On  Disable preloading HSTS for now.  You can use the commented out header line that includes  the "preload" directive if you understand the implications.  Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"  Header always set X-Frame-Options DENY  Header always set X-Content-Type-Options nosniff  Requires Apache &gt;= 2.4  SSLCompression off  SSLUseStapling on  SSLStaplingCache "shmcb:logs/stapling-cache(150000)"  Requires Apache &gt;= 2.4.11  SSLSessionTickets Off</span></code></pre><p>完成后，您可以保存并关闭文件。</p><p> </p><p> </p><h3 id="modifying-the-default-apache-ssl-virtual-host-file"><span class="ez-toc-section" id="Lets_Modify_the_Default_Apache_SSL_Virtual_Host_File"/> <span>让我们修改默认的Apache SSL虚拟主机文件</span> <span class="ez-toc-section-end"/></h3><p><span>接下来，我们来修改/etc/Apache 2/sites-available/default-SSL . conf，默认的Apache SSL虚拟主机文件。如果您使用不同的服务器块文件，请在下面的命令中替换其名称。</span></p><p><span>在继续之前，让我们备份原始的SSL虚拟主机文件:</span></p><pre><code class="language-bash"><span>sudo cp /etc/apache2/sites-available/default-ssl.conf /etc/apache2/sites-available/default-ssl.conf.bak</span></code></pre><p><span>接下来，打开SSL虚拟主机文件进行调整:</span></p><pre><code class="language-bash"><span>sudo nano /etc/apache2/sites-available/default-ssl.conf</span></code></pre><p><span>在内部，删除了大部分注释，虚拟主机块在默认情况下应该是这样的:</span></p><p class="code-label" title="/etc/apache2/sites-available/default-ssl.conf"><span>/etc/Apache 2/sites-available/default-SSL . conf</span></p><pre><code class="language-bash"><span>&lt;IfModule mod_ssl.c&gt;          &lt;VirtualHost _default_:443&gt;                  ServerAdmin <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="394e5c5b54584a4d5c4b7955565a585551564a4d">[email protected]</a>                    DocumentRoot /var/www/html                    ErrorLog ${APACHE_LOG_DIR}/error.log                  CustomLog ${APACHE_LOG_DIR}/access.log combined                    SSLEngine on                    SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem                  SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key                    &lt;FilesMatch "\.(cgi|shtml|phtml|php)$"&gt;                                  SSLOptions +StdEnvVars                  &lt;/FilesMatch&gt;                  &lt;Directory /usr/lib/cgi-bin&gt;                                  SSLOptions +StdEnvVars                  &lt;/Directory&gt;            &lt;/VirtualHost&gt;  &lt;/IfModule&gt;</span></code></pre><p>你将对文件做一些小的调整。您将在虚拟主机文件中设置您想要调整的正常内容(ServerAdmin电子邮件地址、ServerName等。)，并调整SSL指令以指向我们的证书和密钥文件。同样，如果你使用不同的文档根，一定要更新<strong> DocumentRoot </strong>指令。</p><p>当您进行这些更改时，您会看到如下所示的服务器块。</p><p class="code-label" title="/etc/apache2/sites-available/default-ssl.conf"><span>/etc/Apache 2/sites-available/default-SSL . conf</span></p><pre class="code-pre"><code class="language-bash"><span>&lt;IfModule mod_ssl.c&gt;          &lt;VirtualHost _default_:443&gt;                  ServerAdmin <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cfb6a0babd90aaa2aea6a38faab7aea2bfa3aae1aca0a2">[email protected]</a>                  ServerName server_domain_or_IP                    DocumentRoot /var/www/html                    ErrorLog ${APACHE_LOG_DIR}/error.log                  CustomLog ${APACHE_LOG_DIR}/access.log combined                    SSLEngine on                    SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt                  SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key                    &lt;FilesMatch "\.(cgi|shtml|phtml|php)$"&gt;                                  SSLOptions +StdEnvVars                  &lt;/FilesMatch&gt;                  &lt;Directory /usr/lib/cgi-bin&gt;                                  SSLOptions +StdEnvVars                  &lt;/Directory&gt;            &lt;/VirtualHost&gt;  &lt;/IfModule&gt;</span></code></pre><p class="code-pre">完成后，您可以保存并关闭文件。</p><p> </p><p> </p><h3><span class="ez-toc-section" id="How_To_Modify_the_HTTP_Host_File_to_Redirect_to_HTTPS_Recommended"/> <span>如何修改HTTP主机文件重定向到HTTPS(推荐)</span> <span class="ez-toc-section-end"/></h3><p>如您所见，服务器将提供未加密的HTTP和加密的HTTPS流量。为了提高安全性，在大多数情况下，建议自动将HTTP重定向到HTTPS。如果您不想要或不需要此功能，可以安全地跳过这一部分。</p><p><span>打开<strong>/etc/Apache 2/sites-available/000-default . conf</strong>文件，调整未加密的虚拟主机文件，将所有流量重定向到SSL加密。</span></p><pre><code class="language-bash"><span>sudo nano /etc/apache2/sites-available/000-default.conf</span></code></pre><p><span>在内部，在<strong>虚拟主机</strong>配置块中，添加一个<strong>重定向</strong>指令，将所有流量指向站点的SSL版本:</span></p><p class="code-label" title="/etc/apache2/sites-available/000-default.conf"><span>/etc/Apache 2/sites-available/000-default . conf</span></p><pre><code class="language-bash"><span>&lt;VirtualHost *:80&gt;          . . .            Redirect "/" "https://your_domain_or_IP/"            . . .  &lt;/VirtualHost&gt;</span></code></pre><p>完成后，您可以保存并关闭文件。</p><p>这是您需要对Apache进行的所有配置更改。接下来，您将讨论如何使用<strong> ufw </strong>更新防火墙规则，以允许加密的HTTPS流量进入您的服务器。</p><p> </p><p> </p><h3 id="step-3-—-adjusting-the-firewall"><span class="ez-toc-section" id="3-_How_To_Adjust_the_Firewall"/> <span> 3-如何调整防火墙</span> <span class="ez-toc-section-end"/></h3><p><span>由于我们要求您在先决条件中启用<strong> ufw </strong>防火墙，您可能需要调整设置以允许SSL流量。幸运的是，当安装在Debian 10上时，<strong> ufw </strong>会加载应用配置文件，你可以用它来调整你的防火墙设置。</span></p><p><span>要查看可用的概要文件，请使用以下命令:</span></p><pre><code class="language-bash"><span>sudo ufw app list</span></code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash"><span>Available applications:  . . .    WWW    WWW Cache    WWW Full    WWW Secure  . . .</span></code></pre><p>键入以下命令查看当前设置。</p><pre><code class="language-bash"><span>sudo ufw status</span></code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash"><span>Status: active    To                         Action      From  --                         ------      ----  OpenSSH                    ALLOW       Anywhere  WWW                        ALLOW       Anywhere  OpenSSH (v6)               ALLOW       Anywhere (v6)  WWW (v6)</span></code></pre><p><span>要额外引入HTTPS流量，允许“WWW Full”配置文件，然后删除多余的“WWW”配置文件余量:</span></p><pre><code class="language-bash"><span>sudo ufw allow 'WWW Full'  sudo ufw delete allow 'WWW'</span></code></pre><p><span>你现在的状态应该是这样的:</span></p><pre><code class="language-bash"><span>sudo ufw status</span></code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash"><span>Status: active    To                         Action      From  --                         ------      ----  OpenSSH                    ALLOW       Anywhere  WWW Full                   ALLOW       Anywhere  OpenSSH (v6)               ALLOW       Anywhere (v6)  WWW Full (v6)              ALLOW       Anywhere (v6)</span></code></pre><p>将防火墙配置为允许HTTPS流量后，您可以进入下一步，了解如何启用一些模块和配置文件来允许SSL正常工作。</p><p><span> </span></p><h3/><p> </p><h3 id="step-4-—-enabling-the-changes-in-apache"><span class="ez-toc-section" id="4-_How_To_Enable_the_Changes_in_Apache"/> <span> 4-如何启用阿帕奇</span>中的变化<span class="ez-toc-section-end"/></h3><p>在这一步，您可以在Apache中启用SSL和headers模块，启用我们的SSL就绪虚拟主机，然后重启Apache以使这些更改生效，因为您已经做出了更改并调整了我们的防火墙。</p><p><span>所以让我们用<strong> a2enmod </strong>命令:</span>启用<strong> mod_ssl </strong>，Apache ssl模块和<strong> mod_headers </strong>，这是我们的SSL片段中的一些设置所需要的</p><pre><code class="language-bash"><span>sudo a2enmod ssl  sudo a2enmod headers</span></code></pre><p><span>并键入下面的命令来启用带有<strong>a2 en site</strong>T3】的SSL虚拟主机</span></p><pre><code class="language-bash"><span>sudo a2ensite default-ssl</span></code></pre><p><span>您还需要启用您的<strong> ssl-params.conf </strong>文件，以读取您已经设置的值:</span></p><pre><code class="language-bash"><span>sudo a2enconf ssl-params</span></code></pre><p>由此，站点和必要的模块被启用。此外，您应该检查以确保我们的文件中没有语法错误。通过键入:来完成此操作</p><pre><code class="language-bash"><span>sudo apache2ctl configtest</span></code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash"><span>Syntax OK</span></code></pre><p><span>只要您的输出中有<strong>语法OK </strong>，那么您的配置文件就没有语法错误，您可以安全地重启Apache来实现更改:</span></p><pre><code class="language-bash"><span>sudo systemctl restart apache2</span></code></pre><p>至此，您的自签名SSL证书已经设置完毕。现在，您可以测试您的服务器是否正确地加密了流量。</p><p> </p><p> </p><h3 id="step-5-—-testing-encryption"><span class="ez-toc-section" id="5-_How_To_Test_Encryption"/> <span> 5-如何测试加密</span> <span class="ez-toc-section-end"/></h3><p>至此，您已经准备好测试您的SSL服务器了。</p><p><span>打开网络浏览器，在地址栏中输入<strong> https:// </strong>，然后输入服务器的域名或IP:</span></p><pre><code class="language-bash"><span>https://server_domain_or_IP</span></code></pre><p><span>因为您创建的证书不是由您的浏览器的可信证书颁发机构签名的，您可能会看到一个看起来很吓人的警告，如下所示:</span></p><p><span><img data-lazyloaded="1" src="../Images/f23779026fb68560fed860bca39013b7.png" decoding="async" loading="lazy" class="aligncenter wp-image-11121 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/self_signed_warning-1.jpg" alt="self signed warning page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/self_signed_warning-1.jpg 638w, https://blog.eldernode.com/wp-content/uploads/2020/08/self_signed_warning-1-300x180.jpg 300w" data-sizes="(max-width: 638px) 100vw, 638px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/self_signed_warning-1.jpg"/>T2】</span></p><p><span>但是要知道，这是非常意料之中的，也是正常的。您只对我们证书的加密方面感兴趣，对我们主机真实性的第三方验证不感兴趣。点击<strong>高级</strong>，然后点击提供的链接继续访问您的主机:</span></p><p><span><img data-lazyloaded="1" src="../Images/39169a66d2aa200394dc5de5f4a7d825.png" decoding="async" loading="lazy" class="aligncenter wp-image-11120 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/warning_override-1.jpg" alt="warning override page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/warning_override-1.jpg 641w, https://blog.eldernode.com/wp-content/uploads/2020/08/warning_override-1-300x254.jpg 300w" data-sizes="(max-width: 641px) 100vw, 641px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/warning_override-1.jpg"/>T2】</span></p><p><span>检查被带到您的站点。如果你查看浏览器的地址栏，你会看到一个锁，上面有一个“x”或另一个类似的“不安全”的通知。在这种情况下，这仅仅意味着证书不能被验证。它仍在加密您的连接。</span></p><p><span>如果您配置了<strong> Apache </strong>将HTTP重定向到HTTPS，您还可以检查重定向功能是否正常:</span></p><pre><code class="language-bash"><span>http://server_domain_or_IP</span></code></pre><p>通过在同一个图标中接收这些结果，您的重定向工作正常。但是，您之前创建的重定向只是一个临时重定向。如果您想永久重定向到HTTPS，请继续执行最后一步。</p><h3/><p> </p><h3><span class="ez-toc-section" id="6-_How_To_Change_to_a_Permanent_Redirect"/> <span> 6-如何改成永久重定向</span> <span class="ez-toc-section-end"/></h3><p><span>一旦您确保重定向正常工作，并且确定只允许加密流量，请再次修改未加密的Apache虚拟主机，使重定向永久有效。</span></p><p><span>再次打开您的服务器块配置文件:</span></p><pre><code class="language-bash"><span>sudo nano /etc/apache2/sites-available/000-default.conf</span></code></pre><p>现在，找到我们之前添加的<strong>重定向</strong>行。将<strong>永久</strong>添加到该行，这将重定向从302临时重定向更改为301永久重定向:</p><p class="code-label" title="/etc/apache2/sites-available/000-default.conf"><span>/etc/Apache 2/sites-available/000-default . conf</span></p><pre><code class="language-bash"><span>&lt;VirtualHost *:80&gt;          . . .            Redirect permanent "/" "https://your_domain_or_IP/"            . . .  &lt;/VirtualHost&gt;</span></code></pre><p>现在，您可以保存并关闭文件。</p><p><span>使用以下命令检查您的配置是否有语法错误:</span></p><pre><code class="language-bash"><span>sudo apache2ctl configtest</span></code></pre><p><span>如果这个命令没有报告任何语法错误，您可以重新启动Apache: </span></p><pre><code class="language-bash"><span>sudo systemctl restart apache2</span></code></pre><p>通过这种方式，你可以使重定向永久化，你的网站将只服务于HTTPS的流量。</p><p> </p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您<span>学习了如何在Debian 10中为Apache创建自签名SSL证书。当然，您已经将Apache服务器配置为对客户端连接使用强加密。这将允许您安全地服务请求，并防止外部方读取您的流量。如果你有兴趣了解更多关于这个主题的内容，请阅读我们的相关文章</span> <a href="https://blog.eldernode.com/install-ssl-on-iis-web-server/" target="_blank" rel="noopener noreferrer">教程在IIS Web服务器上安装SSL证书</a>和<a href="https://blog.eldernode.com/install-apache-web-server-debian/" target="_blank" rel="noopener noreferrer">如何在Debian 10上安装Apache Web服务器</a>。</p></div></div>    
</body>
</html>