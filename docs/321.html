<html>
<head>
<title>How to install Ansible on Ubuntu 20.04 - Ansible configurtion on Ubuntu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.04上安装Ansible-在Ubuntu上安装ansi ble配置</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-ansible-on-ubuntu-20/#0001-01-01">https://blog.eldernode.com/install-ansible-on-ubuntu-20/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/d29e554391a5a55975cddfa71a03a51a.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install Ansible on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2272.png"/><p>作为管理员或运营团队，你需要选择配置管理系统，在这篇文章中你将学习<strong>如何在Ubuntu 20.04 </strong>上安装Ansible。这些系统旨在简化控制大量服务器的流程。它们还允许您从一个中心位置自动控制许多不同的系统。在流行的配置管理工具之间，如Chef和Puppet，<a href="https://www.ansible.com/" target="_blank" rel="noopener noreferrer"> Ansible </a>通过提供一个架构，是一个很好的选择，它不需要在节点上安装特殊的软件，使用SSH来执行自动化任务，使用YAML文件来定义配置细节。</p><p> </p><div id="tw-target-rmn-container" class="tw-ta-container hide-focus-ring tw-nfl"><p id="prerequisites"><strong>先决条件</strong></p><p>如果您知道以下内容，本教程可能会更有用:</p></div><p> </p><h2><span class="ez-toc-section" id="How_to_install_Ansible_on_Ubuntu_2004"/> <span>如何在Ubuntu 20.04上安装ansi ble</span>T3】</h2><h3><span class="ez-toc-section" id="1-_Installing_Ansible"/> <span> 1- </span>安装Ansible <span class="ez-toc-section-end"/></h3><p>要安装Ansible，首先，刷新您系统的软件包索引</p><pre><code class="language-bash">sudo apt update  </code></pre><p>更新后，安装Ansible软件</p><pre><code class="language-bash">sudo apt install ansible  </code></pre><p>如果出现提示，按<span> Y <span>确认安装。</span> </span>为了管理您的主机，Ansible控制节点现在已经安装了所有必需的软件。</p><p> </p><h3><span class="ez-toc-section" id="2-_Set_up_the_inventory_File"/> <span> 2- </span>建立库存档案<span class="ez-toc-section-end"/></h3><p>您将能够使用Ansible管理有关主机的信息，该信息在清单文件中提供。此外，您可以将主机组织成组和子组。清单文件能够包含一到数百台服务器，并设置变量，这些变量仅在用于行动手册和模板时对特定主机或组有效。一些变量如<span>ansi ble _ python _ interpreter<span>可能会影响剧本的运行方式。</span>T3】</span></p><p> </p><p>打开<span> /etc/ansible/hosts <span>文件</span> <span>在您的ansible控制节点</span> </span>上，通过您的文本编辑器编辑您的默认Ansible库存的内容</p><p>下面的例子定义了一个名为<span>【服务器】</span>的组，其中有三个不同的服务器，每个服务器都有一个自定义别名:<strong>服务器1 </strong>、<strong>服务器2 </strong>和<strong>服务器</strong>。Ansible安装提供的默认清单文件包含许多示例，您可以使用这些示例作为设置清单的参考。当您运行该命令时，请确保将突出显示的IP替换为您的主机的IP地址。</p><pre><code class="language-bash">[servers]  server1 ansible_host=<span>1.1.1.1</span>  server2 ansible_host=<span>1.1.1.2</span>  server3 ansible_host=<span>1.1.1.3  </span>  [all:vars]  ansible_python_interpreter=/usr/bin/python3    </code></pre><p>按下<span> CTRL+X </span>保存并关闭文件，然后按下<span> Y </span>和<span> ENTER </span>确认您的更改。如果您想检查您的库存，运行以下命令。</p><pre><code class="language-bash">ansible-inventory --list -y  </code></pre><p>输出应该如下所示。</p><p title="Output"><span>输出</span></p><pre><code class="language-bash">all:    children:      servers:        hosts:          server1:            ansible_host: <span>1.1.1.1</span>            ansible_python_interpreter: /usr/bin/python3          server2:            ansible_host: <span>1.1.1.2</span>            ansible_python_interpreter: /usr/bin/python3          server3:            ansible_host: <span>1.1.1.3</span>            ansible_python_interpreter: /usr/bin/python3      ungrouped: {}</code></pre><p><span> <a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener noreferrer">购买Linux虚拟私有服务器</a> </span></p><p> </p><p><span class="ez-toc-section" id="3-_Testing_Connection"/> <span> 3- </span>测试连接<span class="ez-toc-section-end"/></p><h3>是时候检查Ansible是否能够通过SSH连接到这些服务器并运行命令了。由于Ubuntu <strong> root </strong>帐户通常是新创建的服务器上默认可用的唯一帐户，所以在这个过程中使用它。但是如果您的Ansible主机已经创建了一个常规的sudo用户，那么我们鼓励您使用这个帐户。要指定远程系统用户，请使用<span> -u </span>参数。如果没有提供，Ansible将尝试在控制节点上作为您的当前系统用户进行连接。</h3><p>从您的本地计算机或Ansible控制节点，您可以运行:</p><p>上面的命令将使用Ansible的内置<span> ping </span>模块在默认清单中的所有节点上运行连通性测试，以<strong> root </strong>身份连接。<span> ping </span>模块将测试:</p><pre><code class="language-bash">ansible all -m ping -u <span>root  </span></code></pre><p>1.主机是否能够使用Python运行Ansible模块。</p><p>2.你是否有有效的SSH凭证。</p><p>3.主机是否可访问。</p><p>然后，输出应该显示如下:</p><p><span>输出</span></p><p title="Output">如果您是第一次通过SSH连接到这些服务器，您应该确认您通过Ansible连接到的主机的真实性。当询问您时，键入<span> yes </span>然后<span>输入</span>确认。当你从主机得到一个<span> pong </span>回复时，你可以在那个服务器上运行Ansible命令和剧本。</p><pre><code class="language-bash">server1 | SUCCESS =&gt; {      "changed": false,       "ping": "pong"  }  server2 | SUCCESS =&gt; {      "changed": false,       "ping": "pong"  }  server3 | SUCCESS =&gt; {      "changed": false,       "ping": "pong"  }</code></pre><p> </p><p><span class="ez-toc-section" id="_4-_Running_Ad-Hoc_Commands"/> <span> 4- </span>运行临时命令<span class="ez-toc-section-end"/></p><h3 id="step-4-—-running-ad-hoc-commands-optional">当您的ansible控制节点能够与您的主机通信时，开始在您的服务器上运行临时命令和行动手册。让我们看一个例子，您可以使用以下命令检查所有服务器上的磁盘使用情况:</h3><p><span>输出</span></p><pre><code class="language-bash">ansible all -a "<span>df -h</span>" -u <span>root</span></code></pre><p title="Output">您可以用突出显示的命令<span> df -h. </span>替换您喜欢的命令。为了测试连接，您可以通过特别命令执行Ansible模块。例如，您可以使用<span> apt </span>模块在清单中的所有服务器上安装最新版本的vim:</p><pre><code class="language-bash">server1 | CHANGED | rc=0 &gt;&gt;  Filesystem      Size  Used Avail Use% Mounted on  udev            3.9G     0  3.9G   0% /dev  tmpfs           798M  624K  798M   1% /run  /dev/vda1       159G  2.3G  157G   2% /  tmpfs           3.9G     0  3.9G   0% /dev/shm  tmpfs           5.0M     0  5.0M   0% /run/lock  tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup  /dev/vda15      105M  3.6M  101M   4% /boot/efi  tmpfs           768M     0  768M   0% /run/user/0    server2 | CHANGED | rc=0 &gt;&gt;  Filesystem      Size  Used Avail Use% Mounted on  udev            2.0G     0  2.0G   0% /dev  tmpfs           395M  608K  394M   1% /run  /dev/vda1        88G  2.2G   86G   3% /  tmpfs           2.0G     0  2.0G   0% /dev/shm  tmpfs           5.0M     0  5.0M   0% /run/lock  tmpfs           1.0G     0  1.0G   0% /sys/fs/cgroup  /dev/vda15      115M  3.6M  111M   4% /boot/efi  tmpfs           375M     0  375M   0% /run/user/0    ...</code></pre><p>运行Ansible命令时，您还可以将单个主机以及组和子组作为目标。检查服务器组中主机的<span>正常运行时间</span>。</p><pre><code class="language-bash">ansible all -m <span>apt</span> -a "name=<span>vim</span> state=latest" -u <span>root  </span></code></pre><p>通过用冒号分隔来指定多个主机:</p><pre><code class="language-bash"/></pre><pre><code class="language-bash">ansible <span>servers</span> -a "<span>uptime</span>" -u <span>root  </span></code></pre><pre><code class="language-bash"/></pre><p> </p><pre><code class="language-bash"/></pre><pre><code class="language-bash">ansible <span>server1</span>:<span>server2</span> -m ping -u <span>root  </span></code></pre><pre><code class="language-bash"/></pre><p>亲爱的用户，我们希望这篇关于如何在Ubuntu 20.04上安装Ansible的教程能对你有所帮助，如果你有任何问题或者想查看我们用户关于这篇文章的对话，请访问<a href="https://eldernode.com/ask" target="_blank" rel="noopener noreferrer">提问页面</a>。也为了提高你的知识，有这么多有用的教程为<a href="https://eldernode.com/blog/" target="_blank" rel="noopener noreferrer">老年节点培训</a>准备。</p><p> </p><p><span> <strong>亦作，见</strong> </span></p><p><span> <a href="https://eldernode.com/initial-server-set-up-on-ubuntu-20-04-lts/" target="_blank" rel="noopener noreferrer">在Ubuntu 20.04上设置的初始服务器</a> </span></p><p class="fjpost-title px-0"><span> <a href="https://eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener noreferrer">教程linux上连接ssh</a></span></p><p class="fjpost-title px-0"><span><a href="https://eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener noreferrer">Tutorial connect to ssh on linux</a></span></p><p class="fjpost-info"/><p class="fjpost-info"/></div></div>    
</body>
</html>