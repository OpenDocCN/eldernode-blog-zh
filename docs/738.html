<html>
<head>
<title>How To Resize Active Root Partition On CentOS - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在CentOS - Eldernode博客上调整活动根分区的大小</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/resize-active-root-partition-on-centos/#0001-01-01">https://blog.eldernode.com/resize-active-root-partition-on-centos/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/d3bfff79fdedba11d471d4a1f00ebddd.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How To Resize Active Root Partition On CentOS" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/04/How-To-Resize-Active-Root-Partition-On-CentOS7-8.png"/><p>在CentOS安装过程中，您需要对磁盘空间进行分区和分配。因为“主分区”总是在你安装Linux发行版时创建的，很明显你会有一个主目录，它也可以创建在一个单独的分区上。/home目录是存储您的个人数据(如下载的文件、设置和系统定制)的地方。但是，如果不创建单独的/home分区，您的/home目录将位于您的根分区上。过了一会儿，你可能会意识到你家的分区已经被占满了，你需要重新调整它的大小。在这种情况下，您需要收缩根分区，以便为主分区分配更多的可用空间。加入我们这篇文章，了解如何在CentOS 上调整活动根分区的大小。在<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>上选择您深思熟虑的计划，购买您自己的<a href="https://eldernode.com/centos-vps/" target="_blank" rel="noopener"> CentOS VPS </a>。</p><h2><span class="ez-toc-section" id="Tutorial_Resize_Active_Root_Partition_On_CentOS"/> <strong>教程在CentOS上调整活动根分区大小</strong> <span class="ez-toc-section-end"/></h2><p>根分区的大小将根据您安装或计划安装的内容而有所不同。然而，2GB和8GB之间的根分区也可以。请注意，您为根目录创建的分区不同于作为系统管理员的“root”用户帐户。根文件系统由正斜杠(/)表示。它位于目录树的顶端，包含了<a href="https://blog.eldernode.com/tag/linux/" target="_blank" rel="noopener"> Linux </a>和你随Linux安装的所有东西。这大致相当于你在DOS或Windows下的“C:”驱动器。在接下来的内容中，您将了解更多关于分区的内容，以及如何在<a href="https://blog.eldernode.com/tag/centos/" target="_blank" rel="noopener"> CentOS </a>上调整活动根部分的大小。</p><h3><span class="ez-toc-section" id="Prerequisites_to_resize_active_root_Partition_on_CentOS"/> <strong>在CentOS上调整活动根分区大小的先决条件</strong> <span class="ez-toc-section-end"/></h3><p>要增加或减少分区的大小，你应该考虑一些基本要求。不能安装所需的分区。要调整根LVM分区的大小，您应该引导到救援模式，并且不能在线卸载根分区。</p><p>如果调整主分区(非lvm)的大小，可能会很危险。所以，不要忘记备份你的内容，你试图改变分区的大小。但是如果您在系统上配置了LVM，您就不需要担心文件系统的大小调整，因为LVM允许您在需要的时候调整文件系统的大小。</p><h2><span class="ez-toc-section" id="Resize_Active_Root_Partition_On_CentOS"/> <strong>在CentOS上调整活动根分区的大小</strong> <span class="ez-toc-section-end"/></h2><p>当您在计算机上安装Linux发行版时，您可以创建三个分区。<strong>根</strong>、<strong>家</strong>、<strong>互换</strong>。让我们通过本节的步骤来回顾调整根分区大小的必要步骤。首先，您需要在执行此操作之前备份重要数据。尽管所提供的解决方案是安全的，但您必须保留您的数据，以防出现故障，如停电或操作过程中系统重启。</p><p><em>第一步:</em></p><p>使用以下命令<strong>备份/home </strong>的内容:</p><pre><code class="language-bash">mkdir /temp</code></pre><pre><code class="language-bash">cp -a /home /temp/</code></pre><p><em>第二步:</em></p><p>备份过程成功完成后，<strong>通过运行以下命令卸载/home目录</strong>:</p><pre><code class="language-bash">umount -fl /home</code></pre><p><em>第三步:</em></p><p>因为您需要记录主LVM卷的大小，所以您可以运行lvs命令来显示LVM卷的属性:</p><pre><code class="language-bash">lvs</code></pre><p><strong> <em>注意</em> : </strong>你可以在上面命令的输出中看到“无法创建临时存档名”这一行。这是因为根分区已满。在根中清除一些空间来解决它。</p><p><em>第四步:</em></p><p>现在，您可以<strong>移除家庭LVM卷</strong>。因此，键入:</p><pre><code class="language-bash">lvremove /dev/cl/home</code></pre><p><em>第五步:</em></p><p>根据步骤3中的输出，您将能够扩展根LVM。在下面的命令中输入显示的home centos目录的数量。要<strong>调整根LVM卷</strong>的大小，运行:</p><pre><code class="language-bash">lvextend -L+**G /dev/cl/root</code></pre><p><em>第六步:</em></p><p>现在，您可以通过运行以下命令来调整根分区的大小:</p><pre><code class="language-bash">xfs_growfs /dev/mapper/cl-root</code></pre><p><em>第七步:</em></p><p>然后，使用下面的命令<strong>将/home内容</strong>复制回/home目录:</p><pre><code class="language-bash">cp -a /temp/home /</code></pre><p><em>第八步:</em></p><p>此时，您需要<strong>移除临时位置</strong>。因此，键入:</p><pre><code class="language-bash">rm -rf /temp</code></pre><p><em>第九步:</em></p><p>接下来，您应该<strong>从/etc/fstab </strong>中删除该条目。所以打开你最喜欢的文本编辑器，打开<strong> /etc/fstab </strong>，去掉<strong> /dev/mapper/cl-home </strong>这一行。</p><p><em>第十步:</em></p><p>在最后一步中，使用下面的命令<strong>将systemd up </strong>与更改同步:</p><pre><code class="language-bash">dracut --regenerate-all --force</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您了解了如何在CentOS上调整活动根分区的大小。建议您卸载活动分区以调整其大小，否则，您将面临丢失数据的风险。这个解决方案不限于根分区，您可以调整系统中任何可用分区的大小。此外，您还可以参考采用SSD和NVMe存储的<a href="https://blog.eldernode.com/partition-centos-8-with-ssd-and-nvme/" target="_blank" rel="noopener">分区CentOS</a>。如果收到意外错误，请在<a href="https://community.eldernode.com/" target="_blank" rel="noopener">老年节点社区</a>上通知我们和您的朋友，以帮助您解决问题。</p></div></div>    
</body>
</html>