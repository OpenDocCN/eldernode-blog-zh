<html>
<head>
<title>How to install and Configuring Cacti on Centos 8 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Centos 8 - Eldernode博客上安装和配置Cacti</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-and-configuring-cacti-on-centos-8/#0001-01-01">https://blog.eldernode.com/install-and-configuring-cacti-on-centos-8/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/2319011830683a733f41f93bb46abe53.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install and Configuring Cacti on Centos 8" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-install-and-Configuring-Cacti-on-Centos-8.png"/><p>了解如何在Centos 8 上安装和配置Cacti。使用网络监控软件的重要性和必要性是任何一个网络专家都无法隐瞒的。因为可以实时获知服务器、交换机、路由器，或者换句话说，所有网络设备的状态，如果出现问题，可以在最短的时间内解决。Cacti是一个基于web的开源工具，用于监控计算机网络。在本文中，我们试图向您介绍如何在Centos 8上安装和配置Cacti。你可以访问<a href="https://eldernode.com/"> Eldernode </a>提供的套装来购买<a href="https://eldernode.com/centos-vps/"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="Tutorial_install_and_Configuring_Cacti_on_Centos_8"/>教程在Centos 8上安装和配置Cacti<span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="What_are_the_characteristics_of_Cacti"/>仙人掌有什么特点？<span class="ez-toc-section-end"/></h3><p>Cacti软件使用<a href="https://blog.eldernode.com/install-and-configure-snmp-service/"> SNMP </a>协议连接到您的设备，并在您设置的时间间隔内检查它们。这款软件基于PHP/MySQL，主要安装在Linux操作系统上，使用RRDTool软件来呈现其图形。该软件还允许您向客户提供监控面板。在该软件中，您可以指定用户登录后可以访问哪些端口。以下是仙人掌的一些特征:</p><p><strong>–</strong>标准快速调查</p><p><strong>–</strong>支持多种数据采集方式</p><p><strong>–</strong>高级图形模式支持</p><p><strong>–</strong>使用ACL管理用户的能力</p><p><strong>–</strong>为管理网络监控和配置提供直观简单的web界面</p><h2><span class="ez-toc-section" id="Install_and_Configure_Cacti_on_Centos_8"/>在Centos 8上安装和配置Cacti<span class="ez-toc-section-end"/></h2><p>第一步登录后，必须先禁用<strong> SELinux </strong>。这是在使用以下命令打开SELinux文件后完成的:</p><pre><code class="language-bash">vim /etc/sysconfig/selinux</code></pre><p>在文件中找到SELINUX = enforcing后，将其替换为SELINUX = disabled。保存文件后，您可以使用以下命令重新启动系统:</p><pre><code class="language-bash">reboot</code></pre><p>第二步是安装<a href="https://blog.eldernode.com/how-fix-epel-repository-error-centos-7/"> EPEL </a>库。我们建议您到Fedora站点复制这个文件的最新版本，并在下面的命令中替换它。</p><pre><code class="language-bash">rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</code></pre><p>此外，通过参考<a href="http://rpms.remirepo.net/enterprise/"> Remi </a>站点，您可以复制最新版本的链接并将其放入以下命令中:</p><pre><code class="language-bash">wget http://rpms.famillecollet.com/enterprise/remi-release-8.rpm</code></pre><p>现在，您可以使用以下命令来安装存储库并列出它们:</p><pre><code class="language-bash">rpm -Uvh remi-release-7.rpm</code></pre><pre><code class="language-bash">yum repolist</code></pre><p>从现在开始，必须采取6个步骤来安装和配置cacti。这些步骤包括:</p><p><strong> 1。</strong>安装Apache</p><p><strong> 2。</strong>安装SNMP和RRDTool</p><p><strong> 3。</strong>安装<a href="https://blog.eldernode.com/whats-mariadb-how-it-works/"> MariaDB </a>服务器</p><p><strong> 4。</strong> PHP和需要的包</p><p><strong> 5。</strong>创建一个Cacti数据库</p><p><strong> 6。</strong>数据库优化</p><p>跟随我们在这篇文章中全面解释这6个步骤。</p><h3><span class="ez-toc-section" id="How_to_install_Apache"/>如何安装Apache <span class="ez-toc-section-end"/></h3><p>您可以使用以下命令安装Apache:</p><pre><code class="language-bash">yum install httpd httpd-devel</code></pre><p>您也可以通过键入并执行以下命令来启动该服务:</p><pre><code class="language-bash">systemctl start httpd</code></pre><h3><span class="ez-toc-section" id="How_to_install_SNMP_and_RRDTool"/>如何安装SNMP和RRDTool <span class="ez-toc-section-end"/></h3><p>要安装SNMP和RRDTool，只需键入并运行以下命令。然后会询问您是否要继续安装。您必须在此输入“<strong> Y </strong>”:</p><pre><code class="language-bash">yum install net-snmp net-snmp-utils net-snmp-libs rrdtool</code></pre><p>现在，您也可以使用以下命令开始运行SNMP:</p><pre><code class="language-bash">systemctl start snmpd</code></pre><h3><span class="ez-toc-section" id="How_to_install_MariaDB_Server"/>如何安装MariaDB服务器<span class="ez-toc-section-end"/></h3><p>安装MariaDB服务器是安装和配置cacti之前必须完成的步骤之一。为此，键入并执行以下命令:</p><pre><code class="language-bash">yum install mariadb-server</code></pre><p>输入以下命令启动MariaDB服务器:</p><pre><code class="language-bash">systemctl start mariadb</code></pre><p>要保护和完成MariaDB服务器安装，请键入以下命令:</p><pre><code class="language-bash">mysql_secure_installation</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/99ae2e14bd82a7506f58deaf2e37246a.png" decoding="async" loading="lazy" class="aligncenter wp-image-18854 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Secure-Installation-of-mariadb.jpg" alt="How to Secure Installation of mariadb" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Secure-Installation-of-mariadb.jpg 622w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Secure-Installation-of-mariadb-193x300.jpg 193w" data-sizes="(max-width: 622px) 100vw, 622px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Secure-Installation-of-mariadb.jpg"/></p><p> </p><h3><span class="ez-toc-section" id="PHP_installation_tutorial"/> PHP安装教程<span class="ez-toc-section-end"/></h3><p>您可以使用以下命令来安装PHP和所需的包:</p><pre><code class="language-bash">yum --enablerepo=remi install php-mysql php-pear php-common php-gd php-devel php php-mbstring php-cli php-intl php-snmp</code></pre><p>首先，使用以下命令登录到数据库服务器:</p><pre><code class="language-bash">mysql -u root -p</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/8ca5779f3e36782f8dcf8ee171e90872.png" decoding="async" loading="lazy" class="aligncenter wp-image-18856 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Login-to-MariaDB.jpg" alt="How to Login to MariaDB" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Login-to-MariaDB.jpg 625w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Login-to-MariaDB-300x90.jpg 300w" data-sizes="(max-width: 625px) 100vw, 625px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Login-to-MariaDB.jpg"/></p><p> </p><p>现在，您需要键入并执行以下命令来创建数据库:</p><pre><code class="language-bash">MariaDB [(none)]&gt; create database eldernodecacti;</code></pre><p>您还必须通过执行以下命令来创建用户:</p><pre><code class="language-bash">MariaDB [(none)]&gt; CREATE USER 'eldernodeuser'@'michael' IDENTIFIED BY '<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="591a6a6d6c3e1d2f3f2b19">[email protected]</a>#231';</code></pre><p>使用以下命令，您可以授予权限:</p><pre><code class="language-bash">MariaDB [(none)]&gt; grant all privileges on eldernodecacti.* to <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5530393130273b3a31302026302715383c363d343039">[email protected]</a>;</code></pre><p>您也可以使用以下命令刷新权限:</p><pre><code class="language-bash">MariaDB [(none)]&gt; FLUSH PRIVILEGES;</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/d93bf7398d852857572c6330e21239ae.png" decoding="async" loading="lazy" class="aligncenter wp-image-18858 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Create-DB-and-User-in-cacti.jpg" alt="how to Create DB and User in cacti" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Create-DB-and-User-in-cacti.jpg 723w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Create-DB-and-User-in-cacti-300x96.jpg 300w" data-sizes="(max-width: 723px) 100vw, 723px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Create-DB-and-User-in-cacti.jpg"/></p><p> </p><p>为了能够创建数据库用户，您必须首先能够访问<strong> mysql.time_zone_name </strong>。所以你要在mysql数据库中输入mysql_test_data_timezone.sql。为此，请使用以下命令:</p><pre><code class="language-bash">mysql -u root -p mysql &lt; /usr/share/mysql/mysql_test_data_timezone.sql</code></pre><p>现在，您需要使用以下命令登录到MariaDB:</p><pre><code class="language-bash">mysql -u root -p</code></pre><p>您必须使用以下命令允许cacti数据库用户访问:</p><pre><code class="language-bash">MariaDB [(none)]&gt; GRANT SELECT ON mysql.time_zone_name TO <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e580898180978b8a818090968097a5888c868d848089">[email protected]</a>;</code></pre><p>您也可以使用以下命令刷新权限:</p><pre><code class="language-bash">MariaDB [(none)]&gt; flush privileges;</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/411d4f96a8ff541cb6352e3437560f34.png" decoding="async" loading="lazy" class="wp-image-18860 size-full aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-set-Time-Zone-in-cacti.jpg" alt="How to set Time-Zone in cacti" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-set-Time-Zone-in-cacti.jpg 657w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-set-Time-Zone-in-cacti-300x58.jpg 300w" data-sizes="(max-width: 657px) 100vw, 657px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-set-Time-Zone-in-cacti.jpg"/></p><p> </p><h3><span class="ez-toc-section" id="Learn_how_to_Optimize_Database"/>了解如何优化数据库<span class="ez-toc-section-end"/></h3><p>在安装cacti之前，您需要做的最后一步是优化数据库。键入以下命令以优化参数:</p><pre><code class="language-bash">vim /etc/my.cnf.d/server.cnf</code></pre><p>现在，您需要在mysqld部分添加以下命令行:</p><pre><code class="language-bash">collation-server = utf8_general_ci  init-connect='SET NAMES utf8'  character-set-server = utf8  max_heap_table_size = 128M  max_allowed_packet = 16777216  tmp_table_size = 64M  join_buffer_size = 64M  innodb_file_per_table = on  innodb_buffer_pool_size = 512M  innodb_doublewrite = off  innodb_additional_mem_pool_size = 80M  innodb_lock_wait_timeout = 50  innodb_flush_log_at_trx_commit = 2</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/abfcee462ddefe383038a220e5be2116.png" decoding="async" loading="lazy" class="aligncenter wp-image-18861 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-modify-Database-Parameters-in-cacti.jpg" alt="how to modify Database Parameters in cacti" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-modify-Database-Parameters-in-cacti.jpg 598w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-modify-Database-Parameters-in-cacti-264x300.jpg 264w" data-sizes="(max-width: 598px) 100vw, 598px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-modify-Database-Parameters-in-cacti.jpg"/></p><p> </p><p>执行上述步骤后，您可以借助以下命令重新启动MariaDB服务:</p><pre><code class="language-bash">systemctl restart mariadb.service</code></pre><h2><span class="ez-toc-section" id="How_to_install_and_Configuring_Cacti_on_Centos_8"/>如何在Centos 8上安装和配置Cacti<span class="ez-toc-section-end"/></h2><p>在准备和安装所有先决条件之后，现在是使用以下命令安装cacti的时候了:</p><pre><code class="language-bash">yum -y install cacti</code></pre><p>然后，通过键入以下命令，您可以将cacti数据库文件导入到创建的数据库中:</p><pre><code class="language-bash">cd /usr/share/doc/cacti-1.1.38</code></pre><p>现在您需要将SQL文件导入其中:</p><pre><code class="language-bash">mysql -u root -p eldernodecacti &lt; cacti.sql</code></pre><p>应该注意，Cacti配置文件包含数据库、密码细节等等。您可以通过输入以下命令轻松编辑它:</p><pre><code class="language-bash">vim /usr/share/cacti/include/config.php</code></pre><p>现在，您需要像以下命令一样编辑数据库详细信息:</p><p>$ database _ type = ' mysql<br/>$ database _ default = ' eldernodecacti '；<br/>$ database _ hostname = ' Michael '；<br/>$ database _ username = ' eldernodeuser '；<br/> $database_password = ' <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d794e4e3e2b093a1b1a597">【邮件保护】</a># 231’；<br/>$ database _ port = ' 3306 '；<br/>$ database _ SSL = false；</p><p>下一步是在cacti中设置cron，您必须首先使用以下命令打开它:</p><pre><code class="language-bash">vim /etc/cron.d/cacti</code></pre><p>然后，您必须取消对下面一行的注释，并<strong>保存</strong>该文件:</p><pre><code class="language-bash">*/5 * * * * apache /usr/bin/php /usr/share/cacti/poller.php &gt; /dev/null 2&gt;&amp;1</code></pre><p>另一个重要步骤是在cacti中配置Apache，您必须首先用以下命令打开配置文件:</p><pre><code class="language-bash">vim /etc/httpd/conf.d/cacti.conf</code></pre><p>打开配置文件后，现在需要将“<strong>要求主机localhost </strong>”改为“<strong>要求全部授予</strong>”,<strong>允许从localhost </strong>”改为“<strong>允许从全部</strong>”。</p><p> </p><p><img data-lazyloaded="1" src="../Images/2304f2545325521def30152e55dca255.png" decoding="async" loading="lazy" class="aligncenter wp-image-18863 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Configure-Cacti-Apache.jpg" alt="How to Configure Cacti Apache" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Configure-Cacti-Apache.jpg 615w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Configure-Cacti-Apache-300x280.jpg 300w" data-sizes="(max-width: 615px) 100vw, 615px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-Configure-Cacti-Apache.jpg"/></p><p> </p><p>键入并运行以下命令来更改时区:</p><pre><code class="language-bash">vim /etc/php.ini</code></pre><p>您现在可以输入您的时区:</p><pre><code class="language-bash">date.timezone = your time Zone</code></pre><p>完成上述步骤后，您必须重新启动Apache、MariaDB和SNMP。要<strong>重启Apache </strong>，键入并运行以下命令:</p><pre><code class="language-bash">systemctl restart httpd.service</code></pre><p>您还必须运行以下命令来<strong>重启MariaDB </strong>:</p><pre><code class="language-bash">systemctl restart mariadb.service</code></pre><p>最后，为了<strong>重启SNMP </strong>，您必须运行以下命令:</p><pre><code class="language-bash">systemctl restart snmpd.service</code></pre><p>在安全性方面，配置防火墙是必要的。因此，您可以使用以下命令来配置防火墙:</p><pre><code class="language-bash">firewall-cmd --permanent --zone=public --add-service=http</code></pre><pre><code class="language-bash">firewall-cmd --reload</code></pre><h2><span class="ez-toc-section" id="How_to_start_Cacti_installation"/>如何开始安装仙人掌<span class="ez-toc-section-end"/></h2><p>现在已经到了最后一步，开始安装cacti。要访问Cacti web界面，请在浏览器中输入以下URL:</p><p>http://Your-Server-IP/cacti</p><p>在打开的页面中，勾选<strong>接受GPL许可协议</strong>，点击<strong>下一步</strong>。</p><p> </p><p><img data-lazyloaded="1" src="../Images/fc66e54d593ae00f86adeb0860e0f4ee.png" decoding="async" loading="lazy" class="aligncenter wp-image-18868 size-large" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Start-Cacti-installation-1024x330.jpg" alt="how to Start Cacti installation" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Start-Cacti-installation-1024x330.jpg 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Start-Cacti-installation-300x97.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Start-Cacti-installation-768x247.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Start-Cacti-installation.jpg 1078w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-Start-Cacti-installation-1024x330.jpg"/></p><p> </p><p>点击下一页的<strong>下一页</strong>。</p><p>下一个窗口指定安装类型以及数据库规格。再次点击<strong>下一个</strong>。</p><p>在下一页上，确认所需的选项。请注意，在继续之前，所有内容都必须正确无误。</p><p> </p><p><img data-lazyloaded="1" src="../Images/76df60a5f7e437bcff07d219b2356755.png" decoding="async" loading="lazy" class="aligncenter wp-image-18870 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-verify-Critical-Binary-Locations-and-Versions.jpg" alt="how to verify Critical Binary Locations and Versions" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-verify-Critical-Binary-Locations-and-Versions.jpg 537w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-verify-Critical-Binary-Locations-and-Versions-214x300.jpg 214w" data-sizes="(max-width: 537px) 100vw, 537px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-verify-Critical-Binary-Locations-and-Versions.jpg"/></p><p> </p><p>在其余页面中，点击<strong>下一页</strong>直到结束，最后点击<strong>完成</strong>。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>使用网络<a href="https://blog.eldernode.com/website-and-server-monitoring-tools/">监控</a>软件的重要性和必要性，任何一个网络高手都不会隐瞒。您可以实时了解服务器、交换机和路由器的状态，也就是所有网络设备的状态，如果出现问题，您可以在最短的时间内解决问题。这就是我们在本文中试图教您如何在Centos 8上安装和配置Cacti的原因。</p></div></div>    
</body>
</html>