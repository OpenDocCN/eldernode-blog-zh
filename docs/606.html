<html>
<head>
<title>Introducing And Install MySQL Governor On CPanel/WHM - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>介绍并在CPanel/WHM -埃尔德节点上安装MySQL Governor</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-mysql-governor-on-cpanel/#0001-01-01">https://blog.eldernode.com/install-mysql-governor-on-cpanel/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/917eda479ff24ee8ae9153ed68bc7a57.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Introducing and Install MySQL Governor on Cpanel-WHM" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/02/Introducing-and-Install-MySQL-Governor-on-Cpanel-WHM.png"/><p>MySQL Governor是一款软件，用于在共享托管环境中监控和限制MySQL的使用。Governor监控MySQL的使用和throttle滥用者，防止他们使服务器过载，从而提高整体稳定性和性能。它允许您自动检测和扼制滥用者，并保持您的服务器高性能。由于保持MySQL的稳定很困难，这可能是共享主机公司的一个问题。所以，MySQL Governor在这里发挥了它的作用。在本文中，您将学习<strong>在cPanel/WHM </strong>上介绍和安装MySQL Governor。您可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>中的可用包，并购买一台<a href="https://eldernode.com/vps-hosting/" target="_blank" rel="noopener"> VPS托管</a>服务器。</p><h2><span class="ez-toc-section" id="Introducing_MySQL_Governor_On_CPanelWHM"/> <strong>在CPanel上介绍MySQL Governor/WHM</strong>T3】</h2><h3><span class="ez-toc-section" id="What_is_MySQL_Governor"/> <strong>什么是MySQL总督？</strong>T3】</h3><p>MG (MySQL Governor)使用dbtop实用程序来查看每个客户的使用情况，并确保系统管理员了解发生的情况。dbtop tool是一个CL包，它可以让系统管理员查看每个系统用户在MySQL级别发生了什么，非常类似于经典的mytop Unix实用程序。MySQL Governor跟踪每个用户的系统使用情况，如果发现，它会限制MySQL查询。</p><h3><span class="ez-toc-section" id="MySQL_Governor_Features"/> <strong> MySQL调控器特性:</strong> <span class="ez-toc-section-end"/></h3><p>1-稳定、简单的限值被视为LVE限值的一部分。</p><p>2-自动检测和删除长时间运行的查询。</p><p>3- MySQL 5.1-5.7支持</p><p>4-支持MariaDB 5.x和10.x</p><p><em> <strong>注意</strong> : </em> MariaDB 10.4和10.5 <em>不被CPanel支持</em>。</p><h3><span class="ez-toc-section" id="MySQL_Governor_Multiple_Modes"/> <strong> MySQL调速器多种模式</strong> <span class="ez-toc-section-end"/></h3><p>根据配置的不同，MySQL Governor有多种操作模式:</p><p>在仅监控模式下工作，使用不同的节流方案。将所有达到限制的用户放入一个预定义的LVE中。</p><p><em> <strong>注意:</strong> </em>将MySQL查询放入用户的LVE，或者仅当达到MySQL调控器限制时将用户放入其LVE，这是默认的操作模式。</p><h2><span class="ez-toc-section" id="How_to_Install_MySQL_Governor_On_CPanel"/> <strong>如何在CPanel上安装MySQL调速器</strong> <span class="ez-toc-section-end"/></h2><p>你可以安装MySQL Governor，因为它与<a href="https://blog.eldernode.com/tag/cpanel/" target="_blank" rel="noopener"> cPanle </a>、<a href="https://blog.eldernode.com/tag/directadmin/" target="_blank" rel="noopener"> DirectAdmin </a>、<a href="https://blog.eldernode.com/tag/plesk/" target="_blank" rel="noopener"> Plesk </a>、ISPManager、InterWorx兼容，甚至与没有控制面板的普通服务器兼容。这些说明应该适用于上述任何类型的服务器，它是在基于cPanel的机器上测试的。建议您在安装MySQL调控器之前创建一个完整的数据库备份，包括系统表。</p><p>要对所有MySQL数据库和用户权限进行完整备份，请运行:</p><pre><code class="language-bash">mysqldump --all-databases &gt; /root/all_databases.sql</code></pre><p>在开始安装MySQL Governor之前，您需要删除以前安装的软件包，如果您正在运行MySQL Server。</p><pre><code class="language-bash">yum remove db-governor db-governor-mysql</code></pre><h3><span class="ez-toc-section" id="Install_MySQL_Governor_on_cPanel_WHM"/> <strong>在cPanel / WHM </strong>上安装MySQL Governor<span class="ez-toc-section-end"/></h3><p>让我们通过这个指南的步骤来学习和完成它。</p><p>首先，要安装governor-mysql包，请运行以下命令:</p><pre><code class="language-bash">yum install governor-mysql -y</code></pre><p>然后，要完成安装，请运行以下python脚本:</p><pre><code class="language-bash">/usr/share/lve/dbgovernor/mysqlgovernor.py --install</code></pre><p>现在，如果您正在运行MariaDB，请改用以下命令:</p><pre><code class="language-bash">yum install governor-mysql</code></pre><p>接下来，当您运行下面的命令时，请确保将“mariadbXX”替换为您正在运行的正确的MariaDB版本。</p><p><i>例如:</i></p><p>1)对于MariaDB v5.5，55</p><p>2)对于MariaDB v10.0，100</p><p>3)对于MariaDB v10.1，101</p><p><em>点</em>:Maria db 10.4版本还不支持CloudLinux 6。</p><pre><code class="language-bash">/usr/share/lve/dbgovernor/db-select-mysql --mysql-version=mariadbXX</code></pre><pre><code class="language-bash">/usr/share/lve/dbgovernor/mysqlgovernor.py --install</code></pre><p>从现在开始，你的CloudLinux系统使用MySQL governor来监控和限制你的MySQL脚本滥用者。</p><h3><span class="ez-toc-section" id="How_to_Configure_MySQL_Governor_on_WHM"/> <strong>如何在WHM上配置MySQL调速器</strong> <span class="ez-toc-section-end"/></h3><p>MySQL调控器配置位于下面:</p><pre><code class="language-bash">/etc/container/mysql-governor.xml</code></pre><p>当您想要手动编辑其配置时，建议您使用官方的dbctl实用程序。当您看到一切正常时，重新启动系统服务以应用更改:</p><pre><code class="language-bash">service db_governor restart</code></pre><p>还可以使用dbctl或通过更改配置文件来指定操作模式。dbuser-map文件位于<em>/etc/container/dbuser-map</em>中。</p><p id="starting-and-stopping"><strong>启动和停止</strong></p><p>首先:</p><pre><code class="language-bash">service db_governor start</code></pre><p>要停止:</p><pre><code class="language-bash">service db_governor stop</code></pre><h3><span class="ez-toc-section" id="Uninstall_MySQL_Governor"/> <strong>卸载MySQL总督</strong> <span class="ez-toc-section-end"/></h3><p>使用以下命令删除MySQL调控器:</p><pre><code class="language-bash">/usr/share/lve/dbgovernor/mysqlgovernor.py --delete</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>本文向您介绍了在Cpanel/WHM上介绍和安装MySQL Governor。可以设置不同时间段(1.5秒或1.5分钟)的不同限值，例如电流、短、中和长。如果您有兴趣了解更多信息，请找到我们关于MySQL查询故障排除的文章<a href="https://blog.eldernode.com/mysql-queries-troubleshooting/">并在</a><a href="https://community.eldernode.com/"> Eldernode社区</a>与您的朋友讨论。</p></div></div>    
</body>
</html>