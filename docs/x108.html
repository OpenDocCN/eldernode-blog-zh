<html>
<head>
<title>Tutorial Install LogRotate On CentOS 7 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在CentOS 7 - Eldernode上安装LogRotate</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-logrotate-on-centos-7/#0001-01-01">https://blog.eldernode.com/install-logrotate-on-centos-7/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/33479edfa4b583b71d573e2f765250da.png" data-src="https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install LogRotate On CentOS 7" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2022/10/Tutorial-Install-LogRotate-On-CentOS-7.webp"/><p>日志文件是由服务或程序生成的文件，用于通知它们的性能，以便网络管理员或程序员进行监控。如果日志文件变得非常大，var/log/也可能变得非常大。在Linux中，有旋转日志文件的工具。最常用的旋转工具叫做LogRotate。这篇文章教你如何在CentOS 7上安装LogRotate。如果你打算购买一台<a href="https://eldernode.com/centos-vps/"> CentOS VPS </a>服务器，你可以查看<a href="https://eldernode.com/"> Eldernode </a>网站上提供的套装。</p><h2><span class="ez-toc-section" id="What_is_LogRotate"/> <strong>什么是LogRotate？</strong>T3】</h2><p>LogRotate是<a href="https://blog.eldernode.com/tag/linux/"> Linux </a>中的一项服务，通常每天运行一次，定义了归档日期的系统日志文件会被归档或删除。就功能而言，Logrotate可以完全控制用户或软件本身在Logrotate的配置文件中指定的所有日志文件。它允许您轻松管理生成大量日志文件的系统。该服务还允许日志文件的自动旋转、压缩、删除和邮寄。</p><h2><span class="ez-toc-section" id="Installing_LogRotate_on_CentOS_7"/> <strong>在CentOS 7上安装LogRotate</strong><span class="ez-toc-section-end"/></h2><p>在本节中，我们将解释在CentOS 7上安装LogRotate的过程。首先，使用以下命令更新系统软件包:</p><pre><code class="language-bash">yum update</code></pre><p>使用以下命令在CentOS 7上安装LogRotate:</p><pre><code class="language-bash">yum install logrotate</code></pre><p><strong> /etc/logrotate.conf </strong>配置文件表明，其他更具体的设置可以放在单独的<strong>中。<strong> /etc/logrotate.d </strong>内的conf </strong>文件。</p><p>如果下面一行存在且未被取消注释，将会发生这种情况:</p><pre><code class="language-bash">include /etc/logrotate.d</code></pre><h3><span class="ez-toc-section" id="Configuring_LogRotate_on_CentOS_7"/> <strong>在CentOS 7上配置log rotate</strong>T3】</h3><p>现在，您将了解如何在CentOS 7上配置LogRotate。</p><p>首先，您需要在<strong>/etc/log rotate . d/Apache 2 . conf</strong>中插入以下内容，并检查每一行以表明其用途:</p><pre><code class="language-bash">/var/log/apache2/* {      weekly      rotate 3      size 10M      compress      delaycompress  }</code></pre><p><em> <strong>注意:</strong> </em>你可能需要创建那个文件。</p><p>第一行中可用的块中的目录适用于<strong> /var/log/apache2 </strong>中的所有日志:</p><p><strong>–&gt;每周:</strong>这意味着该工具将尝试每周轮换日志。</p><p><strong>–&gt;旋转3: </strong>这意味着只有3个旋转的日志将被保留，最旧的文件将在第四次运行时被删除。</p><p><strong>–&gt;Size = 10M:</strong>将旋转的最小尺寸设置为10M。</p><p><strong>–&gt;delay compress/compress:</strong>过去，除了最近的日志之外，所有旋转的日志都应该被压缩。</p><p>您应该在配置文件后使用-d选项执行一次试运行。如果LogRotate现在实际运行，它会做以下事情:</p><pre><code class="language-bash">logrotate -d /etc/logrotate.d/apache2.conf</code></pre><p>您可以使用下面的命令在日志循环日期之后对日志进行重命名:</p><pre><code class="language-bash">dateext</code></pre><p>同样，使用以下命令<strong>防止旋转</strong>发生:</p><pre><code class="language-bash">notifempty</code></pre><p>可以使用<strong>/etc/log rotate . d/squid . conf</strong>来旋转<strong>/var/log/squid/access . log</strong>:</p><pre><code class="language-bash">squid.conf  /var/log/squid/access.log {      monthly      create 0644 root root      rotate 5      size=1M      dateext      dateformat -%d%m%Y      notifempty      mail <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4825293a21243126082d242c2d3a26272c2d662b2725">[email protected]</a>  }</code></pre><p>如果要在循环进行时运行自定义命令，应将该命令放在循环后指令和结束脚本指令之间。</p><p>就是这样！</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>LogRotate是Linux中最常用的旋转日志文件的工具。在本文中，我们向您介绍了如何在CentOS 7上安装和配置LogRotate。我希望这篇教程能帮助你在CentOS 7上安装和配置LogRotate。如果您有任何问题或建议，可以在评论区联系我们。</p></div></div>    
</body>
</html>