<html>
<head>
<title>A Few Steps to Install VMware PowerCLI Tools on macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在macOS上安装VMware PowerCLI工具的几个步骤</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-vmware-powercli-tools-on-macos/#0001-01-01">https://blog.eldernode.com/install-vmware-powercli-tools-on-macos/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/91141cb4efc19e7dd6f3ffdbc90a6c72.png" data-src="https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="A Few Steps to Install VMware PowerCLI Tools on macOS" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2023/02/A-Few-Steps-to-Install-VMware-PowerCLI-Tools-on-macOS.webp"/><p>如果您是VMware虚拟化管理员，您可能希望在Mac上安装VMware PowerCLI，以执行大多数vSphere管理任务或自动执行许多操作。本文将教您在macOS上安装VMware PowerCLI工具的几个步骤。我们提供经济型VPS服务器，是用户的最佳选择。如果你想<a href="https://eldernode.com/vps/">购买即时VPS </a>服务器，你可以访问Eldernode网站上提供的计划。</p><h2><span class="ez-toc-section" id="Tutorial_Setup_VMware_PowerCLI_Tools_on_macOS"/> <strong>教程在macOS上设置VMware PowerCLI工具</strong> <span class="ez-toc-section-end"/></h2><p>VMware PowerCLI是一个命令行和一组PowerShell模块，用于管理、监控和自动化VMware vSphere环境中的流程。PowerCLI的命令在Windows PowerShell环境中执行，这些命令称为cmdlets，但您也可以将其安装在您的<a href="https://blog.eldernode.com/tag/mac/"> Mac </a>上。这些命令是通过PowerShell APIs以编程方式调用的，VMware PowerCLI提供了700多个这样的命令。</p><h3><span class="ez-toc-section" id="Step_1_Installing_Homebrew_on_macOS"/> <strong>第一步:在macOS上安装自制软件</strong> <span class="ez-toc-section-end"/></h3><p>首先，你需要在macOS上安装Homebrew。家酿是一个软件包管理器，它允许你直接从命令行安装像PowerShell这样的软件包。如果您已经安装了它，请跳过这一步。</p><p>您可以使用以下命令<strong>下载自制软件</strong>:</p><pre><code class="language-bash">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</code></pre><p>使用以下命令验证您的安装:</p><pre><code class="language-bash">brew --version</code></pre><h3><span class="ez-toc-section" id="Step_2_Installing_PowerShell_on_macOS"/> <strong>第二步:在macOS上安装PowerShell</strong>T3】</h3><p>在这一步中，您将学习如何在macOS上安装PowerShell。如前所述，您将在上一步安装的家酿软件包的帮助下在macOS上安装PowerShell。</p><p>要使用自制软件安装PowerShell，只需运行以下命令:</p><pre><code class="language-bash">brew install --cask powershell</code></pre><p>您可以使用以下命令检查PowerShell安装:</p><pre><code class="language-bash">pwsh</code></pre><p>要获得较新版本的PowerShell，只需更新自制公式并升级PowerShell，如下所示:</p><pre><code class="language-bash">brew update  </code></pre><pre><code class="language-bash">brew upgrade powershell --cask</code></pre><h3><span class="ez-toc-section" id="Step_3_Installing_VMware_PowerCLI_Tools_on_macOS"/> <strong>第三步:在macOS上安装VMware PowerCLI工具</strong> <span class="ez-toc-section-end"/></h3><p>现在是时候在macOS上安装VMware PowerCLI工具了。</p><p>首先，<strong>在macOS上打开PowerShell </strong>，如下图:</p><pre><code class="language-bash">pwsh</code></pre><p>您可以通过在PowerShell中运行以下命令来<strong>安装所有PowerCLI模块</strong>:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Install-Module VMware.PowerCLI -Scope CurrentUser</code></pre><p>如果你得到一个关于从一个不受信任的库安装模块的警告，如下所示，只需按“<strong> Y </strong>或“<strong> A </strong>确认安装。</p><pre><code class="language-bash">Untrusted repository  You are installing the modules from an untrusted repository. If you trust this repository, change its InstallationPolicy value by running the Set-PSRepository cmdlet. Are you sure you want to  install the modules from 'PSGallery'?  [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is "N"): A</code></pre><p>模块会自动下载并保存在正确的文件夹中。您可以使用-Scope参数使PowerCLI模块对所有用户可用，如下所示:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Install-Module VMware.PowerCLI -Scope AllUsers</code></pre><p>使用下面的命令列出所有可用的模块:</p><pre><code class="language-bash">Get-Module -ListAvailable</code></pre><p>这些模块将存储在<strong> ~/中。macOS工作站上的本地/共享/powershell/Modules </strong>目录。要访问模块，请运行以下命令:</p><pre><code class="language-bash">ls ~/.local/share/powershell/Modules</code></pre><h3><span class="ez-toc-section" id="Step_4_Using_PowerCLI_on_macOS"/> <strong>第四步:在macOS上使用power CLI</strong><span class="ez-toc-section-end"/></h3><p>在此步骤中，我们将举例说明如何使用VMware vSphere cmdlets来自动管理vSphere环境。首先，输入以下命令以获取有关已安装的PowerCLI版本的详细信息:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Get-PowerCLIVersion</code></pre><p>您应该更新配置以忽略接受SSL连接的自签名证书。为此，请输入以下命令:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Set-PowerCLIConfiguration -InvalidCertificateAction Ignore</code></pre><h3><span class="ez-toc-section" id="Step_5_Connecting_to_the_Environment"/> <strong>第五步:连接环境</strong> <span class="ez-toc-section-end"/></h3><p>首先，使用下面的命令建立一个新连接:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Connect-VIServer -Server esxi01.example.com -Protocol https</code></pre><p>在CLI中传递用户名和密码以非交互方式连接:</p><pre><code class="language-bash">Connect-VIServer -Server &lt;ServerIP_or_Hostname&gt; -Protocol https -User &lt;Username&gt; -Password &lt;Password&gt;</code></pre><p>通过运行cmdlet检索可用的数据存储区，如下所示:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Get-Datastore</code></pre><p>若要搜索cmdlets命令，请在PowerCLI中使用regex，如下所示:</p><pre><code class="language-bash">PS /Users/eldernode&gt; Get-VICommand *switch</code></pre><p>就是这样！</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，我们一步一步地教您如何在macOS上安装VMware PowerCLI工具。我希望本教程对您有用，并能帮助您在macOS上安装VMware PowerCLI工具。如果你在安装过程中遇到任何问题，你可以在评论区联系我们。</p></div></div>    
</body>
</html>