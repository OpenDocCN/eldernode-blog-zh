<html>
<head>
<title>Installing Lighttpd with PHP, MariaDB, and free SSL on Debian 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Debian 10上安装带有PHP、MariaDB和免费SSL的Lighttpd</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/installing-lighttpd-debian-10/#0001-01-01">https://blog.eldernode.com/installing-lighttpd-debian-10/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/55e27cdd27354f5f6c32a08d6f0310f6.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Installing Lighttpd with PHP, MariaDB, and free SSL on Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/01/Tutorial-Installing-Lighttpd-with-PHP-MariaDB-and-free-SSL-on-Debian-10.png"/><p>Lighttpd(读作“lighty”)是一个开源、免费、高速的web服务器。Lighttpd针对速度关键型环境进行了优化。它安全、灵活，并且需要的内存少，这使得它在其他web服务器中很受欢迎。它的体积很小，只有1MB，CPU和RAM的使用率很低。使用Lighttpd，您可以使用FastCGI、SCGI和CGI接口托管用其他编程语言编写的web应用程序。Lighttpd受BSD许可，支持使用<a href="https://blog.eldernode.com/install-openssl-on-windows-server-2019/" target="_blank" rel="noopener"> OpenSSL </a>的TLS/SSL。加入我们的教程<strong>在Debian 10 </strong>上安装带有PHP、MariaDB和免费SSL的Lighttpd。要购买自己的<a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener"> Linux VPS </a>，查看<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>的完美包并购买一个。</p><h2><span class="ez-toc-section" id="How_to_Install_Lighttpd_with_PHP_MariaDB_and_free_SSL_on_Debian_10"/> <strong>如何在Debian 10 </strong> <span class="ez-toc-section-end"/>上用PHP、MariaDB、免费SSL安装Lighttpd</h2><p>为了让本教程更好地发挥作用，请考虑以下<strong>先决条件</strong>:</p><p>拥有sudo权限的非root用户。</p><p>要进行设置，请按照Debian 10 的<a href="https://blog.eldernode.com/initial-setup-with-debian-10/" target="_blank" rel="noopener">初始设置进行。</a></p><p>注意:在本指南中，域名假定为“example.com”。对于您的情况，请记住用您自己的域名替换所有填充名称和配置设置中的example.com。</p><h2><span class="ez-toc-section" id="Install_Lighttpd_with_PHP_MariaDB_and_free_SSL_on_Debian_10"/> <strong>在Debian 10 </strong> <span class="ez-toc-section-end"/>上安装带有PHP、MariaDB、免费SSL的Lighttpd</h2><p>如果您正在寻找解决服务器负载问题的解决方案，Lighttpd可能是一个理想的选择。它支持使用chroot和mod_rewrite。让我们从更新您的系统开始吧。使用下面的命令来完成此操作。完成后，重新启动服务器以使更改生效。</p><pre><code class="language-bash">apt-get update -y</code></pre><pre><code class="language-bash">apt-get upgrade -y</code></pre><h3><span class="ez-toc-section" id="How_to_install_Lighttpd"/> <strong>如何安装Lighttpd </strong> <span class="ez-toc-section-end"/></h3><p>因为Lighttpd在Debian 10默认存储库中可用，所以运行下面的命令来安装它。</p><pre><code class="language-bash">apt-get install lighttpd -y</code></pre><p>安装完成后，您可以启动Lighttpd服务。要使其能够在系统重新启动后启动，请键入:</p><pre><code class="language-bash">systemctl start lighttpd</code></pre><pre><code class="language-bash">systemctl enable lighttpd</code></pre><p>此外，您可以通过运行以下命令来检查Lighttpd的状态:</p><pre><code class="language-bash">systemctl status lighttpd</code></pre><h3><span class="ez-toc-section" id="How_to_install_MariaDB_server"/> <strong>如何安装MariaDB服务器</strong> <span class="ez-toc-section-end"/></h3><p>使用以下命令安装<a href="https://blog.eldernode.com/mariadb-installation-on-debian-10/" target="_blank" rel="noopener"> MariaDB </a>服务器。</p><pre><code class="language-bash">apt-get install mariadb-server mariadb-client -y</code></pre><p>您应该在完成安装后保护MariaDB。要保护它，请键入:</p><pre><code class="language-bash">mysql_secure_installation</code></pre><h3><span class="ez-toc-section" id="How_to_install_PHP_and_PHP-FPM"/> <strong>如何安装PHP和PHP-FPM </strong> <span class="ez-toc-section-end"/></h3><p>在这一步中，您将在您的系统中安装PHP、PHP-FPM和FastCGI。因为Debian 10默认自带PHP 7.3版本。使用以下命令安装:</p><pre><code class="language-bash">apt-get install php php-cgi php-fpm php-mysql -y</code></pre><p>确保安装了软件包后，编辑pho.ini文件，并通过运行以下命令将cgi.fix_pathinfo设置为1:</p><pre><code class="language-bash">nano /etc/php/7.3/fpm/php.ini</code></pre><p>然后，更改以下行:</p><pre><code class="language-bash">cgi.fix_pathinfo=1</code></pre><p>现在，您可以保存并关闭文件。</p><p>PHP默认指向UNIX socket/var/run/PHP/PHP 7.3-fpm . sock。此时，您应该配置PHP-FPM池来设置PHP监听TCP套接字。为此，请编辑/etc/PHP/7.3/fpm/pool . d/www . conf文件:</p><pre><code class="language-bash">nano /etc/php/7.3/fpm/pool.d/www.conf</code></pre><p>然后，找到下面一行:</p><pre><code class="language-bash">listen = /run/php/php7.3-fpm.sock</code></pre><p>现在，用下面一行替换它:</p><pre><code class="language-bash">listen = 127.0.0.1:9000</code></pre><p>一旦你完成了上述步骤，戴夫便关闭文件。要重新启动PHP-FPM服务以应用配置更改，请键入:</p><pre><code class="language-bash">systemctl restart php7.3-fpm</code></pre><p>现在，您可以使用下面的命令修改15-fastcgi-php.conf文件:</p><pre><code class="language-bash">nano /etc/lighttpd/conf-available/15-fastcgi-php.conf</code></pre><p>再次找到以下几行:</p><pre><code class="language-bash">"bin-path" =&gt; "/usr/bin/php-cgi",  "socket" =&gt; "/var/run/lighttpd/php.socket",</code></pre><p>用下面的替换它们:</p><pre><code class="language-bash">"host" =&gt; "127.0.0.1",  "port" =&gt; "9000",</code></pre><p>现在，当所有操作成功完成后，您可以保存并关闭文件。要启用FastCGI和FastCHI-PHP模块，请运行:</p><pre><code class="language-bash">lighty-enable-mod fastcgi  lighty-enable-mod fastcgi-php</code></pre><p>然后，要应用您所做的更改，请通过以下方式重新启动Lighttpd:</p><pre><code class="language-bash">systemctl restart lighttpd</code></pre><h3><span class="ez-toc-section" id="How_to_create_a_Lighttpd_Virtual_host"/> <strong>如何创建Lighttpd虚拟主机</strong> <span class="ez-toc-section-end"/></h3><p>要创建一个新的虚拟主机文件来用Lighttpd测试PHP，请键入:</p><pre><code class="language-bash">nano /etc/lighttpd/conf-available/example.com.conf</code></pre><p>并且，添加下面的行:</p><pre><code class="language-bash">$HTTP["host"] == "www.example.com" {  server.document-root = "/var/www/html/"  server.errorlog = "/var/log/lighttpd/example.com-error.log"  }</code></pre><p>现在，您可以保存并关闭文件。使用下面的命令启用虚拟主机。</p><pre><code class="language-bash">ln -s /etc/lighttpd/conf-available/example.com.conf /etc/lighttpd/conf-enabled/</code></pre><p>然后，使用下面的命令在Lighttpd文档根目录中创建一个示例index.php文件:</p><pre><code class="language-bash">nano /var/www/html/index.php</code></pre><p>添加以下一行:</p><pre><code class="language-bash">&lt;?php phpinfo(); ?&gt;</code></pre><p>保存并关闭文件。运行以下命令将Lighttpd文档根目录的所有权更改为www-data。</p><pre><code class="language-bash">chown -R www-data:www-data /var/www/html/</code></pre><p>最后，要重新启动Lighttpd服务，请键入以下命令。它将应用配置更改:</p><pre><code class="language-bash">systemctl restart lighttpd</code></pre><h3><span class="ez-toc-section" id="How_to_secure_Lighttpd_with_Lets_Encrypt_free_SSL"/> <strong>如何用Let's Encrypt免费SSL保护Lighttpd with】</strong></h3><p>要完成这一步，您需要首先安装Certbot工具，用Let's Encrypt来保护您的web服务器。由于Debian 10默认仓库中没有最新版本的Certbot，所以需要添加Certbot仓库。为此，请运行以下命令:</p><pre><code class="language-bash">apt-get install software-properties-common  add-apt-repository ppa:certbot/certbot</code></pre><p>然后，您应该更新存储库并安装Certbot。因此，键入:</p><pre><code class="language-bash">apt-get update -y  apt-get install certbot -y</code></pre><p>此时，您需要使用下面的命令创建一个加密证书:</p><pre><code class="language-bash">certbot certonly --webroot -w /var/www/html/ -d www.example.com</code></pre><p>接下来，您将被要求提供您的电子邮件地址并接受许可条款，如下所示:</p><pre><code class="language-bash">Saving debug log to /var/log/letsencrypt/letsencrypt.log  Plugins selected: Authenticator webroot, Installer None  Enter email address (used for urgent renewal and security notices) (Enter 'c' to  cancel): <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1c7d787175725c79647d716c7079327f7371">[email protected]</a></code></pre><pre><code class="language-bash">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  Please read the Terms of Service at  https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must  agree in order to register with the ACME server at  https://acme-v02.api.letsencrypt.org/directory  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  (A)gree/(C)ancel: A</code></pre><pre><code class="language-bash">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  Would you be willing to share your email address with the Electronic Frontier  Foundation, a founding partner of the Let's Encrypt project and the non-profit  organization that develops Certbot? We'd like to send you email about our work  encrypting the web, EFF news, campaigns, and ways to support digital freedom.  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  (Y)es/(N)o: Y</code></pre><p>接下来，当证书下载成功完成时，您将看到下面的输出。</p><pre><code class="language-bash">IMPORTANT NOTES:  - Congratulations! Your certificate and chain have been saved at:  /etc/letsencrypt/live/example.com/fullchain.pem  Your key file has been saved at:  /etc/letsencrypt/live/example.com/privkey.pem  Your cert will expire on 2019-12-06. To obtain a new or tweaked  version of this certificate in the future, simply run certbot  again. To non-interactively renew *all* of your certificates, run  "certbot renew"  - If you like Certbot, please consider supporting our work by:</code></pre><pre><code class="language-bash">Donating to ISRG / Let's Encrypt: https://letsencrypt.org/donate  Donating to EFF: https://eff.org/donate-le</code></pre><p>是时候将证书和私钥合并到一个文件中了。所以，运行:</p><pre><code class="language-bash">cat /etc/letsencrypt/live/example.com/cert.pem /etc/letsencrypt/live/example.com/privkey.pem &gt; /etc/letsencrypt/live/example.com/web.pem</code></pre><p>因为您需要编辑Lihghttpd虚拟主机文件并定义加密SSL证书路径。使用以下命令来完成此操作:</p><pre><code class="language-bash">nano /etc/lighttpd/conf-enabled/example.com.conf</code></pre><p>现在，完成后，您可以保存并关闭文件。同样，您应该重新启动Lighttpd服务来应用配置更改:</p><pre><code class="language-bash">systemctl restart lighttpd</code></pre><h3><span class="ez-toc-section" id="How_to_access_Lighttpd_web_interface"/> <strong>如何访问Lighttpd web界面</strong> <span class="ez-toc-section-end"/></h3><p>至此，Lighttpd已经安装并配置了PHP和PHP-FPM支持。所以，现在就来测试一下吧。打开你的网页浏览器，输入网址https://www.example.com。然后，您将被重定向到以下页面:</p><p><img data-lazyloaded="1" src="../Images/638ba676e94570a28fd0e2c1c3c80ca0.png" decoding="async" loading="lazy" class="size-full wp-image-22525 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/01/IMG_5422.jpg" alt="How to access Lighttpd web interface" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/01/IMG_5422.jpg 750w, https://blog.eldernode.com/wp-content/uploads/2021/01/IMG_5422-300x162.jpg 300w" data-sizes="(max-width: 750px) 100vw, 750px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/01/IMG_5422.jpg"/></p><p> </p><p>就是这样！通过这种方式，您可以确保PHP与FastCGI配合良好。</p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您阅读了在Debian 10上使用PHP、MariaDB和免费SSL安装Lighttpd的教程。如果你已经仔细阅读了本指南的步骤，现在你可以享受托管自己的web服务器了。</p></div></div>    
</body>
</html>