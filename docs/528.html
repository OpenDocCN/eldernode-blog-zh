<html>
<head>
<title>How to Install Opencart with Nginx and SSL on Debian 10 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Debian 10 - Eldernode上安装带Nginx和SSL的Opencart</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-opencart-with-nginx-and-ssl-on-debian/#0001-01-01">https://blog.eldernode.com/install-opencart-with-nginx-and-ssl-on-debian/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/4b55b82fe78df632366d53cd47e21d25.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Install Opencart with Nginx and SSL on Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/01/How-to-Install-Opencart-with-Nginx-and-SSL-on-Debian-10.png"/><p>OpenCart是一个专业的开源商店建设系统，它基于众多功能和应用程序以及用户友好的外观而设计。它还创建了一个完整和独特的在线商店，并可用于在线业务。这个商店建筑系统是当今在线商店中最流行的系统之一。OpenCart非常吸引人和用户友好的外观允许卖家创建一个完整和独特的在线商店，并将其用于他们的在线业务。OpenCart由于其惊人的特性而获得了如此多的人气和受欢迎程度，例如具有极其强大的SEO、各种功能模块和模板、多语言、支持各种本地和全球支付网关。在这篇文章中，我们试图向你学习如何在Debian 10 上安装带有Nginx和SSL的Opencart。如果你想买一个<a href="https://eldernode.com/vps/" target="_blank" rel="noopener"> VPS服务器</a>，你可以在<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>看到可用的包。</p><h2><span class="ez-toc-section" id="Tutorial_Install_Opencart_with_Nginx_and_SSL_on_Debian_10"/> <strong>教程在Debian 10上用Nginx和SSL安装open cart</strong>T3】</h2><p>要在Debian 10上安装带有<a href="https://blog.eldernode.com/install-nginx-debian-10/"> Nginx </a>和SSL的Opencart，需要按照本教程中的步骤操作。第一步，您必须使用以下命令更新系统。执行这些命令后，您必须重新启动系统一次。</p><pre><code class="language-bash">apt-get update -y</code></pre><pre><code class="language-bash">apt-get upgrade -y</code></pre><h3><span class="ez-toc-section" id="How_to_Install_LEMP_Server"/> <strong>如何安装LEMP服务器</strong> <span class="ez-toc-section-end"/></h3><p>更新并重启系统后，你现在必须<a href="https://blog.eldernode.com/install-lemp-debian-10/" target="_blank" rel="noopener">安装LEMP </a>服务器。首先，您需要使用以下命令安装Opencart的要求:</p><pre><code class="language-bash">apt-get install nginx mariadb-server php-common php-cli php-fpm php-opcache php-gd php-mysql php-curl php-intl php-xsl php-mbstring php-zip php-bcmath php-soap unzip git -y</code></pre><p>现在您需要打开一个文本编辑器，编辑<strong> php.ini </strong>文件。我们在这里使用nano编辑器。</p><pre><code class="language-bash">nano /etc/php/7.3/fpm/php.ini</code></pre><p>打开文件后，如下更改其变量并<strong>保存</strong>它。</p><pre><code class="language-bash">memory_limit = 256M  upload_max_filesize = 100M  opcache.save_comments=1  max_execution_time = 300  date.timezone = Europe/London</code></pre><h3><span class="ez-toc-section" id="Tutorial_Configure_MariaDB_Database"/> <strong>教程配置MariaDB数据库</strong> <span class="ez-toc-section-end"/></h3><p>需要注意的是，Debian 10中并没有设置<a href="https://blog.eldernode.com/mariadb-installation-on-ubuntu/"> MariaDB </a> root密码。因此，您必须在输入MariaDB之后，借助以下命令来完成此操作:</p><pre><code class="language-bash">mysql</code></pre><pre><code class="language-bash">MariaDB [(none)]&gt; SET PASSWORD FOR 'root'@'localhost' = PASSWORD("yournewrootpassword");</code></pre><p>设置密码后，现在应该将MariaDB身份验证插件设置为<strong> mysql_native_password </strong>。为此，请运行以下命令:</p><pre><code class="language-bash">MariaDB [(none)]&gt; SET GLOBAL innodb_fast_shutdown = 0;</code></pre><pre><code class="language-bash">MariaDB [(none)]&gt; UPDATE mysql.user SET plugin = 'mysql_native_password' WHERE User = 'root';</code></pre><p>您现在必须使用以下命令刷新权限:</p><pre><code class="language-bash">MariaDB [(none)]&gt; FLUSH PRIVILEGES;</code></pre><pre><code class="language-bash">MariaDB [(none)]&gt; EXIT;</code></pre><p>在下一步中，您可以使用以下命令输入MariaDB:</p><pre><code class="language-bash">mysql -u root -p</code></pre><p>成功完成上述步骤后，现在可以使用以下命令创建数据库和用户了:</p><pre><code class="language-bash">MariaDB [(none)]&gt; CREATE DATABASE opencartdb;</code></pre><pre><code class="language-bash">MariaDB [(none)]&gt; GRANT ALL ON opencartdb.* TO 'opencart'@'localhost' IDENTIFIED BY 'password';</code></pre><p>完成更改后，再次刷新权限:</p><pre><code class="language-bash">MariaDB [(none)]&gt; FLUSH PRIVILEGES;</code></pre><pre><code class="language-bash">MariaDB [(none)]&gt; EXIT;</code></pre><h3><span class="ez-toc-section" id="How_to_Download_OpenCart"/> <strong>如何下载OpenCart </strong> <span class="ez-toc-section-end"/></h3><p>使用以下命令下载OpenCart:</p><pre><code class="language-bash">wget https://github.com/opencart/opencart/releases/download/3.0.3.2/opencart-3.0.3.2.zip</code></pre><p>然后使用以下命令提取下载的文件:</p><pre><code class="language-bash">unzip opencart-3.0.3.2.zip</code></pre><p>下一步是通过运行以下命令转到<a href="https://blog.eldernode.com/secure-nginx-encrypt-debian-10/"> Nginx </a> web根目录:</p><pre><code class="language-bash">mv upload /var/www/html/opencart</code></pre><p>现在您需要将目录更改为opencart，并使用以下命令重命名<strong>config-dist.php</strong>文件:</p><pre><code class="language-bash">cd /var/www/html/opencart/</code></pre><pre><code class="language-bash">mv config-dist.php config.php</code></pre><pre><code class="language-bash">mv admin/config-dist.php admin/config.php</code></pre><p>最后，您需要为opencart列表提供必要的权限:</p><pre><code class="language-bash">chown -R www-data:www-data /var/www/html/opencart/</code></pre><pre><code class="language-bash">chmod -R 775 /var/www/html/opencart/</code></pre><p>下一步，我们将进入OpenCart的Nginx配置。请继续关注本文的其余部分。</p><h3><span class="ez-toc-section" id="Learn_how_to_Configure_Nginx_for_OpenCart"/> <strong>了解如何为OpenCart </strong>配置Nginx】</h3><p>在本教程的这一部分，我们将讨论用于OpenCart的Nginx配置步骤。您必须通过运行以下命令为OpenCart服务创建一个Nginx虚拟主机配置文件。使用nano编辑器打开<strong> opencart.conf </strong>文件。</p><pre><code class="language-bash">nano /etc/nginx/sites-available/opencart.conf</code></pre><p>将以下内容放入配置文件中:</p><pre><code class="language-bash">server {  listen 80;  server_name opencart.domain.com;  root /var/www/html/opencart;  index index.php;  access_log /var/log/nginx/opencart_access.log;  error_log /var/log/nginx/opencart_error.log;    location = /favicon.ico {  log_not_found off;  access_log off;  }    location = /robots.txt {  allow all;  log_not_found off;  access_log off;  }    location / {  try_files $uri $uri/ /index.php?$args;  }    location ~ \.php$ {  include snippets/fastcgi-php.conf;  fastcgi_pass unix:/run/php/php7.3-fpm.sock;  }    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {  expires max;  log_not_found off;  }    }</code></pre><p><strong>将内容插入配置文件后保存</strong>。现在你应该检查Nginx的<strong>语法错误</strong>:</p><p>nginx -t</p><p>请注意，上述命令的输出必须类似于以下命令:</p><pre><code class="language-bash">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</code></pre><pre><code class="language-bash">nginx: configuration file /etc/nginx/nginx.conf test is successful</code></pre><p>确保以上命令正确执行后，现在可以启用Nginx虚拟主机文件了:</p><pre><code class="language-bash">ln -s /etc/nginx/sites-available/opencart.conf /etc/nginx/sites-enabled/</code></pre><p>在这一步结束时，您必须使用以下命令重启<strong> Nginx </strong>和<strong> PHP-FPM </strong>:</p><pre><code class="language-bash">systemctl restart nginx</code></pre><pre><code class="language-bash">systemctl restart php7.3-fpm</code></pre><h3><span class="ez-toc-section" id="How_to_Secure_OpenCart_with_Lets_Encrypt_SSL"/>如何用加密SSL保护open cart<span class="ez-toc-section-end"/></h3><p>在这一步中，您需要安装<strong> Certbot客户端</strong>，以便在您的网站上安装Let's Encrypt。因此，您需要使用以下命令创建一个Certbot存储库:</p><pre><code class="language-bash">echo "deb http://ftp.debian.org/debian buster-backports main" &gt;&gt; /etc/apt/sources.list</code></pre><p>在下一步中，您必须使用第一个命令更新系统。您还必须使用第二个命令来安装Nginx的Certbot客户端:</p><pre><code class="language-bash">apt-get update -y</code></pre><pre><code class="language-bash">apt-get install python3-certbot-nginx -t buster-backports</code></pre><p>现在你需要下载让我们加密SSL。您还需要配置Nginx来使用SSL:</p><pre><code class="language-bash">certbot --nginx -d opencart.domain.com</code></pre><p>在下一步中，您需要提供有效的电子邮件地址。</p><p>在下面，你会遇到一个像下面这样的图像。在这一部分，您必须选择是否将HTTP流量定向到HTTPS。所以你必须选择“2”并按回车键来完成安装。</p><pre><code class="language-bash">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    1: No redirect - Make no further changes to the webserver configuration.    2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for  new sites, or if you're confident your site works on HTTPS. You can undo this  change by editing your web server's configuration.  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>Opencart是一个用于建立在线商店的开源内容管理系统。开源意味着你可以对它进行修改，使之个性化。Opencart非常适合任何想要开始小型互联网业务的人。在本文中，我们试图向您学习如何在Debian 10上安装带有Nginx和SSL的Opencart。</p></div></div>    
</body>
</html>