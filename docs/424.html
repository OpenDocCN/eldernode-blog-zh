<html>
<head>
<title>How to setup NTP server on Ubuntu 20.04 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.04 - Eldernode博客上设置NTP服务器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/setup-ntp-server-on-ubuntu-20-04/#0001-01-01">https://blog.eldernode.com/setup-ntp-server-on-ubuntu-20-04/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/fd6864ce700781e973b71a8912c70fe2.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to setup NTP server on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-setup-NTP-server-on-Ubuntu-20.04.png"/><p>逐步了解如何在Ubuntu 20.04 上设置NTP服务器。NTP服务器是一种用于多种客户端和服务器的多个网络时钟的同步协议。NTP服务器具有允许两个系统之间以一纳秒的精度进行同步的功能，因此这两个系统可以轻松地进行通信。系统时间不仅适用于用户，也适用于计算机本身。事实上，时间戳使两台或多台计算机之间的通信和正确提供网络服务变得很容易，并优化了网卡。创建NTP协议是为了防止两台或多台计算机之间由于不同的系统时间而可能发生的不幸事件。在这篇文章中，我们试图让你了解<strong>如何在Ubuntu 20.04 </strong>上设置NTP服务器。如果您需要购买<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener noreferrer"> Ubuntu VPS </a>服务器，请参见<a href="https://eldernode.com/" target="_blank" rel="noopener noreferrer"> Eldernode </a>中提供的软件包。</p><h2><span class="ez-toc-section" id="Tutorial_setup_NTP_server_on_Ubuntu_2004"/>教程在Ubuntu 20.04上设置NTP服务器<span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="What_is_the_NTP_protocol"/>什么是NTP协议？<span class="ez-toc-section-end"/></h3><p>NTP代表网络时间协议，是基于IP的网络中使用的最古老的协议之一。NTP协议是由特拉华大学的大卫·l·米尔斯于1985年开发的。使用这种协议，有可能同步和使用精确的时钟到计算机网络中的原子钟的水平。通常，在网络或连接到全球网络的任何系统中，通过连接到时间服务器，可以微调该网络的一个或多个系统的时钟。NTP使用通用同步时钟或协调世界时(UTC)来协调计算机时钟，UTC是一种原子时标准。</p><h3>NTP协议是如何工作的？<span class="ez-toc-section-end"/></h3><p>在最基本的情况下，NTP服务器由同步设备组成，如客户端和接收UTC时间并将其传递给客户端的NTP服务器。客户端和服务器通过一系列请求和响应进行通信，如下所示:</p><p><strong>–</strong>客户端向时间服务器发送NTP请求包，确认执行时间。(源开始时间)</p><p><strong>–</strong>服务器确认收到请求包的时间。</p><p><strong>–</strong>服务器再次向客户端发送响应包。</p><p><strong>–</strong>客户收到响应包时确认目的地时间。</p><p>这个过程可能只需要十亿分之一秒，但是时间戳允许客户端计算环岛中的延迟。它还检查其内部时间与服务器提供的时间之间的差异，并在必要时精确重置时钟。</p><p>在本文的剩余部分，加入我们来教你如何在Ubuntu 20.04上设置NTP服务器。</p><h2><span class="ez-toc-section" id="Setup_NTP_server_on_Ubuntu_2004"/>在Ubuntu 20.04上设置NTP服务器<span class="ez-toc-section-end"/></h2><p>要在<a href="https://blog.eldernode.com/tag/ubuntu/" target="_blank" rel="noopener noreferrer"> Ubuntu </a> 20.04上安装NTP服务器，需要遵循以下步骤。在第一步中，您必须使用以下命令来更新系统存储库:</p><pre><code class="language-bash">$ sudo apt update -y</code></pre><p>成功更新系统后，现在可以使用以下命令行安装NTP服务器了:</p><pre><code class="language-bash">$ sudo apt install ntp</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/dacc257a0196c8b672928a30bb7a1463.png" decoding="async" loading="lazy" class="aligncenter wp-image-18536 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/NTP-server-install-command-on-Ubuntu-20.04.png" alt="NTP server install command on Ubuntu 20.04" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/NTP-server-install-command-on-Ubuntu-20.04.png 649w, https://blog.eldernode.com/wp-content/uploads/2020/11/NTP-server-install-command-on-Ubuntu-20.04-300x203.png 300w" data-sizes="(max-width: 649px) 100vw, 649px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/NTP-server-install-command-on-Ubuntu-20.04.png"/></p><p> </p><p>如上图所示，系统会询问您是否要继续安装过程。键入“<strong> Y </strong>”并按Enter键继续安装。</p><p>接下来，您需要确认NTP服务器的安装。为此并检查系统中NTP服务器的安装状态，您需要键入并运行以下命令:</p><pre><code class="language-bash">$ sntp --version</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/397e46c9d562becfc8bce6f62b4bac5d.png" decoding="async" loading="lazy" class="aligncenter wp-image-18537 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-confirm-installation-ntp-server-on-ubuntu.png" alt="how to confirm installation ntp server on ubuntu" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-confirm-installation-ntp-server-on-ubuntu.png 648w, https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-confirm-installation-ntp-server-on-ubuntu-300x59.png 300w" data-sizes="(max-width: 648px) 100vw, 648px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/how-to-confirm-installation-ntp-server-on-ubuntu.png"/></p><p> </p><h2><span class="ez-toc-section" id="How_to_configure_NTP_server_on_Ubuntu_2004"/>如何在Ubuntu 20.04上配置NTP服务器<span class="ez-toc-section-end"/></h2><p>因为程序需要能够与公共ntp服务器同步时间，所以您必须在成功安装NTP服务器后编辑<strong> ntp.conf </strong>文件。为此，键入并运行以下命令:</p><pre><code class="language-bash">$ sudo nano /etc/ntp.conf</code></pre><p>执行上述命令后，将出现一个页面，您可以在其中看到以下信息:</p><pre><code class="language-bash">pool 0.ubuntu.pool.ntp.org iburst  pool 1.ubuntu.pool.ntp.org iburst  pool 2.ubuntu.pool.ntp.org iburst  pool 3.ubuntu.pool.ntp.org iburst</code></pre><p>您必须用您想要的NTP池服务器替换上述命令，并输入您想要的区域。这里我们已经替换了北美NTP池服务器。您还可以通过访问<a href="http://support.ntp.org/bin/view/Servers/NTPPoolServers"> NTP站点</a>来查看和选择NTP池服务器列表。替换以下命令后，您必须<strong>保存</strong>文件并退出。</p><pre><code class="language-bash">pool 0.north-america.pool.ntp.org iburst  pool 1.north-america.pool.ntp.org iburst  pool 2.north-america.pool.ntp.org iburst  pool 3.north-america.pool.ntp.org iburst</code></pre><p>现在是时候使用下面的命令和<strong>重启</strong>系统了:</p><pre><code class="language-bash">$ sudo systemctl restart ntp</code></pre><p>重新启动后，使用以下命令查看系统状态，并查看NTP服务器是否处于活动状态:</p><pre><code class="language-bash">$ sudo systemctl status ntp</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/c8af799451715e6e19d86e9f65eda788.png" decoding="async" loading="lazy" class="aligncenter wp-image-18541 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-check-NTP-Server-status-on-ubuntu.png" alt="How to check NTP Server status on ubuntu" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-check-NTP-Server-status-on-ubuntu.png 648w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-check-NTP-Server-status-on-ubuntu-300x109.png 300w" data-sizes="(max-width: 648px) 100vw, 648px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-to-check-NTP-Server-status-on-ubuntu.png"/></p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>由于新的和不同类型的软件和硬件的出现，网络管理员关心的问题之一是同步这些工具的时间。通过这样做，除了免受可能的攻击之外，还可以更精确地存储信息。在本文中，我们试图教你如何在Ubuntu 20.04上设置NTP服务器。如果你想在Windows中这样做，请参考文章<a href="https://blog.eldernode.com/ntp-server-configuration-via-powershell/">教程通过PowerShell配置NTP服务器</a>和<a href="https://blog.eldernode.com/configure-ntp-server-in-windows-server/">教程在Windows Server 2019中配置NTP服务器</a>。</p></div></div>    
</body>
</html>