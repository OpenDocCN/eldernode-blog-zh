<html>
<head>
<title>Tutorial Create A Minecraft Server On Ubuntu 21.04 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在Ubuntu 21.04 - Eldernode博客上创建《我的世界》服务器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/create-a-minecraft-server-on-ubuntu/#0001-01-01">https://blog.eldernode.com/create-a-minecraft-server-on-ubuntu/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/9bef480c0767c24c7de586a5abb4db6a.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Create A Minecraft Server On Ubuntu 21.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Create-A-Minecraft-Server-On-Ubuntu-21.04.png"/><p>《我的世界》是世界上最受欢迎的游戏之一。这款沙盒视频游戏于2019年发布，以其无限冒险而闻名。热衷于建造、探索、制作和在3D生成的世界中生存的游戏玩家将会沉迷于《我的世界》。要开始玩这款第二畅销的视频游戏，您需要创建自己的《我的世界》服务器。所以，加入我们这篇文章来回顾一下<strong>教程在Ubuntu 21.04 </strong>上创建一个《我的世界》服务器。在<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>上订购您喜欢的包，购买您自己的<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener"> Ubuntu VPS </a>主机。</p><h2><span class="ez-toc-section" id="How_To_Create_A_Minecraft_Server_On_Ubuntu_2104"/> <strong>如何在Ubuntu 21.04上创建《我的世界》服务器</strong> <span class="ez-toc-section-end"/></h2><p>如果你和其他玩家对《我的世界》、《手工艺》和《《我的世界》》感兴趣，本指南将帮助你学习如何安装软件包、配置服务器以及部署到游戏中。作为玩家，你可以提高你解决问题的能力，锻炼你的创造力。此外，如果你相信有教育意义的游戏，《我的世界》就是你想要的。</p><h3><span class="ez-toc-section" id="Prerequisites_to_Make_Minecraft_Server_on_Ubuntu_2104"/> <strong>在Ubuntu 21.04上制作《我的世界》服务器的先决条件</strong> <span class="ez-toc-section-end"/></h3><p>为了让本教程更好地工作，请考虑以下先决条件:</p><p>_拥有Sudo权限的非root用户。</p><p>_要进行设置，请遵循我们在Ubuntu 21.04 上的<a href="https://blog.eldernode.com/initial-server-setup-on-ubuntu-21-04/" target="_blank" rel="noopener">初始服务器设置。</a></p><p>_至少4GB内存。</p><h2><span class="ez-toc-section" id="How_To_Install_Minecraft_Server_on_Ubuntu_2104"/> <strong>如何在Ubuntu 21.04上安装《我的世界》服务器</strong>T3】</h2><p>为了准确地知道谁在与您或您的孩子联系并一起玩，您需要设置自己的服务器。这意味着您可以完全掌控自己的游戏体验。由于Ubuntu以其易用性而闻名，Ubuntu 21.04 Hirsute Hippo是托管《我的世界》服务器的最佳选择。和我们一起来完成<strong>在Ubuntu 21.04 </strong>上制作《我的世界》服务器所需的步骤。</p><p><em>第一步:</em></p><p>正如所料，您将从安装所需的包开始，因为《我的世界》服务器需要它们来运行。因此，打开一个终端并键入:</p><pre><code class="language-bash">sudo apt update</code></pre><pre><code class="language-bash">sudo apt install git build-essential</code></pre><p>这样，构建<strong> mcrcon </strong>工具所需的包将被安装。</p><p><em>第二步:</em></p><p>这一步，你需要<strong>安装</strong> <strong> Java </strong>。《我的世界》需要Java 8或更高版本，但由于它不需要图形用户界面，您可以安装Java的无头版本。使用以下命令来完成此操作:</p><pre><code class="language-bash">sudo apt install openjdk-11-jre-headless</code></pre><p>然后，您可以通过运行以下命令来检查您已安装的版本:</p><pre><code class="language-bash">java -version</code></pre><p><em>第三步:</em></p><p>现在，您需要<strong>创建一个《我的世界》用户</strong>。但出于安全考虑，《我的世界》不应该以root用户身份运行。因此，用主目录<strong> /opt/minecraft </strong>创建一个新的系统用户和组。用户将拥有运行《我的世界》服务器所需的最低权限:</p><pre><code class="language-bash">sudo useradd -r -m -U -d /opt/minecraft -s /bin/bash minecraft</code></pre><p>由于您不会为该用户设置密码，因此该用户将无法通过<a href="https://blog.eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener"> SSH </a>登录，也不会受到威胁。</p><p><em> <strong>注</strong> </em>:要换成《我的世界》用户，需要以root或者拥有<a href="https://blog.eldernode.com/sudoers-configurations-setting-sudo/" target="_blank" rel="noopener">权限的用户</a>登录服务器。</p><p><em>第四步:</em></p><p>是时候在Ubuntu上安装《我的世界》了。但是首先，切换到<strong> minecraft </strong>用户:</p><pre><code class="language-bash">sudo su - minecraft</code></pre><p>然后，您需要<strong>在用户主目录中创建三个新目录</strong>。备份、工具和服务器。让我们来看看每一个的定义，然后创建它们:</p><p><strong> 1)备份目录</strong></p><p>要存储您的《我的世界》服务器备份，您需要此目录。此外，您可以将该目录与远程备份服务器同步。</p><p><strong> 2)工具目录</strong></p><p>第二个目录包含<strong> mcrcon </strong>客户端和备份脚本。</p><p><strong> 3)服务器目录</strong></p><p>服务器目录包含实际的《我的世界》服务器及其数据。</p><p>您可以使用下面的命令创建这三个目录:</p><pre><code class="language-bash">mkdir -p ~/{backups,tools,server}</code></pre><p><em>第五步:</em></p><p>要<strong>下载编译mcron </strong>，去GitHub、<a href="https://github.com/Tiiffi/mcrcon">下载源代码</a>。然后，您可以构建mcron二进制文件。CON是一种允许您连接到《我的世界》服务器并执行命令的协议。</p><p>将<strong> Tiiffi/mcrcon </strong>库从GitHub克隆到<strong> ~/tools/mcron </strong>目录下:</p><pre><code class="language-bash">git clone https://github.com/Tiiffi/mcrcon.git ~/tools/mcrcon</code></pre><p>然后，切换到mcron目录并构建实用程序:</p><pre><code class="language-bash">cd ~/tools/mcrcon</code></pre><pre><code class="language-bash">gcc -std=gnu11 -pedantic -Wall -Wextra -O2 -s -o mcrcon mcrcon.c</code></pre><p>完成后，使用以下命令，通过打印版本来验证<strong> mcrcon </strong>是否已成功编译:</p><pre><code class="language-bash">./mcrcon -v</code></pre><h3><span class="ez-toc-section" id="Minecraft_Server_Mods"/> <strong>《我的世界》服务器Mods </strong> <span class="ez-toc-section-end"/></h3><p>要下载《我的世界》服务器，有几个《我的世界》服务器模块，如Craftbukkit或Spigot。您可以使用它们来添加插件到您的服务器，并进一步定制和调整服务器设置。在本节中，您将学习安装Mojang官方香草《我的世界》服务器。因此，您将能够使用这些说明来安装任何其他所需的服务器模式。</p><p>要获得最新《我的世界》服务器的Java归档文件(JAR)的下载链接，请转到<a href="https://www.minecraft.net/en-us/download/server" target="_blank" rel="noopener">《我的世界》下载页面</a>。然后用<strong> wget </strong>下载<strong>~/服务器</strong>目录下的jar文件:</p><pre><code class="language-bash">wget https://launcher.mojang.com/v1/objects/a0d03225615ba897619220e256a266cb33a44b6b/server.jar -P ~/server</code></pre><h2><span class="ez-toc-section" id="How_to_Configure_Minecraft_Server_on_Ubuntu_2104"/> <strong>如何在Ubuntu 21.04上配置《我的世界》服务器</strong>T3】</h2><p>下载成功后，您可以通过切换到<strong> ~/server目录</strong>来启动《我的世界》服务器:</p><pre><code class="language-bash">cd ~/server</code></pre><pre><code class="language-bash">java -Xmx1024M -Xms1024M -jar server.jar nogui</code></pre><p>在第一次启动时，服务器执行一些操作，创建<strong> server.properties </strong>和<strong> eula.txt </strong>文件，然后停止。</p><p>输出要求您同意《我的世界》EULA。打开<strong> eula.txt </strong>文件，将<strong> eula=false </strong>改为<strong> eula=true </strong>:</p><pre><code class="language-bash">nano ~/server/eula.txt</code></pre><p>现在，您可以<strong>保存</strong>并关闭文件。</p><p>要启用<strong> rcon协议</strong>并设置rcon密码，请打开server.properties文件:</p><pre><code class="language-bash">nano ~/server/server.properties</code></pre><p>要更新这些值，请在输出中查找这些行。</p><p><em> <strong>注意</strong> </em>:如果您不想从远程位置连接到《我的世界》服务器，请确保rcon端口被您的防火墙阻止。将强密码更改为更安全的密码。</p><h3><span class="ez-toc-section" id="How_to_Create_Systemd_Unit_File"/> <strong>如何创建Systemd单元文件</strong> <span class="ez-toc-section-end"/></h3><p>您可以创建一个Systemd单元文件，并将《我的世界》作为服务运行。建议不要手动启动《我的世界》服务器。请遵循以下路径来完成此操作:</p><p>1-通过键入<strong> exit </strong>切换回您的Sudo用户。</p><p>2-打开你的文本编辑器，在<strong> /etc/systemd/system/ </strong>目录下创建一个名为<strong> minecraft.service </strong>的文件。</p><pre><code class="language-bash">sudo nano /etc/systemd/system/minecraft.service</code></pre><p>然后，粘贴以下配置:</p><p class="code-label"><em>/etc/systemd/system/minecraft . service</em></p><p class="highlight"/><pre><code class="language-bash">[Unit]  Description=Minecraft Server  After=network.target</code></pre><pre><code class="language-bash">[Service]  User=minecraft  Nice=1  KillMode=none  SuccessExitStatus=0 1  ProtectHome=true  ProtectSystem=full  PrivateDevices=true  NoNewPrivileges=true  WorkingDirectory=/opt/minecraft/server  ExecStart=/usr/bin/java -Xmx1024M -Xms1024M -jar server.jar nogui  ExecStop=/opt/minecraft/tools/mcrcon/mcrcon -H 127.0.0.1 -P 25575 -p strong-password stop</code></pre><pre><code class="language-bash">[Install]  WantedBy=multi-user.target</code></pre><p>然后你可以根据你的服务器资源修改<strong> <em> Xmx </em> </strong>和<strong> <em> Xms </em> </strong>标志。<strong> <em> Xmx </em> </strong>标志定义了Java虚拟机(JVM)的最大内存分配池，而<strong> <em> Xms </em> </strong>定义了初始内存分配池。此外，确保您使用正确的<strong> rcon端口</strong>和密码。</p><p>最后，<strong>保存</strong>文件并重新加载systemd管理器配置，运行:</p><pre><code class="language-bash">sudo systemctl daemon-reload</code></pre><p>现在，您可以通过键入以下命令来运行《我的世界》服务器:</p><pre><code class="language-bash">sudo systemctl start minecraft</code></pre><p>首次启动时，该服务将生成几个配置文件和目录，包括《我的世界》世界。运行以下命令检查<strong>服务状态</strong>:</p><pre><code class="language-bash">sudo systemctl status minecraft</code></pre><p>您可以<strong>使《我的世界》服务</strong>在启动时自动启动。所以，运行:</p><pre><code class="language-bash">sudo systemctl enable minecraft</code></pre><h3><span class="ez-toc-section" id="How_to_Adjust_Firewall"/> <strong>如何调整防火墙</strong> <span class="ez-toc-section-end"/></h3><p>如果您的系统启用了防火墙，并且您想从本地网络外部访问《我的世界》服务器，您需要打开端口<strong> 25565 </strong>:</p><pre><code class="language-bash">sudo ufw allow 25565/tcp</code></pre><h3><span class="ez-toc-section" id="How_to_Configure_Backups"/> <strong>如何配置备份</strong> <span class="ez-toc-section-end"/></h3><p>要自动备份《我的世界》服务器，您需要创建一个备份shell脚本和cronjob。首先，切换到<strong> minecraft </strong>:</p><pre><code class="language-bash">sudo su - minecraft</code></pre><p>打开您喜欢的文本编辑器并创建以下文件:</p><pre><code class="language-bash">nano /opt/minecraft/tools/backup.sh</code></pre><p>粘贴以下配置:</p><p class="code-label"><em>/opt/minecraft/tools/backup . sh</em></p><div class="highlight"><pre><code class="language-bash">#!/bin/bash    function rcon {  /opt/minecraft/tools/mcrcon/mcrcon -H 127.0.0.1 -P 25575 -p strong-password "$1"  }    rcon "save-off"  rcon "save-all"  tar -cvpzf /opt/minecraft/backups/server-$(date +%F-%H-%M).tar.gz /opt/minecraft/server  rcon "save-on"    ## Delete older backups  find /opt/minecraft/backups/ -type f -mtime +7 -name '*.gz' -delete</code></pre></div><p><strong>保存</strong>文件并使脚本可执行:</p><pre><code class="language-bash">chmod +x /opt/minecraft/tools/backup.sh</code></pre><p>然后，为了在一天的固定时间自动运行一次，您需要<a href="https://blog.eldernode.com/list-cron-jobs-on-ubuntu-20-04/" target="_blank" rel="noopener">创建一个cron作业</a>。要打开crontab文件，请运行:</p><pre><code class="language-bash">crontab -e</code></pre><p>例如，如果您希望每天8:00运行备份脚本，您需要粘贴以下行:</p><pre><code class="language-bash">0 8 * * * /opt/minecraft/tools/backup.sh</code></pre><h2><span class="ez-toc-section" id="How_to_Access_Minecraft_Console_on_Ubuntu_2104"/> <strong>如何在Ubuntu 21.04上访问《我的世界》控制台</strong> <span class="ez-toc-section-end"/></h2><p>您可以使用<strong> mcrcon </strong>实用程序来访问《我的世界》控制台。为此，指定主机、rcon端口、rcon密码，并使用-t开关启用mcrcon终端模式:</p><pre><code class="language-bash">/opt/minecraft/tools/mcrcon/mcrcon -H 127.0.0.1 -P 25575 -p strong-password -t</code></pre><p>输出应该报告您的登录。你可以输入“<strong> Q </strong>退出。</p><p><em> <strong>注意</strong> </em>:无论何时从远程位置访问《我的世界》控制台，rcon端口都不应该被阻塞。但是如果您经常连接到《我的世界》控制台，创建一个<a href="https://blog.eldernode.com/what-is-bashrc/" target="_blank" rel="noopener"> bash别名</a>，而不是键入这个日志命令。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您了解了如何在Ubuntu 21.04上创建《我的世界》服务器。现在，你知道了如何在你的Ubuntu服务器上创建一个《我的世界》服务器，并设置每日备份。为了保证您的服务器安全和愉快，您必须邀请您认识的人在您的服务器上玩。一旦你的《我的世界》服务器设置好了，你就可以利用你的管理能力来获得优势，并将这些能力给予你的游戏伙伴。但是，您可以创建一个只供您和您的朋友使用的私人服务器，或者将其公开，供所有人访问。启动您的《我的世界》客户端并连接到服务器，开始您的《我的世界》之旅。</p></div></div>    
</body>
</html>