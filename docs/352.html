<html>
<head>
<title>Initial Setup With Ubuntu 18.04 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Ubuntu 18.04的初始设置- Eldernode</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/initial-setup-ubuntu-18/#0001-01-01">https://blog.eldernode.com/initial-setup-ubuntu-18/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/c9360679660e9dbe585013e38ff55bfd.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Initial Setup with Ubuntu 18.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_1985.png"/><p>要开始学习Ubuntu 18.04的初始设置，值得一提的是，作为基本设置的一部分，您应该尽早采取一些配置步骤。为了增加你的服务器的安全性和可用性，你可以决定创建一个新的Ubuntu 18.04，让你的系统为后续的操作打下坚实的基础。</p><p>为了让你的学习更好地进行，选择你自己的<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener noreferrer"> Ubuntu VPS服务器</a>并立即激活。</p><p> </p><p> </p><h2><span class="ez-toc-section" id="Initial_Setup_With_Ubuntu_1804"/><span>Ubuntu 18.04初始设置</span> <span class="ez-toc-section-end"/></h2><p>让我们通过本教程的步骤来回顾Ubuntu 18.04的初始设置。如果你有兴趣学习最新版本的初始设置，可以在Ubuntu 20.04 上找到我们关于<a href="https://blog.eldernode.com/initial-server-setup-on-ubuntu-20/" target="_blank" rel="noopener noreferrer">初始服务器设置的文章。</a></p><p class="fjpost-info"/><p class="fjpost-info"/><p> </p><h3><span class="ez-toc-section" id="Step_1_How_To_Log_In_As_Root"/> <span>第一步:如何以Root身份登录</span> <span class="ez-toc-section-end"/></h3><p>很明显，你需要知道你的IP地址才能登录到你的服务器。如果您已经安装了SSH密钥进行身份验证，那么您需要<strong> root </strong>用户帐户的私钥或密码。但是如果这是您第一次连接到您的服务器，您应该以root用户的身份登录。要继续，请运行以下命令:</p><pre><code class="language-bash">ssh <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8af8e5e5feca">[email protected]</a><span class="highlight">your_server_ip</span></code></pre><p><strong>点</strong>:将命令的(<span class="highlight"> your_server_ip </span>)替换为你的服务器的公共ip地址。</p><p>如果您面临主机真实性警告，接受它，并提供您的root密码登录(如果您使用密码验证)。</p><p>此外，如果您使用受密码保护的SSH密钥，则每次会话第一次使用该密钥时，您将被强制输入密码。您可以猜测，如果您还没有连接到您的服务器，您可能还会被提示更改<strong> root </strong>密码。</p><pre><code class="language-bash"/></pre><h3 id="about-root"><span class="ez-toc-section" id="What_Is_Root"/>什么是根<span class="ez-toc-section-end"/></h3><p>在Linux中拥有非常广泛特权的管理用户。但是您可能会因为它的特权而不愿意经常使用它。</p><p>但是还有一条路可以走！</p><p>您可以为日常工作设置一个影响范围较小的备用用户帐户。所以请继续阅读这篇文章，看看如何在必要的时候获得更多的特权。</p><p> </p><p> </p><p> </p><h3 id="step-2-—-creating-a-new-user"><span class="ez-toc-section" id="Step_2_How_To_Create_A_New_User"/>第二步:如何创建新用户<span class="ez-toc-section-end"/></h3><p>在以root用户身份登录后，您可以添加新的用户帐户，从现在开始您将使用该帐户登录。要了解如何创建新用户，请看下面的例子。</p><p><strong>点</strong>:本文中用户叫noodi，记得用你喜欢的用户名替换。</p><pre><code class="language-bash">adduser noodi</code></pre><p>此时，您应该回答一些问题，首先是帐户密码。</p><p>不要忘记选择一个强密码。为了更安全，即使不需要，也要填写附加信息。此外，您可以在任何想要跳过的字段中点击<span> <strong>输入</strong> </span>。</p><p> </p><p> </p><h3><span class="ez-toc-section" id="Step_3_How_To_Gran_Administrative_Privileges"/>步骤3:如何授予管理权限<span class="ez-toc-section-end"/></h3><p>由于您有一个拥有常规帐户权限的新用户帐户，因此有时您可能需要执行管理任务。尝试为我们的普通帐户设置所谓的“超级用户”或root权限，以计划避免注销您的普通用户，并作为<strong> root </strong>帐户重新登录。这样，通过在每个命令前加上单词<span> <strong> sudo </strong> </span>，您可以让普通用户以管理权限运行命令。向新用户添加这些权限后，需要向sudo组添加新用户。总之，在Ubuntu 18.04上属于sudo组的用户，默认允许使用sudo命令。</p><p>要将新用户添加到<strong> sudo </strong>组，请以<strong> root </strong>的身份键入下面的命令。</p><pre><code class="language-bash">usermod -aG sudo noodi</code></pre><p><strong>点</strong>:用你的新用户替换“noodi”。</p><p>如果您想以超级用户权限执行操作，</p><p>以普通用户身份登录后，在命令前输入<span> <strong> sudo </strong> </span>。</p><p> </p><p> </p><p> </p><h3><span class="ez-toc-section" id="Step_4_How_to_Set_Up_a_Basic_Firewall"/>第四步:如何设置基本防火墙<span class="ez-toc-section-end"/></h3><p>由于Ubuntu 18.04服务器使用UFW防火墙，您可以使用该应用程序非常容易地设置一个基本的防火墙，以确保只允许连接到某些服务。</p><p>不同的应用程序可以在安装时向UFW注册它们的配置文件。这些配置文件允许UFW按名称管理这些应用程序。OpenSSH，现在允许我们连接到我们的服务器的服务，在UFW注册了一个概要文件。</p><p>您可以通过键入以下命令看到这一点:</p><pre><code class="language-bash">ufw app list</code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">Available applications:    OpenSSH</code></pre><p>然后，您需要确保防火墙允许SSH连接，以便您下次可以重新登录。使用以下命令允许这些连接:</p><p>之后，使用以下命令启用防火墙:</p><pre><code class="language-bash">ufw allow OpenSSH</code></pre><p>输入“<span> <strong> y </strong> </span>”，按<span> <strong>回车</strong> </span>继续。您可以通过键入以下命令看到SSH连接仍然被允许:</p><pre><code class="language-bash">ufw enable</code></pre><p><span>输出</span></p><pre><code class="language-bash">ufw status</code></pre><p title="Output">从现在开始，您需要调整防火墙设置，以允许可接受的流量进入，因为防火墙目前正在<strong>阻止</strong>除SSH之外的所有连接</p><pre><code class="language-bash">Status: active    To                         Action      From  --                         ------      ----  OpenSSH                    ALLOW       Anywhere  OpenSSH (v6)               ALLOW       Anywhere (v6)</code></pre><p> </p><p>From now on, you need to adjust the firewall settings to allow acceptable traffic in because the firewall is currently <strong>blocking</strong> all connections except for SSH</p><p> </p><h3><span class="ez-toc-section" id="Step_5_How_To_Enable_External_Access_For_Your_Regular_User"/>步骤5:如何为您的普通用户启用外部访问<span class="ez-toc-section-end"/></h3><h3>到目前为止，你有一个日常使用的固定用户。因此，请确保您可以直接SSH到该帐户。根据您的服务器的<strong> root </strong>帐户是使用密码还是SSH密钥进行认证，您可以看到为您的新用户配置SSH访问的过程。</h3><h3><strong> <span>请注意</span> </strong>:建议您保持以<strong> root </strong>的身份登录，直到您确保可以与新用户一起登录并使用sudo。原因是让您在遇到问题时，以<strong> root </strong>的身份进行故障诊断和任何必要的更改。</h3><p> </p><p> </p><p> </p><p><span class="ez-toc-section" id="If_the_Root_Account_Uses_Password_Authentication"/>如果根账户使用密码认证<span class="ez-toc-section-end"/></p><p><span>如果您使用密码登录到您的<strong> root </strong>帐户，那么SSH会启用密码验证。您可以通过打开一个新的终端会话并使用SSH和您的新用户名:</span>来SSH到您的新用户帐户</p><h3 id="if-the-root-account-uses-password-authentication"><span>输入您的普通用户密码后，您将登录。<strong>记住</strong>，如果你需要运行一个有管理权限的命令，在它前面输入<strong> sudo </strong>，就像这样:</span></h3><p>每次首次使用<strong> sudo </strong>时，系统会提示您输入常规用户密码(以后会定期提示)。</p><pre><code class="language-bash"><span>ssh <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="92fcfdfdf6fbd2">[email protected]</a><span class="highlight">your_server_ip</span></span></code></pre><p><span>为了增强服务器的安全性，<strong>我们强烈建议</strong>设置SSH密钥，而不是使用密码认证。</span></p><pre><code class="language-bash"><span>sudo command_to_run</span></code></pre><p> </p><p><span class="ez-toc-section" id="If_the_Root_Account_Uses_SSH_Key_Authentication"/> <span>如果Root账户使用SSH密钥认证</span> <span class="ez-toc-section-end"/></p><p>如果您使用SSH密钥登录到您的<strong> root </strong>帐户，那么SSH的密码验证将被禁用。您需要将本地公钥的副本添加到新用户的<span> <strong> ~/中。ssh/authorized_keys </strong> </span>文件登录成功。</p><h3 id="if-the-root-account-uses-ssh-key-authentication">因为你的公钥已经在<strong>根</strong>账户的<span> <strong> ~/里了。ssh/authorized_keys </strong> </span>文件，您可以将该文件和目录结构复制到我们现有会话中的新用户帐户。</h3><p>使用正确的所有权和权限复制文件的最简单方法是使用<span> <strong> rsync </strong> </span>命令。这将复制<strong>根</strong>用户的<span> <strong>。ssh </strong> </span>目录、保留权限和修改文件所有者，所有这些都在一个命令中完成。</p><p><strong>注意</strong>:不要忘记将<span class="highlight"> noodi </span> : <span class="highlight"> noodi替换为您的常规用户名。</span></p><p><strong> <span>请注意</span>:</strong><span><strong>rsync</strong></span>命令对以结尾斜杠结束的源和目的地的处理方式与没有结尾斜杠的不同。当使用下面的<span> <strong> rsync </strong> </span>时，确保源目录(<span> <strong> ~/)。ssh</strong></span>)<strong/>不包含尾随斜线(检查以确保您没有使用<span> <strong> ~/)。宋承宪/ </strong> </span>)。</p><pre><code class="language-bash">rsync --archive --chown=<span class="highlight">noodi</span>:<span class="highlight">noodi</span> ~/.ssh /home/noodi</code></pre><p>如果不小心在命令后面加了一个斜杠，<span> <strong> rsync </strong> </span>就会复制<strong> root </strong>账号的<span> <strong> ~/的内容。ssh </strong> </span>目录复制到<span> <strong> sudo </strong> </span>用户的主目录，而不是复制整个<span> <strong> ~/。ssh </strong>目录结构</span>。这些文件将位于错误的位置，SSH将无法找到并使用它们</p><p> </p><p>现在，打开一个新的终端会话，使用SSH和您的新用户名:</p><p>您应该在不使用密码的情况下登录到新用户帐户。请记住，如果您需要使用管理权限运行一个命令，请在它前面键入<span> <strong> sudo </strong> </span>，如下所示:</p><p>每次首次使用<span> <strong> sudo </strong> </span>时，系统会提示您输入常规用户密码(之后会定期提示)。</p><pre><code class="language-bash">ssh <span><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d4babbbbb0bd94adbba1a6">[email protected]</a>_server_ip</span></code></pre><p><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></p><pre><code class="language-bash">sudo <span>command_to_run</span></code></pre><p>在本文中，您了解了Ubuntu 18.04的初始设置，现在您已经为您的服务器打下了坚实的基础。现在，您可以在服务器上安装任何您需要的软件。为了更深入地了解您在本指南中所学的主题，请看一下我们的文章，关于<a href="https://blog.eldernode.com/install-ssh-server-on-linux-and-allow-root-user-login/" target="_blank" rel="noopener noreferrer">在linux上安装SSH服务器并允许根用户登录</a> <strong>和</strong> <a href="https://blog.eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener noreferrer">教程在Linux上连接SSH</a>。</p><pre><code class="language-bash"/></pre><div class="section-content section-content-growable content Tutorial-content"><div class="content-body tutorial-content" data-growable-markdown=""><h2><span class="ez-toc-section" id="Conclusion"/>Conclusion<span class="ez-toc-section-end"/></h2><p>In this article, you learned about Initial Setup with Ubuntu 18.04 and now you have a solid foundation for your server. You can install any of the software you need on your server now. To get more involved with the subjects you learned in this guide, have a look at our articles on <a href="https://blog.eldernode.com/install-ssh-server-on-linux-and-allow-root-user-login/" target="_blank" rel="noopener noreferrer">Install SSH Server on Linux and allow root user login</a> <strong>AND</strong> <a href="https://blog.eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener noreferrer">Tutorial connect to ssh on linux</a>.</p></div></div></div></div>    
</body>
</html>