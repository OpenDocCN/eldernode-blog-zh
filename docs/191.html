<html>
<head>
<title>How to install Apache Web Server on Debian 10 - Apache web server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Debian 10 - Apache web server上安装Apache Web Server</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-apache-web-server-debian/#0001-01-01">https://blog.eldernode.com/install-apache-web-server-debian/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/ad7b4b2876b5150bbc9085ad383789dd.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install Apache Web Server on Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2162.png"/><p>为了介绍和安装世界上最广泛使用的web服务器，在本文中，您将学习如何在Debian 10 上安装Apache Web服务器。</p><p>Apache HTTP Server提供了许多强大的功能，包括可动态加载的模块、强大的媒体支持以及与其他流行软件的广泛集成。</p><p> </p><p><strong>先决条件</strong></p><p>如果您知道以下内容，本教程可能会更有用:</p><h2><span class="ez-toc-section" id="How_to_install_Apache_Web_Server_on_Debian_10"/> <span>如何在Debian 10上安装Apache Web Server</span>T3】</h2><p>加入我们，通过这个指南的步骤来学习如何在你的Debian 10服务器上安装一个Apache web服务器。</p><p> </p><h3 id="step-1-—-installing-apache"><span class="ez-toc-section" id="1-_Installing_Apache"/> <span> 1-安装Apache </span> <span class="ez-toc-section-end"/></h3><p>由于Apache在Debian的默认软件仓库中可用，它帮助我们使用传统的<a href="https://blog.idrsolutions.com/2018/07/what-is-a-package-manager-and-why-should-you-use-one/" target="_blank" rel="noopener noreferrer">包管理</a>工具来安装它。</p><p>首先，更新本地包索引:</p><pre><code class="language-bash">sudo apt update  </code></pre><p>然后，安装<span> <strong> apache2 </strong> </span>包:</p><pre><code class="language-bash">sudo apt install apache2  </code></pre><p> </p><p><strong>不要错过相关文章:</strong></p><p class="fjpost-title px-0"><span> <a href="https://eldernode.com/install-apache-on-windows-server/" target="_blank" rel="noopener noreferrer">如何在Windows服务器上安装Apache</a></span></p><h3 id="step-2-—-adjusting-the-firewall"><span class="ez-toc-section" id="2-_Adjusting_the_Firewall"/> <span> 2-调整防火墙</span> <span class="ez-toc-section-end"/></h3><p>您必须修改防火墙设置以允许外部访问默认web端口，然后测试apache。正如您在<strong>先决条件</strong>中所读到的，您需要配置一个UFW防火墙来限制对您的服务器的访问。</p><p>为了提供一些应用程序概要，Apache向UFW注册了自己。所以您将使用它来启用或禁用通过防火墙对Apache的访问。</p><p>要列出<span><strong/></span>应用配置文件:</p><pre><code class="language-bash">sudo ufw app list  </code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">Available applications:    AIM    Bonjour    CIFS  . . .    WWW   WWW Cache   WWW Full   WWW Secure  . . .</code></pre><p>在下文中，您可以查看一些以WWW:</p><p>此配置文件仅打开端口80(正常、未加密的网络流量):<strong> WWW </strong></p><p>并且这个配置文件只打开端口8080(有时用于缓存和web代理):<strong> WWW Cache </strong>:</p><p>此外，此配置文件同时打开端口80(正常的未加密web流量)和端口443 (TLS/SSL加密流量):<strong> WWW Full </strong>:</p><p>最后，此配置文件仅打开端口443 (TLS/SSL加密流量):<strong> WWW Secure </strong>:</p><p>最好启用最严格的配置文件，它仍然允许您配置的流量。在本指南中，我们没有为我们的服务器配置SSL，因此我们只需要允许端口80上的流量:</p><p>要验证更改，请执行以下操作:</p><pre><code class="language-bash">sudo ufw allow 'WWW'  </code></pre><p><span>输出</span></p><pre><code class="language-bash">sudo ufw status  </code></pre><p title="Output"><span class="ez-toc-section" id="3-_Checking_your_Web_Server"/> <span> 3-检查你的网络服务器</span> <span class="ez-toc-section-end"/></p><pre><code class="language-bash">Status: active    To                         Action      From  --                         ------      ----  OpenSSH                    ALLOW       Anywhere  WWW                        ALLOW       Anywhere  OpenSSH (v6)               ALLOW       Anywhere (v6)  WWW (v6)                   ALLOW       Anywhere (v6)</code></pre><p>在安装过程的最后，Debian 10启动Apache，而服务器已经启动并运行。</p><p>要确保服务正在运行，请检查<span> <strong>系统和</strong> </span> init系统</p><h3 id="step-3-—-checking-your-web-server"><span>输出</span></h3><p>任何类似上面的输出都意味着服务已经成功启动。但是我们建议您向Apache请求一个页面，以获得最佳的测试方法。</p><p>此外，您可以通过您的IP地址访问默认的Apache登录页面，以确认软件运行正常。获取您的服务器的IP地址，如果您不知道的话，可以从命令行用几种不同的方法获取。</p><pre><code class="language-bash">sudo systemctl status apache2  </code></pre><p title="Output">你得到几个用空格隔开的地址，在你的浏览器中尝试每个地址，看看它们是否有效。</p><pre><code class="language-bash">● apache2.service - The Apache HTTP Server     Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)     Active: active (running) since Fri 2019-07-19 15:33:01 UTC; 4min 13s ago       Docs: https://httpd.apache.org/docs/2.4/    . . .    Jul 19 15:33:01 debssh systemd[1]: Starting The Apache HTTP Server...  Jul 19 15:33:01 debssh apachectl[2791]: AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1. Set the 'ServerName' directive global  Jul 19 15:33:01 debssh systemd[1]: Started The Apache HTTP Server.</code></pre><p>你可以使用<span> <strong> curl </strong> </span>工具，它会给出你在互联网上另一个位置看到的公共IP地址。</p><p>使用<span> <strong> apt </strong> </span>安装<strong><span/></strong>:</p><p>然后，使用IPv4使用<span> <strong> curl </strong> </span>检索icanhazip.com:</p><pre><code class="language-bash">hostname -I  </code></pre><p>接下来，在浏览器的地址栏中输入服务器的IP地址:</p><p> </p><p>应该会出现下面的页面，这意味着Apache工作正常。您还可以查看一些关于重要Apache文件和目录位置的基本信息。</p><pre><code class="language-bash">sudo apt install curl  </code></pre><p><img data-lazyloaded="1" src="../Images/ff20f74302c2b2ed33ac783677a8b03b.png" decoding="async" loading="lazy" class="aligncenter wp-image-9775 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2.jpg" alt="default Debian 10 Apache web page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2.jpg 1624w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2-286x300.jpg 286w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2-976x1024.jpg 976w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2-768x806.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2-1464x1536.jpg 1464w" data-sizes="(max-width: 1624px) 100vw, 1624px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-2.jpg"/></p><pre><code class="language-bash">curl -4 icanhazip.com  </code></pre><p> </p><pre><code class="language-bash">http://<span>your_server_ip</span></code></pre><p><span class="ez-toc-section" id="_4-_Managing_the_Apache_Process"/> <span> 4-管理阿帕奇流程</span> <span class="ez-toc-section-end"/></p><p>您可以查看一些基本的管理命令，因为您已经启动并运行了web服务器。</p><p>要停止您的web服务器:</p><p>使用下面的命令启动web服务器。</p><h3 id="step-4-—-managing-the-apache-process">当您需要停止然后再次启动服务时，请键入:</h3><p>如果您只是简单地更改配置，Apache通常可以在不中断连接的情况下重新加载:</p><p>要重新启用该服务以在引导时启动，请使用以下命令。</p><pre><code class="language-bash">sudo systemctl stop apache2  </code></pre><p>此时，当服务器再次启动时，Apache会自动启动。</p><pre><code class="language-bash">sudo systemctl start apache2  </code></pre><p> </p><pre><code class="language-bash">sudo systemctl restart apache2  </code></pre><p> </p><pre><code class="language-bash">sudo systemctl reload apache2  </code></pre><p><span class="ez-toc-section" id="5-_Setting_Up_Virtual_Hosts_Recommended"/> <span> 5-设置虚拟主机(推荐)</span> <span class="ez-toc-section-end"/></p><pre><code class="language-bash">sudo systemctl enable apache2  </code></pre><p>使用Apache web服务器时，可以使用虚拟主机(类似于T2 Nginx T3中的服务器模块)。</p><p>Debian 10上的Apache有一个默认启用的服务器块，它被配置为提供来自<span> <strong> /var/www/html </strong> </span>目录的文档。为<strong> <span> your_domain </span> </strong>创建目录，如下所示，使用-p标志创建任何必要的父目录:</p><p><span> <strong>注</strong> </span>:别忘了用自己的域名替换<strong><span>your _ domain</span></strong><strong/></p><h3 id="step-5-—-setting-up-virtual-hosts-recommended">接下来，使用环境变量<span> $USER </span>分配目录的所有权:</h3><p>如果你没有修改你的<span> <strong> unmask </strong> </span>值，你的web roots权限应该是正确的。要确保这一点，请键入:</p><p>使用您首选的编辑器或<span> nano </span>，创建一个示例【index.html】<strong><span/></strong>页面。</p><p>然后，在其中添加以下示例HTML:</p><pre><code class="language-bash">sudo mkdir -p /var/www/<span>your_domain  </span></code></pre><p>/var/www/your _ domain/index . html</p><pre><code class="language-bash">sudo chown -R $USER:$USER /var/www/<span>your_domain  </span></code></pre><p>您现在可以保存并关闭文件。</p><pre><code class="language-bash">sudo chmod -R 755 /var/www/<span>your_domain </span></code></pre><p> </p><pre><code class="language-bash">nano /var/www/your_domain/index.html  </code></pre><p>要让Apache提供这些内容，您必须用正确的指令创建一个虚拟主机文件。为此，不要直接修改位于<span>/etc/Apache 2/sites-available/000-default . conf</span>的默认配置文件，而是在<span>/etc/Apache 2/sites-available/<span>your _ domain</span>创建一个新的配置文件。形态</span>:</p><p class="code-label" title="/var/www/your_domain/index.html">/etc/Apache 2/sites-available/your _ domain . conf</p><div title="/var/www/your_domain/index.html"><pre><code class="language-bash">&lt;html&gt;      &lt;head&gt;          &lt;title&gt;Welcome to <span>your_domain</span>!&lt;/title&gt;      &lt;/head&gt;      &lt;body&gt;          &lt;h1&gt;Success!  The <span>your_domain</span> virtual host is working!&lt;/h1&gt;      &lt;/body&gt;  &lt;/html&gt;</code></pre></div><p> </p><p>现在，您可以使用<span>a2 en site t</span>tool启用该文件:</p><p>接下来，禁用在<span> 000-default.conf </span>中定义的默认站点:</p><pre><code class="language-bash">sudo nano /etc/apache2/sites-available/<span class="highlight">your_domain</span>.conf  </code></pre><p class="code-label" title="/etc/apache2/sites-available/your_domain.conf">您可以使用以下命令测试配置错误:</p><pre><code class="language-bash">&lt;VirtualHost *:80&gt;      ServerAdmin <span><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5332373e3a3d132a3c2621">[email protected]</a>_email_domain</span>      ServerName<span> your_domain</span>      ServerAlias <span>www.your_domain</span>      DocumentRoot /var/<span>www/your_domain</span>      ErrorLog ${APACHE_LOG_DIR}/error.log      CustomLog ${APACHE_LOG_DIR}/access.log combined  &lt;/VirtualHost&gt;</code></pre><p><span>输出</span></p><p>要实现您的更改，请重新启动Apache</p><pre><code class="language-bash">sudo a2ensite <span class="highlight">your_domain</span>.conf  </code></pre><p>这是Apache为您的域名提供服务的地方。此外，您可以通过导航到<span> http://your_domain </span>来测试它，在这里您应该会看到类似下面的内容:</p><pre><code class="language-bash">sudo a2dissite 000-default.conf  </code></pre><p><img data-lazyloaded="1" src="../Images/fe65d49c15c3c2a0e50f75682dc563b5.png" decoding="async" loading="lazy" class="aligncenter wp-image-9780 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/example.jpg" alt="serving your domain name" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/example.jpg 690w, https://blog.eldernode.com/wp-content/uploads/2020/07/example-300x20.jpg 300w" data-sizes="(max-width: 690px) 100vw, 690px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/example.jpg"/></p><pre><code class="language-bash">sudo apache2ctl configtest  </code></pre><p title="Output"> </p><pre><code class="language-bash">AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1. Set the 'ServerName' directive globally to suppress this message  Syntax OK</code></pre><p> </p><pre><code class="language-bash">sudo systemctl restart apache2  </code></pre><p><span class="ez-toc-section" id="6-_Getting_Familiar_with_Important_Apache_Files_and_Directories"/> <span> 6-熟悉重要的Apache文件和目录</span> <span class="ez-toc-section-end"/></p><p>在熟悉管理Apache服务本身之后，让我们花几分钟时间熟悉一些重要的目录和文件。</p><p><span class="ez-toc-section" id="Content"/>内容<span class="ez-toc-section-end"/></p><p><span> /var/www/html </span>:实际的web内容，默认情况下只包含您之前看到的默认Apache页面，从<span> /var/www/html </span>目录提供。此外，您通过修改Apache配置文件进行了更改。</p><h3 id="step-6-–-getting-familiar-with-important-apache-files-and-directories"> </h3><p><span class="ez-toc-section" id="Server_Configuration"/> <span>服务器配置</span> <span class="ez-toc-section-end"/></p><h3 id="content"><span>/etc/Apache 2</span>:Apache配置目录。所有的Apache配置文件都在这里。</h3><p><span>/etc/apache 2/Apache 2 . conf</span>:主Apache配置文件。您可以使用它来修改和更改Apache全局配置。这个文件负责加载配置目录中的许多其他文件。</p><p><span> /etc/apache2/ports.conf </span>:这个文件指定apache将监听的端口。默认情况下，Apache监听端口80，当启用了提供SSL功能的模块时，还会监听端口443。</p><h3 id="server-configuration"><span>/etc/Apache 2/sites-available/</span>:可以存储每个站点虚拟主机的目录。Apache不会使用在这个目录中找到的配置文件，除非它们链接到启用了<span>站点的</span>目录。通常，所有服务器块配置都在这个目录中完成，然后通过使用<span> a2ensite </span>命令链接到另一个目录来启用。</h3><p><span>/etc/Apache 2/sites-enabled/</span>:存放已启用的每站点虚拟主机的目录。通常，它们是通过用<span> a2ensite </span>链接到<span>站点可用</span>目录中的配置文件来创建的。Apache在启动或重新加载以编译一个完整的配置时，会读取这个目录中的配置文件和链接。</p><p><span>/etc/Apache 2/conf-available/</span>、<span>/etc/Apache 2/conf-enabled/</span>:这些目录与<span> sites-available </span>和<span> sites-enabled </span>目录具有相同的关系，但是用于存储不属于虚拟主机的配置片段。<span> conf-available </span>目录中的文件可以使用<span> a2enconf </span>命令启用，使用<span> a2disconf </span>命令禁用。</p><p><span>/etc/Apache 2/MODS-available/</span>、<span>/etc/Apache 2/MODS-enabled/</span>:这些目录分别包含了可用和启用的模块。文件以<span>结尾。load </span>包含加载特定模块的片段，而文件以<span>结尾。conf </span>包含这些模块的配置。可以使用<span> a2enmod </span>和<span> a2dismod </span>命令启用和禁用模块。</p><p><span class="ez-toc-section" id="Server_Logs"/> <span>服务器日志</span> <span class="ez-toc-section-end"/></p><p><span>/var/log/apache 2/access . log</span>:默认情况下，对web服务器的每个请求都记录在这个日志文件中，除非Apache被配置为不这样做。</p><p><span>/var/log/Apache 2/error . log</span>:默认情况下，所有错误都记录在这个文件中。Apache配置中的<span> LogLevel </span>指令指定了错误日志将包含多少细节。</p><p> </p><h3 id="server-logs"><span> <strong>好样的</strong> </span>！学完本教程后，您知道您已经安装了web服务器，您可以选择提供的内容类型以及可以用来创建更丰富体验的技术。</h3><p> </p><p>亲爱的用户，我们希望你喜欢这个教程，你可以在评论区提出关于这个培训的问题，或者要解决<a href="https://eldernode.com/" target="_blank" rel="noopener noreferrer"> Eldernode </a>培训领域的其他问题，请参考<a href="https://eldernode.com/ask" target="_blank" rel="noopener noreferrer">提问页面</a>部分并在其中提出你的问题。</p><p> </p><p><span><strong>Good job</strong></span>! by finishing this tutorial, you know that you have your web server installed, you have many options for the type of content you can serve and the technologies you can use to create a richer experience.</p><p> </p><p>Dear user, we hope you would enjoy this tutorial, you can ask questions about this training in the comments section, or to solve other problems in the field of <a href="https://eldernode.com/" target="_blank" rel="noopener noreferrer">Eldernode</a> training, refer to the <a href="https://eldernode.com/ask" target="_blank" rel="noopener noreferrer">Ask page</a> section and raise your problems in it.</p></div></div>    
</body>
</html>