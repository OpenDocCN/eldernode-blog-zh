<html>
<head>
<title>How to Disable IPv6 in CentOS 8 - disable IPv6 on centos kernel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在CentOS 8中禁用IPv6-在CentOS内核中禁用IPv6</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/disable-ipv6-centos8/#0001-01-01">https://blog.eldernode.com/disable-ipv6-centos8/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/b42cbee800eb530b3f069318e9e8c938.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Disable IPv6 in CentOS 8" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2125.png"/><p>在下面的<span> <a href="https://eldernode.com/tag/learning-centos-8/" target="_blank" rel="noopener noreferrer"> CentOS 8 </a> </span>教程中，我们将学习<strong>如何在CentOS中禁用IPv6。</strong>互联网协议版本<strong> 6 </strong> ( <strong> IPv6 </strong>)是IPv6计算机网络中涉及的网络接口的标识符。如果您不想使用Ipv6寻址，您可以选择暂时或永久停用它。</p><p> </p><h2><span class="ez-toc-section" id="How_to_Disable_IPv6_in_CentOS_8"/> <span>如何在CentOS 8 </span> <span class="ez-toc-section-end"/>禁用IPv6</h2><p>让我们浏览本教程的步骤，向您展示在CentOS 8 <span> <a href="https://www.linux.org/" target="_blank" rel="noopener noreferrer"> Linux </a> </span>机器中禁用IPv6的几种方法。</p><p> </p><h3><span class="ez-toc-section" id="Disabling_IPv6_in_CentOS_8"/> <span>在CentOS 8 </span> <span class="ez-toc-section-end"/>禁用IPv6</h3><p>要检查您的<strong> CentOS 8 </strong>机器上是否启用了<strong> IPv6 </strong>，请键入:</p><pre><code class="language-bash">ip a | grep inet6</code></pre><p>如果启用了<strong> IPv6 </strong>，您会看到一些<strong> inet6 </strong>行。因此，如果该命令不打印任何内容，则IPv6在您的所有网络接口上都被禁用。</p><h3><span class="ez-toc-section" id="Disable_IPv6_Using_sysctl_Command"/> <span>使用sysctl命令</span>禁用IPv6】</h3><p>该方法用于临时禁用<strong> IPv6 </strong>。要使更改生效，您不需要重启系统。</p><p>首先创建一个新的sysctl配置文件<strong>/etc/sysctl . d/70-IPv6 . conf</strong>。</p><pre><code class="language-bash">vi /etc/sysctl.d/70-ipv6.conf  </code></pre><p>然后，添加以下几行并保存文件。</p><pre><code class="language-bash">net.ipv6.conf.all.disable_ipv6 = 1  net.ipv6.conf.default.disable_ipv6 = 1</code></pre><p>并且，使用下面的命令禁用<strong> IPv6。</strong></p><pre><code class="language-bash">sysctl --load /etc/sysctl.d/70-ipv6.conf  </code></pre><figure id="attachment_35038" class="wp-caption aligncenter" aria-describedby="caption-attachment-35038"/><p>之后，应该禁用IPv6。</p><p>接下来，运行以下命令验证IPv6是否被禁用。</p><pre><code class="language-bash">ip a | grep inet6  </code></pre><figure id="attachment_35039" class="wp-caption aligncenter" aria-describedby="caption-attachment-35039"/><p>如果该命令没有返回任何内容，则意味着<strong> IPv6 </strong>已在您的所有网络接口上被禁用。</p><p>当您使用此方法时，一旦您重新启动系统，您的一些网络接口可能仍然使用<strong> IPv6 </strong>。当<strong> CentOS 8 </strong>使用网络管理器时，就会发生这种情况。</p><p>键入以下命令以完全停止使用<strong> IPv6。</strong></p><pre><code class="language-bash">nmcli connection modify interface ipv6.method ignore  </code></pre><p>最后，重启你的<strong> CentOS 8 </strong>机器。</p><pre><code class="language-bash">reboot</code></pre><h3/><p class="fjtitle1 text-uppercase1"><span> <a href="https://eldernode.com/vps/" target="_blank" rel="noopener noreferrer"> <strong>购买VPS服务器</strong> </a> </span></p><h3/><h3><span class="ez-toc-section" id="Disable_IPv6_Using_The_Kernel_Boot_Option"/> <span>使用内核启动选项</span>禁用IPv6】</h3><p>禁用IPv6的最佳方法是内核启动选项要求在配置后重新启动系统。</p><p>可以用<span> <a href="https://eldernode.com/use-vi-full-text-editor/" target="_blank" rel="noopener noreferrer"> vi文本编辑器</a> </span>打开默认的GRUB配置文件<strong> /etc/default/grub </strong>来使用这种方法。</p><pre><code class="language-bash">vi /etc/default/grub</code></pre><p>接下来，移动到文件的末尾，按下<span> <strong> O </strong> </span>创建一个新行，并键入以下内容。</p><pre><code class="language-bash">GRUB_CMDLINE_LINUX="$GRUB_CMDLINE_LINUX ipv6.disable=1"  </code></pre><p>您可以保存并退出配置文件。</p><p>键入以下命令定位grub文件并更新<strong> GRUB CFG </strong>文件。</p><pre><code class="language-bash">ls -lh /etc/grub*.cfg  </code></pre><p>下面你会看到<strong> 2 GRUB CFG </strong>文件路径:<span> <strong> /boot/grub2/grub.cfg </strong>和<strong>/boot/EFI/EFI/centos/GRUB . CFG</strong></span>。</p><p>使用以下命令创建一个新的GRUB配置文件，并将其保存到<strong> /boot/grub2/grub.cfg. </strong></p><pre><code class="language-bash">grub2-mkconfig -o /boot/grub2/grub.cfg  </code></pre><p>再次键入以下命令创建一个新的GRUB配置文件，并将其保存到<strong>/boot/EFI/EFI/centos/GRUB . CFG</strong>。</p><pre><code class="language-bash">grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg  </code></pre><p>最后，重启你的<strong> CentOS 8 </strong>机器。</p><pre><code class="language-bash">reboot</code></pre><p>重启后，使用以下命令验证<strong> IPv6 </strong>是否被禁用。</p><pre><code class="language-bash">ip a | grep inet6</code></pre><p>如果您没有看到该命令的任何输出，这意味着<strong> IPv6 </strong>被禁用。</p><p> </p><p><span> <strong>好样的</strong> </span>！达到这一点意味着你已经完成了教程。你已经了解了在你的CentOS 8 Linux机器上禁用<strong> IPv6 </strong>的两种方法。正如您所记得的，第一种方法是使用<strong> sysctl </strong>，而第二种方法是使用<strong>内核引导选项</strong>。虽然使用<strong> sysctl </strong>禁用<strong> IPv6 </strong>是暂时的，但是<strong>内核引导选项</strong>是永久的，并且是最好的方法。</p><p> </p><p>亲爱的用户，我们希望您喜欢本教程，您可以在评论区提出关于本次培训的问题，或者解决<a href="https://bit.ly/2Y5rVUu" target="_blank" rel="noopener noreferrer"> Eldernode </a>培训领域的其他问题，请参考<span> <a href="https://eldernode.com/ask" target="_blank" rel="noopener noreferrer">提问页面</a> </span>部分并在其中提出您的问题。</p></div></div>    
</body>
</html>