<html>
<head>
<title>How To Setup Odoo With PostgreSQL On Centos 7 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Centos 7 - Eldernode博客上用PostgreSQL设置Odoo</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/odoo-with-postgresql-on-centos-7/#0001-01-01">https://blog.eldernode.com/odoo-with-postgresql-on-centos-7/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/046dafdd28ce774589f4fea0055f1c8e.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How To Setup Odoo With PostgreSQL On Centos 7" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/How-To-Setup-Odoo-With-PostgreSQL-On-Centos-7.png"/><p>了解如何在Centos 7 上逐步使用PostgreSQL设置Odoo。如果你是一个喜欢使用一种工具而不是几种工具的人，或者你从一个大商店购物以避免走进许多商店，Odoo是为你的口味而设计的。因此，任何时候你需要一个<a href="https://eldernode.com/vps/" target="_blank" rel="noopener noreferrer"> VPS </a>，记得访问<a href="https://eldernode.com/" target="_blank" rel="noopener noreferrer"> Eldernode </a>购买你认为完美的<a href="https://eldernode.com/centos-vps/" target="_blank" rel="noopener noreferrer"> CentOS VPS </a>来帮助你停止寻找最好的套餐，因为我们声称为你提供最好的！</p><h2><span class="ez-toc-section" id="What_is_Odoo"/>Odoo是什么？<span class="ez-toc-section-end"/></h2><p>前OpenERP，Odoo是一个业务管理平台。您可以在其中找到一些不同的应用程序，如会计、计费、项目管理、库存等等。这款免费开源的ERP是一款基于网络的应用程序，具有许多功能，是任何与销售点、计费和会计、事件管理、电子邮件营销、订单跟踪等相关的工作的必备工具</p><div class="iYB33c"><div class="dlJLJe"><p data-cviv="false" data-ved="2ahUKEwjvjKDJlaPtAhUCzYUKHa2YBc0Qz_AEMAB6BAgCEA8"/><h2 class="U9URNb"><span class="ez-toc-section" id="Tutorial_Setup_Odoo_With_PostgreSQL_On_Centos_7"/>教程在Centos 7上使用PostgreSQL设置Odoo】</h2></div></div><p>在下面的开源应用教程中，在本指南中，您将了解Odoo。所以，让我们通过这篇文章的步骤来完成它，并开始使用这个独特的框架。</p><h2><span class="ez-toc-section" id="How_To_Install_Odoo_12_on_CentOS"/>如何在CentOS上安装Odoo 12<span class="ez-toc-section-end"/></h2><p>作为一名社区开发人员，你需要使用一款可用性一流的应用，它可以跨所有应用进行扩展。在执行本教程的命令之前，请考虑使用<a href="https://blog.eldernode.com/create-new-sudo-user-centos-8/" target="_blank" rel="noopener noreferrer">根用户</a>。</p><h3><span class="ez-toc-section" id="Step_1_Update_System"/>第一步:更新系统<span class="ez-toc-section-end"/></h3><p>要更新系统，请运行:</p><pre><code class="language-bash">yum update</code></pre><p>你将面临更新的问题，所以输入“y”并等待一段时间来更新你的系统。</p><h3><span class="ez-toc-section" id="Step_2_Configure_Repositories"/>步骤2:配置存储库<span class="ez-toc-section-end"/></h3><p>您需要配置所需的存储库，因此使用下面的命令来启用Epel存储库:</p><pre><code class="language-bash">yum install epel-release</code></pre><p>然后，键入以下命令以启用软件集合(SCL)存储库:</p><pre><code class="language-bash">yum install centos-release-scl</code></pre><h3><span class="ez-toc-section" id="Step_3_Install_Python_36_And_Dependencies"/>第三步:安装Python 3.6及其依赖关系<span class="ez-toc-section-end"/></h3><p>要安装Python 36，请运行:</p><pre><code class="language-bash">yum install rh-python36</code></pre><p>要安装所需的依赖项，请键入:</p><pre><code class="language-bash">yum install bzip2-devel freetype-devel nodejs-less libxslt-devel openldap-devel libjpeg-devel gcc</code></pre><h3><span class="ez-toc-section" id="Step_4_Create_Odoo_User"/>第四步:创建Odoo用户<span class="ez-toc-section-end"/></h3><p>是时候创建您的Odoo用户了，所以运行:</p><pre><code class="language-bash">useradd -m -U -r -d /opt/odoo -s /bin/bash odoousr</code></pre><h3><span class="ez-toc-section" id="Step_5_Install_And_Configure_PostgreSQL"/>第五步:安装并配置PostgreSQL <span class="ez-toc-section-end"/></h3><p>建议您从<a href="https://yum.postgresql.org/repopackages.php#pg11">官方网站</a>查看存储库，并为Centos 7 64bit安装Postgres存储库。</p><pre><code class="language-bash">rpm -Uvh https://yum.postgresql.org/11/redhat/rhel-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm</code></pre><p>然后，您就可以安装PostgreSQL 11服务器了:</p><pre><code class="language-bash">yum install postgresql11-server</code></pre><p>接下来，要在系统上创建数据目录和其他配置文件，可以通过运行以下命令来初始化数据库:</p><pre><code class="language-bash">/usr/pgsql-11/bin/postgresql-11-setup initdb</code></pre><p>要检查PostgreSQL服务状态，请键入:</p><pre><code class="language-bash">systemctl status postgresql-11.service</code></pre><p>如果您遇到系统无法启动的情况，请使用以下命令来启动它:</p><pre><code class="language-bash">systemctl start postgresql-11.service</code></pre><p>并在系统启动时启用服务。运行:</p><pre><code class="language-bash">systemctl enable postgresql-11.service</code></pre><p>现在，您可以检查和验证PostgreSQL安装:</p><pre><code class="language-bash">su - postgres -c "psql"</code></pre><p>如果您愿意，可以创建一个密码:</p><pre><code class="language-bash"> \password postgres</code></pre><p>然后，您应该创建一个PostgreSQL用户:</p><pre><code class="language-bash">su - postgres -c "createuser -s odoousr"</code></pre><h3><span class="ez-toc-section" id="Step_6_Install_Wkhtmltopdf"/>第六步:安装Wkhtmltopdf <span class="ez-toc-section-end"/></h3><p>Odoo需要一个开源工具来制作PDF格式的HTML，以便打印PDF报告。</p><pre><code class="language-bash">wget https://downloads.wkhtmltopdf.org/0.12/0.12.5/wkhtmltox-0.12.5-1.centos7.x86_64.rpm</code></pre><p>如果“wget”不可用，请安装它。</p><pre><code class="language-bash">yum install wget -y</code></pre><p>运行以下命令安装下载的软件包:</p><pre><code class="language-bash">yum localinstall wkhtmltox-0.12.5-1.centos7.x86_64.rpm</code></pre><h3><span class="ez-toc-section" id="Step_7_Install_And_Configure_Odoo_12"/>第七步:安装并配置Odoo 12 <span class="ez-toc-section-end"/></h3><p>首先，您需要在系统上安装Git:</p><pre><code class="language-bash">yum install git -y</code></pre><p>第二，将用户改为Odoo用户:</p><pre><code class="language-bash">su - odoousr</code></pre><p>第三，您需要从它的存储库中克隆Odoo 12。所以，下载到“/opt/odoo/odoo12”目录。</p><pre><code class="language-bash">git clone https://www.github.com/odoo/odoo --depth 1 --branch 12.0 /opt/odoo/odoo12</code></pre><p>第四，启用python36:</p><pre><code class="language-bash">scl enable rh-python36 bash</code></pre><h3><span class="ez-toc-section" id="Step_8_How_To_Create_A_New_Virtual_Environment"/>步骤8:如何创建新的虚拟环境<span class="ez-toc-section-end"/></h3><p>使用下面的命令转到Odoo目录:</p><pre><code class="language-bash">cd /opt/odoo</code></pre><p>创造一个环境:</p><pre><code class="language-bash">python3 -m venv odoo12-venv</code></pre><p>要激活环境，请键入:</p><pre><code class="language-bash">source odoo12-venv/bin/activate</code></pre><p>然后，您应该升级pip:</p><pre><code class="language-bash">pip install --upgrade pip</code></pre><p>接下来，安装轮子库，然后安装所有需要的Python模块。</p><pre><code class="language-bash">pip3 install wheel</code></pre><pre><code class="language-bash">pip3 install -r odoo12/requirements.txt</code></pre><p>安装完成后，停用虚拟环境并返回root用户。</p><h3><span class="ez-toc-section" id="Step_9_Other_Configurations_For_Odoo12"/>步骤9:odoo 12的其他配置<span class="ez-toc-section-end"/></h3><p>首先，为定制模块创建一个目录:</p><pre><code class="language-bash"> mkdir /opt/odoo/odoo12-custom-addons</code></pre><pre><code class="language-bash">chown odoousr: /opt/odoo/odoo12-custom-addons</code></pre><p>其次，为Odoo12创建一个配置文件:</p><pre><code class="language-bash">vim /etc/odoo12.conf</code></pre><p>如果vim不可用，您可以通过您喜欢的任何编辑器安装它:</p><pre><code class="language-bash">yum install vim</code></pre><p>将以下几行添加到文件中:</p><pre><code class="language-bash">[options]  ; This is the password that allows database operations:  admin_passwd = <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="81e4ede5c1b6b7ebe9f5">[email protected]</a>&lt;?Linux  db_host = False  db_port = False  db_user = odoousr  db_password = False  addons_path = /opt/odoo/odoo12/addons,/opt/odoo/odoo12-custom-addons  logfile = /var/log/odoo12/odoo.log</code></pre><p>现在，您可以保存并退出该文件。然后，您应该创建一个日志文件夹并授予其权限:</p><pre><code class="language-bash">mkdir -p /var/log/odoo12</code></pre><pre><code class="language-bash">chown -R odoousr: /var/log/odoo12</code></pre><h3><span class="ez-toc-section" id="Step_10_How_To_Start_Odoo12_Manually"/>第十步:如何手动启动Odoo12】</h3><p>在这一步中，您可以启动服务并检查它是否正常工作。为此，您需要更改用户，然后启动命令:</p><pre><code class="language-bash">su - odoousr</code></pre><pre><code class="language-bash">/usr/bin/scl enable rh-python36 -- /opt/odoo/odoo12-venv/bin/python3 /opt/odoo/odoo12/odoo-bin -c /etc/odoo12.conf</code></pre><p>然后，尝试检查Odoo12端口是否启动并运行，并打开另一个终端，然后键入:</p><pre><code class="language-bash">netstat -tunlp | grep 8069</code></pre><h3><span class="ez-toc-section" id="Step_11_How_To_Configure_firewall"/>步骤11:如何配置防火墙<span class="ez-toc-section-end"/></h3><p>使用以下命令检查防火墙状态:</p><pre><code class="language-bash">systemctl status firewalld</code></pre><p>如果您发现服务尚未启动，请运行以下命令启动该服务:</p><pre><code class="language-bash">systemctl start firewalld</code></pre><p>要添加防火墙规则并重新加载防火墙类型:</p><pre><code class="language-bash">firewall-cmd --zone=public --permanent --add-service=http</code></pre><pre><code class="language-bash">firewall-cmd --zone=public --permanent --add-port=8069/tcp</code></pre><pre><code class="language-bash">systemctl reload firewalld</code></pre><h3><span class="ez-toc-section" id="Step_12_How_To_Browse_Application"/>第十二步:如何浏览应用<span class="ez-toc-section-end"/></h3><pre><code class="language-bash">http://Ip or domain name:8069</code></pre><p>起始页将显示:</p><p><img data-lazyloaded="1" src="../Images/1ff25d11e09dcc2d0db6edd3f8c41d36.png" decoding="async" loading="lazy" class="size-large wp-image-18817 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Start_Page-1068x817-1-1024x783.png" alt="Start page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Start_Page-1068x817-1-1024x783.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Start_Page-1068x817-1-300x229.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Start_Page-1068x817-1-768x588.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Start_Page-1068x817-1.png 1068w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Start_Page-1068x817-1-1024x783.png"/></p><p> </p><p>此外，如果您遇到“服务不可用”消息，您可以暂时更改Selinux模式。</p><pre><code class="language-bash">setenforce 0</code></pre><h3><span class="ez-toc-section" id="Step_13_Configure_Odoo12_run_As_A_Service"/>步骤13:配置Odoo12作为服务运行<span class="ez-toc-section-end"/></h3><p>在这一步中，您需要创建一个systemd文件，并将以下内容添加到该文件中:</p><pre><code class="language-bash">vim /etc/systemd/system/odoo12.service</code></pre><pre><code class="language-bash">[Unit]  Description=Odoo12  Requires=postgresql-11.service  After=network.target postgresql-11.service    [Service]  Type=simple  SyslogIdentifier=odoo12  PermissionsStartOnly=true  User=odoousr  Group=odoousr  ExecStart=/usr/bin/scl enable rh-python36 -- /opt/odoo/odoo12-venv/bin/python3 /opt/odoo/odoo12/odoo-bin -c /etc/odoo12.conf  StandardOutput=journal+console    [Install]  WantedBy=multi-user.target</code></pre><p>现在。您可以保存并退出。</p><p>使用以下命令重新加载systemctl守护程序。</p><pre><code class="language-bash">systemctl daemon-reload</code></pre><h3><span class="ez-toc-section" id="Step_14_How_To_Stop_Previously_Started_Odoo12"/>步骤14:如何停止先前启动的Odoo12 <span class="ez-toc-section-end"/></h3><p>要检查流程，请运行:</p><pre><code class="language-bash">ps -aux | grep odoo</code></pre><p>Odoo进程Kill进程。</p><pre><code class="language-bash">kill -9 28416 28417 28420</code></pre><p><strong>注意</strong>:不要忘记用你的id替换进程id。</p><h3><span class="ez-toc-section" id="Step_15_How_To_Start_Odoo12_Service"/>步骤15:如何启动Odoo12服务<span class="ez-toc-section-end"/></h3><pre><code class="language-bash">systemctl start odoo12</code></pre><p>要检查状态，请运行:</p><pre><code class="language-bash">systemctl status odoo12</code></pre><p>使用以下命令监控日志文件:</p><pre><code class="language-bash">tail -f /var/log/odoo12/odoo.log</code></pre><p>然后，检查状态并在系统启动时启用Odoo服务:</p><pre><code class="language-bash">systemctl enable odoo12</code></pre><h3><span class="ez-toc-section" id="Step_16_How_To_Browse_The_Website_And_Continue"/>第十六步:如何浏览网站并继续<span class="ez-toc-section-end"/></h3><pre><code class="language-bash">http://Ip Or Domain name:8069</code></pre><p>一旦您查看了下面的页面，您必须添加主密码、数据库名称和其他详细信息。</p><p><img data-lazyloaded="1" src="../Images/66c239e9b010af34420557c9584008bd.png" decoding="async" loading="lazy" class="size-large wp-image-18818 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Browse-The-Website-1024x511.png" alt="Browse The Website" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Browse-The-Website-1024x511.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Browse-The-Website-300x150.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Browse-The-Website-768x383.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Browse-The-Website.png 1068w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Browse-The-Website-1024x511.png"/></p><p> </p><p>然后，要重定向到欢迎页面，您应该单击“创建数据库”</p><p><img data-lazyloaded="1" src="../Images/226cdd573f5efadc2d2a99413611d048.png" decoding="async" loading="lazy" class="size-large wp-image-18819 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Welcome_Page-1068x570-1-1024x547.png" alt="welcome page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Welcome_Page-1068x570-1-1024x547.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Welcome_Page-1068x570-1-300x160.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Welcome_Page-1068x570-1-768x410.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Welcome_Page-1068x570-1.png 1068w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Welcome_Page-1068x570-1-1024x547.png"/></p><p> </p><p>从上述页面退出后，您将进入登录页面。</p><p><img data-lazyloaded="1" src="../Images/cd9a128c06b2102093d7efbb0dea1e65.png" decoding="async" loading="lazy" class="size-large wp-image-18824 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Login_Page-1068x559-2-1024x536.png" alt="login page - Odoo With PostgreSQL On Centos 7" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Login_Page-1068x559-2-1024x536.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Login_Page-1068x559-2-300x157.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Login_Page-1068x559-2-768x402.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Login_Page-1068x559-2.png 1068w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Login_Page-1068x559-2-1024x536.png"/></p><p> </p><p>就是这样！到达这里，您已经完成了安装。</p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您了解了如何在Centos 7上使用PostgreSQL设置Odoo。从现在开始，您可以使用并享受这款软件的计费、会计、项目管理、制造、仓库和库存应用程序。</p></div></div>    
</body>
</html>