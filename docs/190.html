<html>
<head>
<title>How to install and use vi as a full text editor - what is vi/vim</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何安装和使用vi作为全文编辑器——什么是vi/vim</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/use-vi-full-text-editor/#0001-01-01">https://blog.eldernode.com/use-vi-full-text-editor/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/0f64946bd5841a687bd40e70127e396a.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install and use vi as a full text editor" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2161.png"/><p>由于<a href="https://www.linux.org/" target="_blank" rel="noopener noreferrer"> Linux </a>基金会推出了<strong> LFCS </strong>认证，在这篇文章中，我们将学习<strong>如何安装和使用vi作为全文编辑器</strong>。LFCS(Linux Foundation Certified Sysadmin)帮助来自世界各地的个人验证他们能够在Linux系统上执行基本到中级的系统管理任务:系统支持、第一手故障排除和维护，以及智能决策，以知道何时向上层支持团队提出问题。</p><p> </p><h2><span class="ez-toc-section" id="How_to_install_and_use_vi_as_a_full_text_editor"/> <span>如何安装使用vi作为全文编辑器</span> <span class="ez-toc-section-end"/></h2><p>让我们回顾一下本指南的步骤，以了解<strong> vi/m editor </strong>中的基本文件编辑操作和理解模式，这些是<strong> LFCS认证</strong> n考试所需的。</p><h3><span class="ez-toc-section" id="Perform_basic_file_editing_operations_using_vi"/> <span>使用vi </span> <span class="ez-toc-section-end"/>执行基本文件编辑操作</h3><p>Vi是第一个为Unix编写的小而简单的全屏幕文本编辑器。对于专门使用GUI文本编辑器的人来说，这可能有点困难，举几个例子来说，比如<b> NotePad++ </b>，或者<strong> gedit </strong>。</p><p>你将学习这个强大程序的3种方法，以便能够使用<strong> Vi </strong>，然后了解它强大的文本编辑程序。</p><p><span> <strong>重要的</strong> </span>:大多数现代Linux发行版都附带了一个<b> vi </b>的变体，称为<b>vim</b>(“vi改进”)，它支持比最初的Vi更多的特性。因此，在本指南中，我们将交替使用vi和vim。</p><p>如果您的发行版没有安装vim，您可以安装它。</p><p><b> Ubuntu及衍生品</b>:智能更新&amp;T3】智能安装vim</p><p><b>基于红帽的发行版</b>:百胜更新&amp;T3】百胜安装vim</p><p><b> openSUSE </b> : zypper更新&amp;T3】zypper安装vim</p><p> </p><p><strong> <span> <a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener noreferrer">购买Linux虚拟专用服务器</a> </span> </strong></p><p> </p><h3><span class="ez-toc-section" id="Why_should_I_want_to_learn_vi"/> <span>我为什么要学vi？</span>T3】</h3><p>在下文中，我们提到了学习vi的两个好理由。</p><p><strong>第一个</strong>、<b>第六个</b>总是<span>可用</span>，因为POSIX需要它。</p><p><strong>第二个</strong>，<b>第六个</b>不会消耗大量的系统资源，并且允许您执行任何可以想象的任务，而无需将手指从键盘上抬起。</p><p>而且<span> <strong>值得一提的是</strong></span>VI有非常丰富的内置手册，可以在程序启动后马上使用<b> : help </b>命令启动。该内置手册包含的信息比vi/m的手册页更多。</p><p> </p><h4><span class="ez-toc-section" id="Launching_vi"/> <span>发射vi </span> <span class="ez-toc-section-end"/></h4><p>在命令提示符下键入vi，启动vi</p><p><img data-lazyloaded="1" src="../Images/8b86650391294f074a4eb4583d4bd9f5.png" decoding="async" loading="lazy" class="aligncenter wp-image-9806 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/start-vi-editor.jpg" alt="starting vi editor" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/start-vi-editor.jpg 546w, https://blog.eldernode.com/wp-content/uploads/2020/07/start-vi-editor-300x169.jpg 300w" data-sizes="(max-width: 546px) 100vw, 546px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/start-vi-editor.jpg"/></p><p> </p><p>可以按下<strong> i </strong>进入<b>插入</b>模式，开始打字。但是另一种启动vi/m的方法是使用下面的命令，它将打开一个名为filename的新缓冲区，您可以稍后将它保存到磁盘。</p><pre><code class="language-bash">vi filename</code></pre><p> </p><h4><span class="ez-toc-section" id="Understanding_Vi_modes"/> <span>了解Vi模式</span> <span class="ez-toc-section-end"/></h4><ol><li>当您处于命令模式时，vi允许用户浏览文件并输入vi命令，这些命令是一个或多个字母的简短、区分大小写的组合。几乎所有的命令都可以以数字为前缀，重复命令的次数。</li><li>在<b> ex </b>模式下，可以操作文件。要进入此模式，您必须在命令模式下键入一个冒号(<b> : </b>)，后跟需要使用的ex-mode命令的名称。之后，vi自动返回命令模式。</li><li>在插入模式下，您只需输入文本。大多数击键都会导致文本出现在屏幕上。</li></ol><p><img data-lazyloaded="1" src="../Images/9b5665b4935b6cb45c53c82a18b99f19.png" decoding="async" loading="lazy" class="aligncenter wp-image-9807 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/vi-insert-mode.jpg" alt="insert mode" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/vi-insert-mode.jpg 128w, https://blog.eldernode.com/wp-content/uploads/2020/07/vi-insert-mode-90x300.jpg 90w" data-sizes="(max-width: 128px) 100vw, 128px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/vi-insert-mode.jpg"/></p><p> </p><h4><span class="ez-toc-section" id="Vi_commands"/> <span> Vi命令</span> <span class="ez-toc-section-end"/></h4><p>看看下面的列表，它总结了常用的vi命令。可以通过在命令后面附加感叹号来执行文件编辑命令。</p><p><b>键盘命令:描述</b></p><p><strong> h或向左箭头</strong>:向左移动一个字符</p><p><strong> j或向下箭头</strong>:向下一行</p><p><strong> k或向上箭头</strong>:向上一行</p><p><strong> l(小写L)或右箭头</strong>:向右移动一个字符</p><p><strong> H </strong>:转到屏幕顶部</p><p><strong> L </strong>:转到屏幕底部</p><p><strong> G </strong>:转到文件末尾</p><p><strong> W </strong>:向右移动一个单词</p><p><strong> b </strong>:向左移动一个单词</p><p><strong> 0(零)</strong>:转到当前行的开头</p><p><strong> ^ </strong>:转到当前行的第一个非空白字符</p><p><strong> $ </strong>:转到当前行的末尾</p><p><strong> Ctrl-B </strong>:返回上一屏</p><p><strong> Ctrl-F </strong>:前进一屏</p><p><strong> i </strong>:在当前光标位置插入</p><p><strong> I(大写i) </strong>:插入当前行的开头</p><p><strong> J(大写j) </strong>:将当前行与下一行合并(上移下一行)</p><p><strong> a </strong>:追加到当前光标位置之后</p><p><strong> o(小写O) </strong>:在当前行后创建一个空行</p><p><strong> O(大写o) </strong>:在当前行之前创建一个空行</p><p><strong> r </strong>:替换当前光标位置的字符</p><p><strong> R </strong>:在当前光标位置覆盖</p><p><strong> x </strong>:删除当前光标位置的字符</p><p><strong> X </strong>:删除当前光标位置之前(左侧)的字符</p><p><strong> dd </strong>:剪切当前整行(以备后贴)</p><p><strong> D </strong>:从当前光标位置切到行尾</p><p><strong> yX </strong>:给出移动命令X，从当前光标位置复制(猛拉)适当数量的字符、单词或行</p><p><strong> yy或Y </strong>:拉动(复制)当前整行</p><p><strong> P </strong>:粘贴在当前光标位置之后(下一行)</p><p><strong> p </strong>:粘贴到当前光标位置之前(前一行)</p><p><strong>。(句号)</strong>:重复最后一条命令</p><p><strong> u </strong>:撤销上一条命令</p><p><strong> U </strong>:撤销最后一行的最后一个命令。只要光标仍在该行上，这就会起作用。</p><p><strong> n </strong>:在搜索中找到下一个匹配</p><p><strong> N </strong>:在搜索中找到前一个匹配</p><p><strong> :n:下一个文件</strong>；当指定了多个文件进行编辑时，此命令将加载下一个文件。</p><p><strong> :e文件</strong>:加载文件代替当前文件。</p><p><strong> :r文件</strong>:在当前光标位置后(下一行)插入文件内容</p><p><strong> :q </strong>:不保存更改退出。</p><p><strong> :w文件</strong>:将当前缓冲区写入文件。要追加到现有文件，使用<strong> :w </strong> &gt; &gt;文件。</p><p><strong> :wq </strong>:写入当前文件内容并退出。相当于x！还有ZZ</p><p><strong> :r！命令</strong>:执行命令，在当前光标位置后(下一行)插入输出。</p><p> </p><h4/><h4><span class="ez-toc-section" id="Vi_Options"/> <span> Vi选项</span> <span class="ez-toc-section-end"/></h4><p>您可以在您的<b> ~/中添加以下选项。运行vim时可能会派上用场的vimrc </b>文件:</p><pre><code class="language-bash">echo set number &gt;&gt; ~/.vimrc  echo syntax on &gt;&gt; ~/.vimrc  echo set tabstop=4 &gt;&gt; ~/.vimrc  echo set autoindent &gt;&gt; ~/.vimrc</code></pre><p>如果您需要了解更多信息:</p><p><b> set number </b>当vi打开一个现有的或新的文件时显示行号。</p><p><b> syntax </b> on打开语法高亮显示(对于多个文件扩展名),以使代码和配置文件更具可读性。</p><p><b> set tabstop=4 </b>将制表符大小设置为4个空格(默认值为8)。</p><p><b> set autoindent </b>将前一个缩进带到下一行。</p><p> </p><h4><span class="ez-toc-section" id="Search_and_replace"/> <span>搜索并替换</span> <span class="ez-toc-section-end"/></h4><p>作为其中的一个新特性，我们可以提到vi具有基于搜索将光标移动到某个位置的能力。它还可以在用户确认或不确认的情况下执行文本替换。</p><p>1-在行内搜索:<b> f </b>命令搜索一行，并将光标移动到当前行中下一个出现的指定字符。</p><p><strong>一个例子:</strong>命令<b> fh </b>会将光标移动到当前行中字母<b> h </b>的下一个实例。请注意，字母<b> f </b>和您正在搜索的字符都不会出现在屏幕上的任何地方，但在您按下<b> Enter </b>后，该字符会高亮显示。</p><p>2-搜索整个文件:使用<b> / </b>命令，后跟要搜索的单词或短语。可以用<b> n </b>命令使用前一个搜索字符串或下一个重复搜索。这是在命令模式下键入<b>/简</b>的结果。</p><p> </p><p>3- vi使用命令在一系列行或整个文件上执行替换操作。要将整个文件中的单词“<b> old </b>改为“<b> young </b>，我们必须输入以下命令。</p><pre><code class="language-bash">:%s/old/young/g   </code></pre><p><b> <span>请注意</span> </b>命令开头的冒号。</p><p>冒号(<b> : </b>)开始ex命令，<span> <b> s </b> </span>在这种情况下，<b> % </b>是从第一行到最后一行的快捷方式含义，<b> old </b>是搜索模式，而<b> young </b>是替换文本，<span> <b> g </b> </span>表示应该对文件中搜索字符串的每一次出现进行替换。</p><p>为了在执行任何替换之前要求确认，可以在命令的末尾添加一个<span> <b> c </b> </span>。</p><pre><code class="language-bash">:%s/old/young/gc  </code></pre><figure id="attachment_9185" class="wp-caption aligncenter" aria-describedby="caption-attachment-9185"/><ol><li><b> y </b>:执行替换(是)</li><li><b> n </b>:跳过本次事件，转到下一次(否)</li><li><b> a </b>:在该模式的此实例和所有后续实例中执行替换。</li><li><b> q </b>或<b> Esc </b>:退出替代。</li><li><b> l </b> ( <b>小写L </b>):执行此替换并退出(最后)。</li><li><b> Ctrl-e </b>，<b> Ctrl-y </b>:分别向下和向上滚动，查看提议替换的上下文。</li></ol><p> </p><p> </p><h4><span class="ez-toc-section" id="Editing_Multiple_Files_at_a_Time"/> <span>一次编辑多个文件</span> <span class="ez-toc-section-end"/></h4><p>让我们在命令提示符下键入<b> vim file1 file2 file3 </b>。</p><pre><code class="language-bash">vim file1 file2 file3  </code></pre><p>您可以看到，vim将打开<b> file1。</b>但是你需要使用<b> :n </b>命令切换到下一个文件(<b>文件2 </b>)。而<b> : N </b>会在你想返回上一个文件的时候完成这项工作。接下来，从<b>文件1 </b>切换到<b>文件3 </b>。</p><p>1-<b>:buffers</b>命令将显示当前正在编辑的文件列表</p><pre><code class="language-bash">:buffers  </code></pre><p>2-命令<b>:缓冲器3 </b>将打开<b>文件3 </b>进行编辑。</p><p> </p><p> </p><h4><span class="ez-toc-section" id="Temporary_vi_buffers"/> <span>临时vi缓冲器</span> <span class="ez-toc-section-end"/></h4><p>要将几个连续的行复制到一个名为a的临时缓冲区中，并将这些行放在文件的另一部分，稍后放在当前vi部分:</p><p>1.按下<b> ESC </b>键，确保处于vi命令模式。</p><p>2.将光标放在要复制的文本的第一行。</p><p>3.键入"<b> a4yy </b>"将当前行以及随后的3行复制到名为a的缓冲区中。您可以继续编辑我们的文件——不需要立即插入复制的行。</p><p>4.当到达复制行的位置时，在<b> p </b>或<b> P </b>命令前使用<b> a </b>将复制的行插入到名为<b> a </b>的缓冲区中</p><ul><li>键入"<b> ap </b>将复制到缓冲区的行<span>T3a</span>插入光标所在的当前行之后。</li><li>键入"<b> aP </b>将复制到缓冲区的行插入到当前林之前的<span><strong/></span>。</li></ul><p> </p><p>如果您愿意，可以重复上述步骤，将缓冲区<span><strong/></span>的内容插入我们文件的多个位置。当当前窗口关闭时，一个临时缓冲区，如本节中的一个，被释放。</p><p><span> <strong>好样的</strong> </span>！通过完成本教程，您学习了如何安装和使用vi作为全文编辑器。你也看到了，<b> vi </b> / <b> m </b>是一个强大的、多功能的CLI文本编辑器。</p><p> </p><p>亲爱的用户，我们希望你能喜欢这个教程，你可以在评论区提出关于这个培训的问题，或者解决其他关于<span> <a href="https://eldernode.com/"> Eldernode培训</a> </span>领域的问题，请参考<span> <a href="https://eldernode.com/ask">提问页面</a> </span>部分并提出你的问题。</p></div></div>    
</body>
</html>