<html>
<head>
<title>How to Connect Node.js and MongoDB: A Comprehensive Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何连接Node.js和MongoDB:综合教程</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/connect-node-js-and-mongodb/#0001-01-01">https://blog.eldernode.com/connect-node-js-and-mongodb/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/08b06fdefebf6e9686fb8b1f057eb0c4.png" data-src="https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Connect Node.js and MongoDB" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2023/03/How-to-Connect-Node.js-and-MongoDB.webp"/><p>由于其存储和查询的类型，MongoDB数据库一直很受Node.js开发人员的欢迎。在本文中，我们打算全面教您如何连接Node.js和MongoDB。如果您想<a href="https://eldernode.com/vps/">购买VPS </a>服务器，您可以访问Eldernode网站上提供的各种计划。</p><h2><span class="ez-toc-section" id="Tutorial_Connect_Nodejs_and_MongoDB"/> <strong>教程连接Node.js和MongoDB</strong>T3】</h2><h3><span class="ez-toc-section" id="What_is_Nodejs"/><strong>node . js是什么？</strong>T3】</h3><p>Node.js是基于谷歌Chrome JavaScript引擎(V8引擎)的服务器端平台。节点。JS提供了运行用JavaScript编写的程序所需的一切。</p><p>Ryan Dahl先生介绍了Node。JS来展示JavaScript比仅仅用于前端动态网页更强大。事实上，在Node.js的帮助下，JavaScript编程语言正在服务器环境中执行，而不是在浏览器中。Node.js允许您轻松简单地编写可伸缩的大型网络应用程序。</p><p>自1995年以来，JavaScript一直在发展。虽然这种语言直到很久以前才在服务器端成功出现，并且程序员所做的努力随着时间的推移逐渐从其他开发人员的脑海中消失。直到2009年Node.js的引入，随着时间的推移，JavaScript在服务器端的使用越来越多。</p><h3><span class="ez-toc-section" id="What_are_the_uses_of_Nodejs"/>node . js有哪些用途？<span class="ez-toc-section-end"/></h3><p>允许程序员在服务器端运行他们的JavaScript代码的环境之一就是Node.js，在下面，我们将向您解释Node.js的一些重要应用。</p><p><strong> 1。创建单页应用程序(SPA) </strong></p><p>SPA是指所有部分都在一个页面中实现的程序。因为Node.js很好地支持异步编程，所以被认为是构建SPA应用程序的好选择。</p><p><strong> 2。制作RTA程序</strong></p><p>RTA代表实时应用程序。也就是实时有各种变化的程序。通常，交互式应用程序、项目管理工具、视频和音频会议以及其他RTA应用程序会执行繁重的I/O操作。</p><p><strong> 3。创建聊天室</strong></p><p>RTA应用程序最著名的例子之一是聊天室和信使。事实上，Node.js是构建聊天室的绝佳选择。如果你打算做这样的产品，你应该注意各种事情，如容忍大量的用户流量，产品的轻便性，发送消息的高速率等。所有这些都可以借助Node.js和Express.js这样的JavaScript框架在服务器端实现。</p><p><strong> 4。在网络浏览器下创建网络游戏</strong></p><p>借助Node.js，可以开发网页游戏。事实上，通过结合HTML5技术和JavaScript工具，你可以创建吸引人的2D游戏，如《上古野兽》或《绘画战争》。</p><h3><span class="ez-toc-section" id="What_is_MongoDB"/> <strong>什么是MongoDB？</strong>T3】</h3><p>MongoDB是最著名的非SQL数据库之一。该数据库具有灵活的结构，主要用于具有大量数据的项目。该数据库是一个免费的开源平台，使用面向文档的数据模型，可以在Windows、Macintosh和Linux上使用。存储在MongoDB中的数据值使用两个主键(主键)和辅键(辅键)。</p><p>MongoDB包含一个值数组。这些值以文档的形式存在，包含不同大小的不同类型的数据。这个问题使得MongoDB能够存储具有复杂结构的数据，如分层或数组数据。</p><h3><span class="ez-toc-section" id="Features_of_MongoDB"/><strong>MongoDB</strong>的特性<span class="ez-toc-section-end"/></h3><p>由于面向文档的数据存储模型，<a href="https://blog.eldernode.com/install-mongodb-on-windows/"> MongoDB </a>比关系数据库更加灵活和可伸缩，它解决了许多业务需求。</p><p>这个数据库使用分片来划分数据，更好地管理系统。分片意味着分成多个部分，并在网络的最高负载上完成。通过这种方式，数据库被分成几个子部分，以使响应来自服务器的请求的过程更容易。</p><p>可以使用两个主键和辅键来访问数据，并且每个字段都可以被键入。这使得数据访问和处理时间非常快。</p><p>复制是MongoDB的另一个重要特性。在这种技术中，副本是由作为主数据的数据和数据库系统的其他部分存储的数据组成的。如果此数据丢失或损坏，复制的数据将用作原始数据和替代数据。</p><p>在本文的其余部分，在学习了如何安装MongoDB Node.js驱动程序之后，我们将教您如何连接Node.js和MongoDB。</p><h3><span class="ez-toc-section" id="How_to_Install_the_MongoDB_Nodejs_Driver"/> <strong>如何安装MongoDB Node.js驱动</strong> <span class="ez-toc-section-end"/></h3><p>在这一节中，我们将教你如何安装MongoDB Node.js驱动程序。安装MongoDB Node.js驱动程序的原因是为了让您能够在Node.js应用程序中轻松地与MongoDB数据库进行交互。因此，您需要一个驱动程序来连接到数据库并执行您想要的活动。</p><p>您可以通过运行以下命令轻松安装MongoDB Node.js:</p><pre><code class="language-bash">npm install mongodb</code></pre><p>安装完MongoDB Node.js驱动程序后，现在应该创建一个免费的MongoDB Atlas集群。</p><p>考虑到您需要一个MongoDB数据库，我们建议您使用Atlas。应该注意的是，这个数据库是完全作为服务来管理的。</p><p>1.为此，只需转到Atlas并在空闲行中创建一个新的集群。</p><p>2.然后，您可以下载示例数据。</p><p>3.最后一步是为集群的连接做准备。</p><p>4.建立一个集群连接，你需要在Atlas中进入你的集群，点击<strong>连接</strong>。</p><p>5.然后将向您显示群集连接向导。</p><p><em>请注意，向导会要求您将当前IP地址添加到IP访问列表中。要添加IP，您需要创建一个MongoDB用户。</em></p><p>6.然后你需要选择一种连接方式。</p><p>7.在下一步中，您可以选择连接应用程序。</p><p><strong>注意:</strong>必须选择Node.js和3.6以上版本。</p><p>8.最后，您可以复制提供的连接字符串。</p><h2><span class="ez-toc-section" id="How_to_Connect_to_Database_from_a_Nodejs"/> <strong>如何从节点连接数据库. js </strong> <span class="ez-toc-section-end"/></h2><p>现在您可以了解如何连接Node.js和MongoDB。我们将编写一个连接到数据库的Node.js脚本。这样做会列出集群中的数据库。第一步是导入MongoClient。您可以使用以下命令来使用MongoClient的实例。这样，您可以使用连接到集群，访问该集群中的数据库，并关闭到该集群的连接:</p><pre><code class="language-bash">const {MongoClient} = require('mongodb');</code></pre><p>我们建议您在下一步创建一个名为main()的异步函数。使用您看到的这个函数，您将能够连接到您的MongoDB集群并调用所需的函数:</p><pre><code class="language-bash">async function main() {  // we'll add code here soon  }</code></pre><p>您必须在main()中为您的连接URI创建一个常量。粘贴连接字符串时，将<strong> &lt;用户名&gt; </strong>和<strong> &lt;密码&gt; </strong>更新为您在上一节中创建的用户凭证。</p><p>连接字符串包含一个<strong> &lt; dbname &gt; </strong>占位符。在以下命令中，考虑到使用了<strong> sample_airbnb </strong>数据库，需要将<strong> &lt; dbname &gt; </strong>替换为<strong> sample_airbnb </strong>:</p><pre><code class="language-bash">/**  * Connection URI. Update &lt;username&gt;, &lt;password&gt;, and &lt;your-cluster-url&gt; to reflect your cluster.  * See https://docs.mongodb.com/ecosystem/drivers/node/ for more details  */  const uri = "mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;your-cluster-url&gt;/test?retryWrites=true&amp;w=majority";</code></pre><p>创建一个MongoClient实例:</p><pre><code class="language-bash">const client = new MongoClient(uri);</code></pre><p>现在可以使用<strong> MongoClient </strong>连接到集群。client.connect()返回一个承诺。用<strong> await </strong>调用<strong> client.connect() </strong>意味着进一步的执行将被阻塞，直到该操作完成:</p><pre><code class="language-bash">await client.connect();</code></pre><p>在下一步中，创建一个函数来打印该集群中数据库的名称。因此，可以使用以下命令调用名为listDatabases()的函数:</p><pre><code class="language-bash">await list Databases(client);</code></pre><p>要处理错误，请通过执行以下命令来关闭对与数据库交互的函数的调用:</p><pre><code class="language-bash">try {  await client.connect();    await listDatabases(client);    } catch (e) {  console.error(e);  }</code></pre><p>运行以下命令以确保集群已关闭:</p><pre><code class="language-bash">finally {  await client.close();  }</code></pre><p>然后，您可以将错误发送到控制台:</p><pre><code class="language-bash">main().catch(console.error);</code></pre><p>最后，通过将main()函数和调用命令放在一起，它将类似于以下命令:</p><pre><code class="language-bash">async function main(){  /**  * Connection URI. Update &lt;username&gt;, &lt;password&gt;, and &lt;your-cluster-url&gt; to reflect your cluster.  * See https://docs.mongodb.com/ecosystem/drivers/node/ for more details  */  const uri = "mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;your-cluster-url&gt;/test?retryWrites=true&amp;w=majority";    const client = new MongoClient(uri);    try {  // Connect to the MongoDB cluster  await client.connect();    // Make the appropriate DB calls  await listDatabases(client);    } catch (e) {  console.error(e);  } finally {  await client.close();  }  }    main().catch(console.error);</code></pre><p>您可以列出集群中的数据库，并在输出中打印和查看结果:</p><pre><code class="language-bash">async function listDatabases(client){  databasesList = await client.db().admin().listDatabases();    console.log("Databases:");  databasesList.databases.forEach(db =&gt; console.log(` - ${db.name}`));  };</code></pre><p>保存文件以应用更改，并将其命名为类似于<strong> connect.js </strong>的名称。</p><h3><span class="ez-toc-section" id="How_to_Execute_Nodejs_Script"/> <strong>如何执行Node.js脚本</strong>T3】</h3><p>成功完成上述步骤后，现在是测试代码的时候了。因此，您可以在以下命令的帮助下轻松运行您的脚本:</p><pre><code class="language-bash">node connection.js</code></pre><p><strong>输出:</strong></p><p>数据库:<br/>–sample _ Airbnb<br/>–sample _地理空间<br/>–sample _ mflix<br/>–sample _ supplies<br/>–sample _ training<br/>–sample _ weather data<br/>–admin<br/>–local</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在这篇文章中，我们试图向您介绍Node.js和MongoDB。然后我们教你如何连接Node.js和MongoDB。如果您有任何问题，可以在评论区询问支持专家。</p></div></div>    
</body>
</html>