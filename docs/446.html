<html>
<head>
<title>How To Install Nagios Monitoring on Ubuntu 20.10 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.10 - Eldernode博客上安装Nagios监控</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-nagios-monitoring-on-ubuntu-20-10/#0001-01-01">https://blog.eldernode.com/install-nagios-monitoring-on-ubuntu-20-10/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/13c218e5697893099ac33356ae3bea4a.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How To Install Nagios Monitoring on Ubuntu 20.10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/How-To-Install-Nagios-Monitoring-on-Ubuntu-20.10.png"/><p>在接下来的<a href="https://blog.eldernode.com/website-and-server-monitoring-tools/" target="_blank" rel="noopener noreferrer">监控工具</a>教程中，我们将展示Nagios安装指南。在任何Linux操作系统上，都可以运行这个开源的网络监控系统。因为Nagios提供了关键参数的概述，所以您更喜欢在<a href="https://blog.eldernode.com/linux-server-monitoring-commands/" target="_blank" rel="noopener noreferrer">命令行</a>界面或基于web的图形界面中工作。一旦确定了能够修复检测到的网络或服务器问题的关键级别，管理员就会收到电子邮件和文本消息作为警报通知。准备好你自己的<a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener noreferrer"> Linux VPS </a>，继续和我们一起学习如何在Ubuntu 20.10服务器上安装Nagios Monitoring。</p><p>为了让本教程更好地发挥作用，请考虑下面的<strong>先决条件</strong> : <br/>一个拥有sudo权限的非根用户。</p><h2><span class="ez-toc-section" id="Tutorial_Install_Nagios_Monitoring_on_Ubuntu_2010"/>教程在Ubuntu 20.10上安装Nagios监控<span class="ez-toc-section-end"/></h2><p>为了维护系统和服务的安全性和可用性，您需要监控工具的帮助，以防止对您的业务产生任何负面影响。使用TCP端口、SMTP、POP3、HTTP、NNTP、PING等，Nagios能够监视网络细节。准备好一个<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener noreferrer"> Ubuntu VPS </a>之后，你就可以下载并安装Nagios了。让我们通过这个指南的步骤来学习和完成它。</p><h3><span class="ez-toc-section" id="How_To_Update_Your_System"/>如何更新您的系统<span class="ez-toc-section-end"/></h3><p>出于一些安全考虑，最好更新您的系统:</p><pre><code class="language-bash">sudo apt-get update</code></pre><p>注意:如果你最近安装了Ubuntu系统，你需要<a href="https://blog.eldernode.com/apache-web-server-ubuntu-20/" target="_blank" rel="noopener noreferrer"> Apache </a>和<a href="https://blog.eldernode.com/install-and-configure-php-on-ubuntu-20-04/" target="_blank" rel="noopener noreferrer"> PHP </a>。运行以下命令来安装它们:</p><pre><code class="language-bash">sudo apt-get install wget build-essential unzip openssl libssl-dev</code></pre><pre><code class="language-bash">sudo apt-get install apache2 php libapache2-mod-php php-gd libgd-dev</code></pre><h3 class="heading1"><span class="ez-toc-section" id="How_To_Create_A_Nagios_User"/>如何创建Nagios用户<span class="ez-toc-section-end"/></h3><p>安装前的第一步是在您的系统中为Nagios创建一个新的用户帐户。使用下面的命令在您的系统中创建一个:</p><pre><code class="language-bash">sudo adduser nagios</code></pre><p>要将您创建的用户添加到一个组中，您需要首先为Nagios设置“nagcmd”创建一个组。然后，将您的“nagios”用户添加到Apache组。</p><pre><code class="language-bash">sudo groupadd nagcmd</code></pre><pre><code class="language-bash">sudo usermod -a -G nagcmd nagios</code></pre><pre><code class="language-bash">sudo usermod -a -G nagcmd www-data</code></pre><h3 class="heading1"><span class="ez-toc-section" id="How_To_Install_Nagios_Core_Service"/>如何安装Nagios核心服务<span class="ez-toc-section-end"/></h3><p>是时候安装Nagios核心了。可以从<a href="https://www.nagios.org/downloads/" target="_blank" rel="noopener noreferrer">官方网站</a>免费领取最新版本的Nagios core。</p><pre><code class="language-bash">cd /opt/</code></pre><pre><code class="language-bash">wget https://assets.nagios.com/downloads/nagioscore/releases/nagios-4.4.5.tar.gz</code></pre><p>然后，要将文件移动到您选择的位置，通过运行以下命令提取文件:</p><pre><code class="language-bash">tar xzf nagios-4.4.5.tar.gz</code></pre><p>解压缩完成后，使用下面的命令导航到“nagios”源目录并安装。这样就可以用Ubuntu编译Nagios了。</p><pre><code class="language-bash">cd nagios-4.4.5</code></pre><pre><code class="language-bash">sudo ./configure --with-command-group=</code></pre><pre><code class="language-bash">sudo make all</code></pre><pre><code class="language-bash">sudo make install</code></pre><pre><code class="language-bash">sudo make install-init</code></pre><pre><code class="language-bash">sudo make install-daemoninit</code></pre><pre><code class="language-bash">sudo make install-config</code></pre><pre><code class="language-bash">sudo make install-commandmode</code></pre><pre><code class="language-bash">sudo make install-exfoliation</code></pre><p>要为Nagios web界面创建多个事件触发器，请在libexec目录下复制事件处理程序脚本。</p><p class="codecolorer-container bash default"/><h3 class="heading1"><span class="ez-toc-section" id="How_To_Setup_Apache_with_Authentication"/>如何设置Apache认证<span class="ez-toc-section-end"/></h3><p>要为Nagios服务器创建Apache配置文件，请运行:</p><pre><code class="language-bash">sudo vi /etc/apache2/conf-available/nagios.conf</code></pre><p>为了防止对配置进行更多的更改，请为用户nagiosadmin设置apache身份验证:</p><pre><code class="language-bash">htpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin</code></pre><p>然后，要使新设置生效，请启用Apache配置并重新启动Apache服务:</p><pre><code class="language-bash">sudo a2enconf nagios</code></pre><pre><code class="language-bash">sudo a2enmod cgi rewrite</code></pre><pre><code class="language-bash">sudo service apache2 restart</code></pre><h3><span class="ez-toc-section" id="How_To_Update_Your_Email_Address"/>如何更新您的电子邮件地址<span class="ez-toc-section-end"/></h3><p>您只需要运行下面的命令来编辑位于目录usr/local/nagios/etc/objects中的“contacts.cfg”文件，以包含我们希望接收通知的电子邮件地址。</p><pre><code class="language-bash">sudo gedit /usr/local/nagios/etc/objects/contacts.cfg</code></pre><h3 class="heading1"><span class="ez-toc-section" id="How_To_Install_Nagios_Plugins"/>如何安装Nagios插件<span class="ez-toc-section-end"/></h3><p>在这一步，您应该下载最新的nagios-plugins源代码并安装。要执行此运行，请执行以下操作:</p><pre><code class="language-bash">cd /opt</code></pre><pre><code class="language-bash">wget http://www.nagios-plugins.org/download/nagios-plugins-2.2.1.tar.gz/pre&gt;</code></pre><pre><code class="language-bash">tar xzf nagios-plugins-2.2.1.tar.gz/pre&gt;</code></pre><pre><code class="language-bash">cd nagios-plugins-2.2.1</code></pre><p>要编译和安装Nagios插件，请键入:</p><pre><code class="language-bash">sudo ./configure --with-nagios-user=nagios --with-nagios-group=nagios --with-openssl/pre&gt;</code></pre><pre><code class="language-bash">sudo make/pre&gt;</code></pre><pre><code class="language-bash">sudo make install</code></pre><h3 class="heading1"><span class="ez-toc-section" id="How_To_Verify_Settings"/>如何验证设置<span class="ez-toc-section-end"/></h3><p>要验证Nagios安装和配置文件，运行以下命令，然后就可以启动Nagios核心服务了。</p><pre><code class="language-bash">/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg</code></pre><pre><code class="language-bash">service nagios start</code></pre><p>要让Nagios在系统引导时自动启动，请通过运行以下命令来配置Nagios:</p><pre><code class="language-bash">sudo systemctl enable nagios</code></pre><h2><span class="ez-toc-section" id="How_To_Use_Nagios_On_Ubuntu"/>如何在Ubuntu上使用Nagios<span class="ez-toc-section-end"/></h2><p>您可以通过运行以下命令来确保配置是否正确可见:</p><div class="codecolorer-container bash default"><pre class="bash codecolorer"><code class="language-bash"><span class="kw2">sudo</span> <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>nagios<span class="sy0">/</span>bin<span class="sy0">/</span>nagios <span class="re5">-v</span></code></pre></div><h3 class="heading1"><span class="ez-toc-section" id="How_To_Access_Nagios_Web_Interface"/>如何访问Nagios Web界面<span class="ez-toc-section-end"/></h3><p>如果您访问nagios服务器，就可以访问您的nagios设置。为此，您需要使用主机名或ip地址后跟/nagios。</p><pre><code class="language-bash">http://eldernode.example.net/nagios/</code></pre><p>这样，您已经验证了Apache。用户名可以是nagiosadmin，密码是您在设置Apache的身份验证步骤时创建的。</p><p><img data-lazyloaded="1" src="../Images/1a2d8ef63b5dee5be3b41a3926155d57.png" decoding="async" loading="lazy" class="size-full wp-image-19374 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-login-page-1-1.png" alt="Login page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-login-page-1-1.png 909w, https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-login-page-1-1-300x139.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-login-page-1-1-768x356.png 768w" data-sizes="(max-width: 909px) 100vw, 909px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-login-page-1-1.png"/></p><p> </p><p>登录后，您可以查看如下所示的Nagios界面。也可以使用侧边栏按钮查看主机、服务和警报。</p><p><img data-lazyloaded="1" src="../Images/02b30d9ccc8f207c650cbd1ac3325fa9.png" decoding="async" loading="lazy" class="size-full wp-image-19375 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-dashboard-1.png" alt="The Dashboard of Nagios" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-dashboard-1.png 924w, https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-dashboard-1-300x190.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-dashboard-1-768x487.png 768w" data-sizes="(max-width: 924px) 100vw, 924px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/nagios-dashboard-1.png"/></p><p> </p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您学习了如何在Ubuntu 20.10上安装Nagios Monitoring。从现在开始，您可以使用这个最流行的工具来监控和解决您的服务器性能问题。如果您有兴趣了解更多信息，可以找到关于<a href="https://blog.eldernode.com/nagios-monitoring-system-for-linux/" target="_blank" rel="noopener noreferrer">的相关文章，介绍用于Linux的Nagios监控系统</a>。</p></div></div>    
</body>
</html>