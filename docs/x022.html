<html>
<head>
<title>5 Ways to Automate Your Linux Builds with Make Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Make文件自动化Linux构建的5种方法</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/5-ways-to-automate-your-linux-builds-with-make-files/#0001-01-01">https://blog.eldernode.com/5-ways-to-automate-your-linux-builds-with-make-files/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/e3dddc88cd4a59b8d4013e35b1214ec6.png" data-src="https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="5 Ways to Automate Your Linux Builds with Make Files" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2022/09/5-Ways-to-Automate-Your-Linux-Builds-with-Make-Files.webp"/><p>如果您的项目有许多文件，翻译和链接它们将需要时间。要解决这个问题，您可以将命令保存在项目旁边的一个名为Make File without extension的文本文件中，以特定格式翻译您的程序。本文将向您介绍用Make文件自动化Linux构建的5种方法。查看<a href="https://eldernode.com/"> Eldernode </a>网站上提供的软件包，购买自己的<a href="https://eldernode.com/linux-vps/">购买Linux VPS </a>主机。</p><h2><span class="ez-toc-section" id="Automating_Linux_Builds_with_Make_Files"/> <strong>用Make文件自动化Linux构建</strong> <span class="ez-toc-section-end"/></h2><p>Make是一个Unix实用程序，用于在更新特定文件时运行或更新任务，并且需要一个Make文件来定义一组要运行的任务。Make文件是编译软件项目所必需的一组命令，以特殊格式存储在文本文件中。如果在make文件目录中键入make，将执行make文件中的命令。Make文件还包含一个规则列表，它将告诉系统您想要执行什么命令。这里有5种用Make文件自动化你的<a href="https://blog.eldernode.com/using-tar-command-on-linux/"> Linux </a>构建的方法。</p><p>在这篇来自<a href="https://blog.eldernode.com/tag/linux/"> Linux培训</a>系列的文章的续篇中，您将学习如何以5种方式用Make文件自动化您的Linux构建。</p><h2><span class="ez-toc-section" id="1-_Install_GNU_Make"/> <strong> 1-安装GNU Make </strong> <span class="ez-toc-section-end"/></h2><p>GNU Make是一个从Make文件中获取知识来构建程序的工具。为每个非源文件制作文件列表，以及如何从其他文件中计算它们。控制从源文件程序生成程序的可执行文件和其他非源文件。事实上，GNU Make包含了从程序的源文件生成程序的可执行文件和其他非源文件。</p><p>在<a href="https://blog.eldernode.com/tag/kali-linux/" target="_blank" rel="noopener"> Linux </a>操作系统中，make程序可能已经安装。如果没有安装，请按照下面的说明进行安装。</p><p>如果你使用的是<strong> Ubuntu/Debian </strong>，输入以下命令安装<a href="https://blog.eldernode.com/install-gnu-octave-on-ubuntu-20-04/" target="_blank" rel="noopener"> GNU </a> Make:</p><pre><code class="language-bash">apt install make</code></pre><p>您可以通过安装发行版附带的开发工具来充分利用make:</p><pre><code class="language-bash">apt install build-essential</code></pre><p>要在<strong> Fedora/RHEL </strong>上安装GNU Make，运行以下命令:</p><pre><code class="language-bash">yum install make</code></pre><p>如果您想充分利用make，请安装如下所示的开发工具:</p><pre><code class="language-bash">yum groupinstall ‘Development Tools’</code></pre><p>在<strong> Arch/Manjaro </strong>上安装GNU Make，使用以下命令:</p><pre><code class="language-bash">pacman -S make</code></pre><p>输入以下命令安装开发工具:</p><pre><code class="language-bash">pacman -S base-devel</code></pre><h2><span class="ez-toc-section" id="2-_Create_a_new_directory_for_your_project"/> <strong> 2-为你的项目创建一个新目录</strong> <span class="ez-toc-section-end"/></h2><p>首先为你的项目创建一个新目录，运行以下命令:</p><pre><code class="language-bash">mkdir new-directory</code></pre><p>现在，使用下面的命令检查是否创建了目录:</p><pre><code class="language-bash">ls -l</code></pre><h2><span class="ez-toc-section" id="3-_Add_a_file_called_Makefile"/> <strong> 3-添加一个名为Makefile的文件</strong> <span class="ez-toc-section-end"/></h2><p>在第一步中，您应该导航到创建的目录以添加Makefile文件。为此，请运行以下命令:</p><pre><code class="language-bash">cd</code></pre><p>导航到该目录后，可以使用以下命令向其中添加Makefile:</p><pre><code class="language-bash">touch Makefile</code></pre><p>您也可以使用文本编辑器将Makefile添加到目录中，如下所示:</p><pre><code class="language-bash">nano Makefile</code></pre><p>您可以使用以下命令检查是否添加了文件:</p><pre><code class="language-bash">ls</code></pre><h2><span class="ez-toc-section" id="4-_Write_some_rules"/> <strong> 4-写一些规则</strong> <span class="ez-toc-section-end"/></h2><p>现在是时候为Makefile写一些规则了。如果要这样做，Makefile规则的一般语法如下:</p><pre><code class="language-bash">target [target...] : [dependent ....]  [ command ...]</code></pre><p>你可以在括号中写下你想要的参数，有可选的。请注意，省略号表示一个或多个，每个命令前需要有制表符。</p><p>例如，如果您想要定义一个规则，使您的目标从其他文件中hello，请编写如下规则:</p><pre><code class="language-bash">hello: main.o factorial.o hello.o  $(CC) main.o factorial.o hello.o -o hello</code></pre><p>如果命令返回失败状态，您应该使终止，如下所示:</p><pre><code class="language-bash">clean:  -rm *.o *~ core paper</code></pre><p>Make会忽略命令行上以破折号开头的返回状态。</p><p>每个人都希望Makefiles中有特定的目标。你可以期待所有的目标被发现制造，安装和清洗:</p><p><strong> 1- make all: </strong>编译所有东西，在安装应用程序之前进行本地测试。</p><p><strong> 2- make install: </strong>在正确的位置安装应用程序。</p><p><strong> 3-清理:</strong>清理应用程序，清除可执行文件、任何临时文件、目标文件等。</p><h2><span class="ez-toc-section" id="5-_Run_make"/> <strong> 5-润使</strong> <span class="ez-toc-section-end"/></h2><p>make实用程序在makefile被读取和解释时工作。要运行make，请输入以下命令:</p><pre><code class="language-bash">make</code></pre><p>现在GNU make将寻找一个名为makefile、Makefile或GNUmakefile的文件。一旦找到其中一个makefiles，就会构建第一个目标。</p><p>如果make找不到合适的makefile，您将看到以下错误:</p><pre><code class="language-bash">make: *** No targets specified and no makefile found. Stop.</code></pre><p>您可以使用<strong> -f </strong>选项来指定makefile。make命令语法如下:</p><pre><code class="language-bash">make -f &lt;i&gt;filename&lt;/i&gt;</code></pre><p>记住要替换makefile的名称，而不是文件名。</p><p>如果您想从makefile中定义的几个目标中构建一个特定的目标，请在运行make时使用下面的语法:</p><pre><code class="language-bash">make target</code></pre><p>就是这样！</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>Make Files定义了一组要执行的任务，您可以使用它从源代码编译程序。在本文中，我们向您介绍了使用Make文件自动化Linux构建的5种方法。如果你有任何问题或建议，可以在评论区联系我们。我希望这篇教程对你有用，并帮助你自动化你的Linux构建。</p></div></div>    
</body>
</html>