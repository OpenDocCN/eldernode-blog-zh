<html>
<head>
<title>How to Install and Configure Bacula on CentOS 8 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在CentOS 8 - Eldernode博客上安装和配置Bacula</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-and-configure-bacula-on-centos-8/#0001-01-01">https://blog.eldernode.com/install-and-configure-bacula-on-centos-8/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/c0be7a65cd5b78da85d5f34150b51e23.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Install and Configure Bacula on Centos 8" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Install-and-Configure-Bacula-on-Centos-8.png"/><p>Bacula是用于备份和恢复Linux的最流行和最广泛使用的解决方案之一。您可以完全在计算机上运行Bacula，并将数据备份到其他介质上，如磁盘和备份磁带。这非常高效，也相对容易使用。Bacula是模块化的，因为它采用模块化设计，可以在单台计算机上运行，也可以在拥有数百台设备的广域网上运行。在本文中，我们想一步一步地向您介绍如何在CentOS 8，7 上安装和配置Bacula。需要注意的是，如果你想购买一台<a href="https://eldernode.com/centos-vps/" target="_blank" rel="noopener"> CentOS VPS </a>服务器，你可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>中提供的软件包。</p><h2><span class="ez-toc-section" id="Tutorial_Install_and_Configure_Bacula_on_CentOS_8"/> <strong>教程在CentOS 8上安装和配置Bacula</strong><span class="ez-toc-section-end"/></h2><p>Bacula是一个开源应用程序，使您能够完成以下任务:</p><p>1-备份数据。</p><p>2-检查网络中的数据。</p><p>3-快速恢复损坏或丢失的文件。</p><p>在下一节中，我们将教您如何在<a href="https://blog.eldernode.com/tag/centos/"> CentOS </a> 8上安装Bacula。然后在最后一节中，我们将展示如何配置Bacula。请继续关注本文的其余部分。</p><h2><span class="ez-toc-section" id="Install_Bacula_on_CentOS_8_CentOS_7"/> <strong>在CentOS 8 | CentOS 7</strong>T3上安装Bacula</h2><p>在本节中，我们将讨论如何在CentOS 8上安装Bacula。注意Bacula可以和<strong> PostgreSQL </strong> <strong>数据库</strong> <strong>管理</strong> <strong>系统</strong>一起工作。因此，按顺序执行以下步骤就足够了:</p><pre><code class="language-bash">dnf install postgresql-server</code></pre><pre><code class="language-bash">postgresql-setup initdb</code></pre><pre><code class="language-bash">systemctl enable --now postgresql</code></pre><p>下一步是<strong>为Bacula创建一个用户</strong>。为此，请按顺序运行以下命令:</p><pre><code class="language-bash">sudo su - postgres</code></pre><pre><code class="language-bash">$ createuser bacula</code></pre><pre><code class="language-bash">$ psql</code></pre><pre><code class="language-bash">psql (10.14)</code></pre><pre><code class="language-bash">Type "help" for help.</code></pre><pre><code class="language-bash">postgres=# ALTER USER bacula PASSWORD 'bacula';</code></pre><pre><code class="language-bash">ALTER ROLE</code></pre><pre><code class="language-bash">postgres=# ALTER USER bacula LOGIN SUPERUSER CREATEDB CREATEROLE;</code></pre><pre><code class="language-bash">ALTER ROLE</code></pre><pre><code class="language-bash">postgres=# \q</code></pre><pre><code class="language-bash">$ exit</code></pre><pre><code class="language-bash">logout</code></pre><p>现在，您应该在<strong>/var/lib/pgsql/data/PostgreSQL . conf</strong>文件中取消对以下设置的注释:</p><pre><code class="language-bash">listen_addresses = 'localhost'</code></pre><p>现在您需要在<strong>/var/lib/pg SQL/data/pg _ HBA . conf</strong>文件中将连接配置更改为以下格式:</p><p> </p><p><img data-lazyloaded="1" src="../Images/3b8e1fa8ccbe637956b8074eefe7d6dc.png" decoding="async" loading="lazy" class="aligncenter wp-image-27328 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/connection-configuration-of-bacula-on-centos.png" alt="connection configuration of bacula on centos" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/connection-configuration-of-bacula-on-centos.png 743w, https://blog.eldernode.com/wp-content/uploads/2021/03/connection-configuration-of-bacula-on-centos-300x93.png 300w" data-sizes="(max-width: 743px) 100vw, 743px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/connection-configuration-of-bacula-on-centos.png"/></p><p> </p><p>最后，您必须使用以下命令<strong>重启</strong>服务以应用更改:</p><pre><code class="language-bash">systemctl restart postgresql.service</code></pre><p>在您成功安装Postgresql之后，现在我们来安装Bacula。第一步是使用以下命令安装Bacula组件:</p><pre><code class="language-bash">dnf install bacula-director bacula-storage bacula-console bacula-client</code></pre><p>您可以按照下面的说明创建数据库、表和权限。请注意，您必须代表新创建的Bacula用户运行它们:</p><pre><code class="language-bash">cd /usr/libexec/bacula/</code></pre><pre><code class="language-bash">sudo -u bacula ./create_postgresql_database</code></pre><pre><code class="language-bash">sudo -u bacula ./make_postgresql_tables</code></pre><pre><code class="language-bash">sudo -u bacula ./grant_postgresql_privileges</code></pre><h3><span class="ez-toc-section" id="How_to_Configure_Bacula_on_CentOS_8"/> <strong>如何在CentOS 8上配置Bacula</strong>T3】</h3><p>在本节中，我们将教您如何配置Bacula。需要注意的是，您可以使用以下命令创建任何文件夹来保存备份，并将bacula设置为其所有者:</p><pre><code class="language-bash">mkdir /opt/bacula</code></pre><pre><code class="language-bash">chown bacula:bacula /opt/bacula</code></pre><p>接下来，你需要打开<strong>/etc/bacula/bacula-dir . conf</strong>文件，找到名为<strong>全套</strong>的<strong>文件集</strong>部分。然后在这里的<strong>包含</strong>部分，可以设置备份需要的文件夹。在<strong>排除</strong>部分增加<strong> /opt/bacula </strong>:</p><pre><code class="language-bash">FileSet {  Name = "Full Set"  Include {  ...  File = /home/user  File = /folder/to/backup  }  Exclude {  File = /opt/bacula  …  }}</code></pre><p>成功完成上一步后，您现在应该打开<strong>/etc/bacula/bacula-SD . conf</strong>文件，并为两个<strong>设备</strong>设置<strong>归档设备= /opt/bacula </strong>:</p><pre><code class="language-bash">Device {  ...  Archive Device = /opt/bacula  ...  }</code></pre><p>现在，您可以使用以下命令启动服务:</p><pre><code class="language-bash">systemctl enable --now bacula-dir.service</code></pre><pre><code class="language-bash">systemctl enable --now bacula-fd.service</code></pre><pre><code class="language-bash">systemctl enable --now bacula-sd.service</code></pre><p>请注意，文件集的<strong> Include </strong>部分中指定的文件夹现在每天都进行备份。您可以使用以下命令进入<strong> Bacula管理控制台</strong>开始备份:</p><pre><code class="language-bash">bconsole</code></pre><p>然后输入<strong> run </strong>命令，按照指示进行操作。您可以使用<strong> restore </strong>命令来恢复文件。也可以进入<strong>状态</strong>查看已安排的作业，然后进入<strong> 1 </strong>。键入<strong> help </strong>查看所有可用命令。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>Bacula是一套计算机程序，允许您或系统管理员从技术上管理不同类型计算机网络上计算机数据的备份、恢复和验证。Bacula是一个基于网络的备份应用程序。尽管Bacula仍在销售，但它拥有许多高级存储管理功能，可以轻松找到丢失或损坏的文件。在本文中，我们试图教您如何在CentOS 8上安装和配置Bacula。</p></div></div>    
</body>
</html>