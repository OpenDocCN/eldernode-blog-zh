<html>
<head>
<title>How to Run Linux Containers on Windows Server 2019</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Windows Server 2019上运行Linux容器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/run-linux-containers-on-windows-server/#0001-01-01">https://blog.eldernode.com/run-linux-containers-on-windows-server/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/ca45955fcf6405a20d325cf7ae4e1d99.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Run Linux Containers on Windows Server 2019" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/How-to-Run-Linux-Containers-on-Windows-Server-2019.png"/><p>【更新】Windows上的Docker只运行Windows容器。要在Windows Server上使用Linux容器，您需要使用Docker企业版预览版，它包括一个完整的LinuxKit系统，用于运行Docker Linux容器。本文将教你如何在Windows Server 2019上运行Linux容器。你可以从<a href="https://eldernode.com/"> Eldernode </a>网站选择你最完美的<strong> <a href="https://eldernode.com/windows-vps/" target="_blank" rel="noopener noreferrer"> Windows VPS Server </a> </strong>套装。</p><h2><span class="ez-toc-section" id="Why_you_should_use_Linux_containers_on_Windows_Server_2019"/> <strong>为什么要在Windows Server 2019上使用Linux容器</strong> <span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="What_is_Docker_EE"/><strong>Docker EE是什么？</strong>T3】</h3><p>Docker EE代表Docker企业版，是为企业开发而设计的。它使得构建、运输和运行具有依赖性的业务关键型应用程序变得容易，并且避免了使用虚拟机时常见的疯狂的依赖性问题。这项技术是一个集成的、受支持的、经过认证的容器平台，适用于CentOS、Microsoft Windows服务器和Oracle Linux。此外，Docker EE支持AWS和微软Azure云提供商。</p><h2><span class="ez-toc-section" id="Install_Docker_on_Windows_Server_2019"/>在Windows Server 2019上安装Docker<span class="ez-toc-section-end"/></h2><p>在本节中，我们将解释如何在Windows Server 2019上运行<a href="https://blog.eldernode.com/tag/linux/" target="_blank" rel="noopener"> Linux </a>容器。为此，请遵循以下步骤并输入所需的命令。</p><p>首先，您应该启用Windows Server 2019容器功能。为此，请转到<strong> Windows服务器&gt; Windows Powershell </strong>并以管理员身份打开Powershell:</p><p> </p><p><img data-lazyloaded="1" src="../Images/8ee34928b0796f1fc776dc5ab66ed2db.png" decoding="async" loading="lazy" class="aligncenter wp-image-39816 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/1.-Run-PowerShell-as-Administrator.webp" alt="Run-PowerShell-as-Administrator" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/1.-Run-PowerShell-as-Administrator.webp 475w, https://blog.eldernode.com/wp-content/uploads/2020/07/1.-Run-PowerShell-as-Administrator-300x259.webp 300w" data-sizes="(max-width: 475px) 100vw, 475px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/1.-Run-PowerShell-as-Administrator.webp"/></p><p> </p><p>并使用以下命令从PowerShell Gallery安装Docker-Microsoft包管理提供程序:</p><pre><code class="language-bash">Install-Module -Name DockerMsftProvider -Repository PSGallery -Force</code></pre><p>启用容器后，可以使用下面的命令安装Docker引擎和客户端:</p><pre><code class="language-bash">Install-Package -Name docker -ProviderName DockerMsftProvider</code></pre><p>安装完成后，使用以下命令重新启动计算机:</p><pre class="wp-block-preformatted"><code class="language-bash">Restart-Computer -Force</code></pre><p>您可以使用下面的命令检查Docker版本:</p><pre><code class="language-bash">Get-Package -Name Docker -ProviderName DockerMsftProvider</code></pre><p>或者</p><pre><code class="language-bash">docker version</code></pre><h2><span class="ez-toc-section" id="How_to_Create_a_Container_Registry"/> <strong>如何创建容器注册表</strong> <span class="ez-toc-section-end"/></h2><p>安装后，您需要配置服务器以允许访问Docker Hub。</p><p>现在按照下面的步骤创建一个容器注册表:</p><p>–&gt;在导航栏上选择要创建注册表的项目。</p><p>–&gt;在项目侧边栏菜单上选择<strong>包&gt;新存储库</strong>。</p><p>–&gt;指定存储库设置，如选择容器注册表、指定注册表名称和描述、选择访问类型以及选择不可变标记名和不可变图像。</p><p>–&gt;单击“入门”查看命令行片段。</p><h2><span class="ez-toc-section" id="How_to_Deploy_and_Manage_Containers_using_PowerShell"/> <strong>如何使用PowerShell </strong>部署和管理容器<span class="ez-toc-section-end"/></h2><p>首先，通过输入以下命令启动Docker守护进程:</p><pre><code class="language-bash">start-service docker</code></pre><p>并下载预先创建的。使用以下命令从Docker Hub注册表中获取. NET示例映像:</p><pre><code class="language-bash">docker pull mcr.microsoft.com/dotnet/samples:dotnetapp-nanoserver-2009</code></pre><p>最后，您需要通过运行以下命令来部署一个运行. NET Hello World应用程序的简单容器:</p><pre><code class="language-bash">docker run mcr.microsoft.com/dotnet/samples:dotnetapp-nanoserver-2009</code></pre><p>恭喜，容器将启动并打印hello world消息。</p><h2><span class="ez-toc-section" id="Install_Docker_on_Windows_Server_2019-2"/>在Windows Server 2019上安装Docker<span class="ez-toc-section-end"/></h2><p>在执行任何操作之前，您应该使用以下命令卸载当前的Docker CE:</p><pre><code class="language-bash">Uninstall-Package -Name docker -ProviderName DockerMSFTProvider</code></pre><p>如果您使用在Hyper-V上运行的Linux虚拟机，请输入以下命令来启用嵌套虚拟化:</p><pre><code class="language-bash">Get-VM WinContainerHost | Set-VMProcessor -ExposeVirtualizationExtensions $true</code></pre><p>现在是时候安装预览Docker EE版本了。为此，请运行以下命令:</p><pre><code class="language-bash">Install-Module DockerProvider  Install-Package Docker -ProviderName DockerProvider -RequiredVersion preview</code></pre><p>然后，您需要使用下面的命令启用LinuxKit来运行Linux容器:</p><pre><code class="language-bash">[Environment]::SetEnvironmentVariable("LCOW_SUPPORTED", "1", "Machine")</code></pre><p>最后，使用以下命令重新启动Docker服务:</p><pre><code class="language-bash">Restart-Service docker</code></pre><p>您可以使用以下命令提取测试docker映像:</p><pre><code class="language-bash">docker run -it --rm ubuntu /bin/bash</code></pre><p>如果您想切换回运行Windows容器，请输入以下命令:</p><pre><code class="language-bash">[Environment]::SetEnvironmentVariable("LCOW_SUPPORTED", "$null", "Machine")</code></pre><p>就是这样！</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>用于windows服务器的Docker EE在Windows服务器上启用本机Docker容器。在这篇文章中，我们教你如何在Windows Server 2019上运行Linux容器。我们希望你喜欢这个教程，你可以在评论区提出关于这个培训的问题。</p></div></div>    
</body>
</html>