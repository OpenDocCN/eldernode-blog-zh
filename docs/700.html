<html>
<head>
<title>Introducing And Install Bacula On Ubuntu 20.04 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Ubuntu 20.04 - Eldernode博客上介绍和安装Bacula</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/introducing-and-install-bacula-on-ubuntu/#0001-01-01">https://blog.eldernode.com/introducing-and-install-bacula-on-ubuntu/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/d4d218c8a7f3194b51a1f04296ca6d01.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Introducing And Install Bacula On Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Introducing-And-Install-Bacula-On-Ubuntu-20.04.png"/><p>作为管理员，您需要一个程序来管理不同种类的计算机网络上的计算机数据的备份、恢复和验证。Bacula功能强大、易于使用且高效。它还可以完全在单台计算机上运行，并可以备份到各种类型的介质，包括磁带和磁盘。使用Bacula，您可以找到并恢复丢失或损坏的文件。由于Bacula采用模块化设计，因此它可以从小型单台计算机系统扩展到由位于大型网络上的数百台计算机组成的系统。本文介绍<strong>在Ubuntu 20.04 </strong>上介绍并安装Bacula。如果您准备购买完全托管的VPS，请依靠我们在<a href="https://eldernode.com/"> Eldernode </a>的技术团队来购买您自己的<strong> <a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener"> Ubuntu VPS </a> </strong>。</p><h2><span class="ez-toc-section" id="Introducing_Bacula_on_Ubuntu_Linux"/><strong>Ubuntu Linux上的Bacula介绍</strong> <span class="ez-toc-section-end"/></h2><p>之前，你已经在<a href="https://blog.eldernode.com/" target="_blank" rel="noopener"> Eldernode博客</a>上读到过<a href="https://blog.eldernode.com/how-to-backup-linux-vps/" target="_blank" rel="noopener">如何制作备份</a>及其工具。但首先让我们解释一下，Bacula本身并不是一个完整的灾难恢复系统。这是一个备份、恢复和验证程序，如果您仔细规划并遵循说明，它可以成为其中的一个关键部分。Bacula提供了许多特性。因此，如果您正在使用tar、dump或bru来备份您的计算机数据，并且您需要更灵活的网络解决方案或目录服务，Bacula是理想的选择。您应该是高级备份包的专家，因为Bacula比tar或dump更难设置和使用。</p><p>Bacula已经在OpenSuSE Linux、FreeBSD和Solaris系统上编译和运行。Bacula支持<a href="https://blog.eldernode.com/tag/linux/"> Linux </a>、<a href="https://blog.eldernode.com/tag/windows/" target="_blank" rel="noopener"> Windows </a>和macOS备份客户端。它由几个组件组成，包括:Bacula目录、Bacula、控制台、Bacula存储、Bacula文件、Bacula监视器和Bacula目录。控制台有三个版本:基于文本的命令行版本、基于Gnome的GTK+图形用户界面(GUI)界面和wxWidgets GUI界面。这些组件管理特定的作业。这些服务和应用程序可以在多个服务器和客户端上运行，或者如果备份单个磁盘或卷，它们可以安装在一台机器上。</p><p> </p><p><img data-lazyloaded="1" src="../Images/5cec089ced157596cbbb217c659710a4.png" decoding="async" loading="lazy" class="size-large wp-image-27081 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/01-Baculum-Bacula-Web-Interface-dashboard-1024x701.png" alt="Bacula Dashboard" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/01-Baculum-Bacula-Web-Interface-dashboard-1024x701.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/03/01-Baculum-Bacula-Web-Interface-dashboard-300x205.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/01-Baculum-Bacula-Web-Interface-dashboard-768x526.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/03/01-Baculum-Bacula-Web-Interface-dashboard.png 1416w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/01-Baculum-Bacula-Web-Interface-dashboard-1024x701.png"/></p><h2><span class="ez-toc-section" id="Install_Bacula_Backup_Server_On_Ubuntu_2004_Ubuntu_1804"/> <strong>在Ubuntu 20.04上安装Bacula备份服务器| Ubuntu 18.04 </strong> <span class="ez-toc-section-end"/></h2><p>看来你知道Bacula是最好的可联网的Linux备份解决方案。因此，让我们浏览一下本指南的步骤，并回顾一下在<a href="https://blog.eldernode.com/tag/ubuntu/"> Ubuntu </a> 20.04上安装Bacula的过程。</p><h3><span class="ez-toc-section" id="Prerequisites_to_Install_Bacula_On_Ubuntu_2004"/> <strong>在Ubuntu 20.04上安装Bacula的先决条件</strong> <span class="ez-toc-section-end"/></h3><p>为了让本教程更好地工作，请考虑以下先决条件:</p><p>_拥有Sudo权限的非root用户。</p><p>_要进行设置，请遵循我们在Ubuntu 20.04 上的<a href="https://blog.eldernode.com/initial-server-setup-on-ubuntu-20/" target="_blank" rel="noopener">初始服务器设置。</a></p><p>_至少2 GB内存。</p><p>如果您使用MySQL或PostgreSQL作为数据库，Bacula不会为您安装数据库，请尝试使用这些服务。</p><h3><span class="ez-toc-section" id="How_to_Install_and_Configure_Bacula_on_Ubuntu_Linux"/> <strong>如何在Ubuntu Linux上安装和配置Bacula</strong><span class="ez-toc-section-end"/></h3><p>加入我们的指南，学习如何在Ubuntu 20.04上安装Bacula。像往常一样，让我们从更新你的系统开始。因此，使用以下命令，将您的系统更新到最新的稳定版本:</p><pre><code class="language-bash">apt-get update -y</code></pre><p>Ubuntu 20.04中默认提供Bacula包。要安装它，只需运行一个简单的命令，然后继续:</p><pre><code class="language-bash">apt-get install bacula -y</code></pre><p>现在将提示您输入邮件服务器、系统邮件名称、为<strong> bacula-directory-pgsql </strong>配置数据库，并为Bacula PostgreSQL数据库配置密码。</p><p>选择您想要的<strong>邮件服务器</strong>，提供您的<strong>邮件名称</strong>，点击<strong>确定</strong>按钮。然后，您将被要求为bacula配置一个数据库。选择PostgreSQL服务器的主机，然后选择localhost。最后，您将被要求提供PostgreSQL密码</p><p><em> <strong>注意:</strong> </em>一旦你完成了这些，你将得到你的提示并可以继续配置。</p><p>在配置Bacula之前，您需要通过一个必需的步骤。您应该创建一个目录来存储备份文件。因此，键入:</p><pre><code class="language-bash">mkdir /backup</code></pre><p>现在，要将bacula目录的所有权更改为bacula用户和组，请运行以下命令:</p><pre><code class="language-bash">chown -R bacula:bacula /backup</code></pre><p>此时，编辑bacula存储默认配置文件，并定义存储设备和位置:</p><pre><code class="language-bash">nano /etc/bacula/bacula-sd.conf</code></pre><p>接下来，删除或注释掉其他“设备”和“自动转换器”部分，并添加以下行:</p><pre><code class="language-bash">Device {    Name = Local-device    Media Type = File    Archive Device = /backup    LabelMedia = yes; # lets Bacula label unlabeled media    Random Access = Yes;    AutomaticMount = yes; # when device opened, read it    RemovableMedia = no;    AlwaysOpen = no;    Maximum Concurrent Jobs = 5    }</code></pre><p>现在，您可以<strong>保存</strong>并关闭文件。使用以下命令重新启动Bacula存储服务:</p><pre><code class="language-bash">systemctl restart bacula-sd.service</code></pre><p>此外，您可以验证Bacula存储的状态:</p><pre><code class="language-bash">systemctl status bacula-sd</code></pre><p>应显示以下输出:</p><p> </p><p><img data-lazyloaded="1" src="../Images/7d26f1e8c653e6ae99ed336c36275ea7.png" decoding="async" loading="lazy" class="size-full wp-image-27098 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-10.png" alt="configure Bacula Storage" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-10.png 454w, https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-10-257x300.png 257w" data-sizes="(max-width: 454px) 100vw, 454px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-10.png"/></p><h3><span class="ez-toc-section" id="How_to_Configure_Bacula_Director_on_Ubuntu_2004"/> <strong>如何在Ubuntu 20.04上配置Bacula Director</strong><span class="ez-toc-section-end"/></h3><p>在此部分，您可以编辑Bacula director配置文件并提供您的存储位置。为此，请运行以下命令:</p><pre><code class="language-bash">nano /etc/bacula/bacula-dir.conf</code></pre><p>添加以下行，包括设备名称、存储名称、密码、作业等:</p><pre><code class="language-bash">Storage {    Name = ubuntu2004-sd # Must be equal to the "Name" parameter of the "Storage"    section in the /etc/bacula/bacula-sd.conf file    Address = 127.0.0.1    Password = "aFEH-0a3QycsbYQVcoy_VoUMhAHJQ00CD" # Password must match    the password in the /etc/bacula/bacula-sd.conf    Device = Local-device    Media Type = File    }    FileSet {    Name = "Local-file"    Include {    Options {    signature = MD5    }    File = /etc    }    }    Schedule {    Name = "LocalDaily"    Run = Full daily at 06:00    }    Job {    Name = "LocalBackup"    JobDefs = "DefaultJob"    Enabled = yes    Level = Full    FileSet = "Local-file"    Schedule = "LocalDaily"    Storage = ubuntu2004-sd    Write Bootstrap = "/var/lib/bacula/LocalhostBackup.bsr"    }</code></pre><p>同样，此时您可以保存并关闭文件。重新启动Bacula director服务以应用更改:</p><pre><code class="language-bash">systemctl restart bacula-dir</code></pre><p>使用以下命令验证Bacula director服务的状态</p><pre><code class="language-bash">systemctl status bacula-dir</code></pre><p>应显示以下输出:</p><p> </p><p><img data-lazyloaded="1" src="../Images/f0ed3f4a138aef5c614a8613f04d4290.png" decoding="async" loading="lazy" class="size-full wp-image-27103 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-11.png" alt="Configure Bacula Director" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-11.png 518w, https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-11-284x300.png 284w" data-sizes="(max-width: 518px) 100vw, 518px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-11.png"/></p><h3><span class="ez-toc-section" id="How_to_Verify_Backup_Job_on_Ubuntu_2004_using_Bacula"/> <strong>如何使用Bacula </strong> <span class="ez-toc-section-end"/>在Ubuntu 20.04上验证备份作业</h3><p>运行以下命令，并使用Bacula控制台运行您的第一个备份作业:</p><pre><code class="language-bash">bconsole</code></pre><p>连接后，您将看到以下输出:</p><p> </p><p><img data-lazyloaded="1" src="../Images/110c4250a5ef2d151d5544ff0e525e5f.png" decoding="async" loading="lazy" class="size-full wp-image-27110 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/e.png" alt="backup job output" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/e.png 516w, https://blog.eldernode.com/wp-content/uploads/2021/03/e-300x66.png 300w" data-sizes="(max-width: 516px) 100vw, 516px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/e.png"/></p><p>现在，您可以使用以下命令启动备份作业:</p><pre><code class="language-bash">*run</code></pre><p>接下来，将要求您选择备份作业，如下所示:</p><p> </p><p><img data-lazyloaded="1" src="../Images/b4500619dff0a669312f47b706cf6c60.png" decoding="async" loading="lazy" class="size-full wp-image-27112 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/aa.png" alt="select the backup job" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/aa.png 380w, https://blog.eldernode.com/wp-content/uploads/2021/03/aa-300x192.png 300w" data-sizes="(max-width: 380px) 100vw, 380px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/aa.png"/></p><p>要查看以下输出，请键入2以选择您在配置文件中定义的LocalBackup，然后按Enter键:</p><p> </p><p><img data-lazyloaded="1" src="../Images/7eb0dd0e99633f28026aeba13f67259e.png" decoding="async" loading="lazy" class="size-full wp-image-27114 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-12.png" alt="LocalBackup output" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-12.png 353w, https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-12-300x281.png 300w" data-sizes="(max-width: 353px) 100vw, 353px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-12.png"/></p><p>备份作业现在开始。运行以下命令检查备份作业的状态:</p><pre><code class="language-bash">*status</code></pre><p>然后，将要求您选择以下组件的状态:</p><p> </p><p><img data-lazyloaded="1" src="../Images/110fb5d1fa6fed3f44b575dc57498857.png" decoding="async" loading="lazy" class="size-full wp-image-27116 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-13.png" alt="Backup job output" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-13.png 411w, https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-13-300x174.png 300w" data-sizes="(max-width: 411px) 100vw, 411px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-13.png"/></p><p>要查看以下输出，请键入1并按Enter键，以检查控制器的状态:</p><p> </p><p><img data-lazyloaded="1" src="../Images/9a5772332d7eeda9a60671b2b527ef6a.png" decoding="async" loading="lazy" class="size-full wp-image-27117 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-14.png" alt="status of the Director output" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-14.png 688w, https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-14-300x277.png 300w" data-sizes="(max-width: 688px) 100vw, 688px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Untitled-14.png"/></p><p>同样，通过运行以下命令检查Bacula存储的状态:</p><pre><code class="language-bash">*status</code></pre><p>下面的输出应该显示:</p><p> </p><p><img data-lazyloaded="1" src="../Images/45a99140572675a49b67cc9edbcd6569.png" decoding="async" loading="lazy" class="size-large wp-image-27120 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/p-511x1024.png" alt="Bacula storage output" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/p-511x1024.png 511w, https://blog.eldernode.com/wp-content/uploads/2021/03/p-150x300.png 150w, https://blog.eldernode.com/wp-content/uploads/2021/03/p.png 643w" data-sizes="(max-width: 511px) 100vw, 511px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/p-511x1024.png"/></p><p>此时，您可以从Bacula控制台退出。所以，运行:</p><pre><code class="language-bash">*exit</code></pre><p>然后，使用以下命令验证备份目录:</p><pre><code class="language-bash">ls /backup/</code></pre><p>最后，您可以看到创建了Vol-0001备份:</p><pre><code class="language-bash">Vol-0001</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，我们向您介绍了Bacula，并且您了解了如何在Ubuntu 20.04上安装Bacula。从现在开始，您可以通过在远程计算机上安装Bacula客户端来保护您的客户端系统。告诉您在<a href="https://community.eldernode.com/"> Eldernode community </a>上的朋友您是否正在使用该程序，或者您是否找到了替代方案。</p></div></div>    
</body>
</html>