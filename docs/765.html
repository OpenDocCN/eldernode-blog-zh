<html>
<head>
<title>Tutorial Install Pleroma on Ubuntu 20.04 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在Ubuntu 20.04上安装ple Roma-elder node博客</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-pleroma-on-ubuntu/#0001-01-01">https://blog.eldernode.com/install-pleroma-on-ubuntu/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/106479f9d8e137630d5b13af072e830f.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install Pleroma on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-Pleroma-on-Ubuntu-20.04.png"/><p>Pleroma是一个基于开放的OStatus和ActivityPub标准的社交网络微博服务器。使用Pleroma服务器软件的服务器可以根据这些标准与其他服务器交换用户消息和帖子。在这篇文章中，我们将一步一步地教你关于在Ubuntu 20.04上安装Pleroma的教程。如果你想购买一台<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener"> Ubuntu VPS </a>服务器，你可以访问<a href="https://eldernode.com/"> Eldernode </a>中提供的软件包。</p><h2><span class="ez-toc-section" id="How_to_Install_Pleroma_on_Ubuntu_2004"/> <strong>如何在Ubuntu 20.04上安装Pleroma</strong><span class="ez-toc-section-end"/></h2><p>Pleroma是一个联邦社交网络平台，兼容Mastodon和其他ActivityPub实现。在本文的第一部分，我们将提到在Ubuntu 20.04上安装Pleroma的先决条件。然后我们想教你如何配置防火墙。执行完这些步骤，就到了主要部分，也就是如何安装Pleroma。在您完成安装Pleroma后，我们将对其进行配置，在最后一步，我们将教您如何一步一步地安装Pleroma。请继续关注本文的其余部分。</p><h3><span class="ez-toc-section" id="Prerequisites_to_Install_Pleroma_on_Ubuntu_2004"/> <strong>在Ubuntu 20.04上安装Pleroma的先决条件</strong> <span class="ez-toc-section-end"/></h3><p>在Ubuntu 20.04上安装Pleroma之前，您需要提供以下先决条件:</p><p>_ Ubuntu VPS服务器</p><p>_非根Sudo用户</p><p>然后，您需要使用以下命令来确保一切都是最新的:</p><pre><code class="language-bash">sudo apt update</code></pre><pre><code class="language-bash">sudo apt upgrade</code></pre><p>您还需要使用以下命令并安装一些软件包和依赖项:</p><pre><code class="language-bash">sudo apt install wget curl gnupg2 ca-certificates lsb-release gnupg zip libncurses5 libmagic-dev -y</code></pre><p>下一步，你需要<strong>安装PostgreSQL </strong>。所以您可以<strong>通过运行以下命令将官方PostgreSQL存储库</strong>添加到Ubuntu资源列表中:</p><pre><code class="language-bash">sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'</code></pre><p>然后，您需要添加存储库GPG键:</p><pre><code class="language-bash">wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -</code></pre><p>现在，您需要通过运行以下命令来更新系统软件包列表:</p><pre><code class="language-bash">sudo apt update</code></pre><p>安装Pleroma之前必须安装的最后一个先决条件是Nginx。您可以使用以下命令<strong>安装Nginx </strong>:</p><pre><code class="language-bash">sudo apt install nginx</code></pre><h3><span class="ez-toc-section" id="How_to_Configure_Firewall_to_Install_Pleroma_on_Ubuntu_2004"/> <strong>如何配置防火墙在Ubuntu 20.04上安装Pleroma</strong><span class="ez-toc-section-end"/></h3><p>准备好Preroma安装先决条件后，第二步是配置防火墙。需要注意的是，Ubuntu默认自带UFW。因此，您应该运行以下命令来检查防火墙是否正在运行:</p><pre><code class="language-bash">sudo ufw status</code></pre><p><strong>输出:</strong></p><pre><code class="language-bash">Status: inactive</code></pre><p>下一步是运行以下命令来允许SSH端口，以便防火墙不会通过启用它来中断当前连接:</p><pre><code class="language-bash">sudo ufw allow OpenSSH</code></pre><p>您还需要对<strong> HTTP </strong>和<strong> HTTPS </strong>端口进行同样的操作:</p><pre><code class="language-bash">sudo ufw allow 80</code></pre><pre><code class="language-bash">sudo ufw allow 443</code></pre><p>最后，您可以使用以下命令启用防火墙:</p><pre><code class="language-bash">sudo ufw enable</code></pre><pre><code class="language-bash">Command may disrupt existing ssh connections. Proceed with operation (y|n)? y</code></pre><p>您现在可以通过运行以下命令来检查防火墙的<strong>状态:</strong></p><pre><code class="language-bash">sudo ufw status</code></pre><h2><span class="ez-toc-section" id="Install_Pleroma_on_Ubuntu_2004_Ubuntu_1804"/> <strong>在Ubuntu 20.04上安装Pleroma | Ubuntu 18.04</strong><span class="ez-toc-section-end"/></h2><p>成功完成前面的步骤后，现在我们来看看如何安装Pleroma。按照下面的步骤一步一步来就可以了。在本文中，我们将从<strong> OTP版本</strong>安装Pleroma。因此，在第一步中，您必须创建一个没有登录能力的Pleroma用户。还应该注意，下面的命令在<strong> /opt/pleroma </strong>中创建一个主目录。</p><pre><code class="language-bash">sudo adduser --system --shell /bin/false --home /opt/pleroma pleroma</code></pre><p>在转到Pleroma用户之前，您需要通过执行以下命令转到<strong>根用户</strong>:</p><pre><code class="language-bash">sudo su</code></pre><pre><code class="language-bash">su pleroma -s $SHELL -l</code></pre><p>现在是时候使用下面的命令将Pleroma 下载到一个临时位置了</p><pre><code class="language-bash">curl "https://git.pleroma.social/api/v4/projects/2/jobs/artifacts/stable/download?job=amd64" -o /tmp/pleroma_amd64.zip</code></pre><p>然后，您必须使用以下命令<strong>提取</strong>下载的文件:</p><pre><code class="language-bash">unzip /tmp/pleroma_amd64.zip -d /tmp/</code></pre><p>现在您可以轻松地<strong>安装Pleroma </strong>:</p><pre><code class="language-bash">mv /tmp/release/* /opt/pleroma</code></pre><p>在安装Pleroma后的下一步中，您需要<strong>删除临时文件</strong>:</p><pre><code class="language-bash">rm -rf /tmp/pleroma_amd64.zip /tmp/release</code></pre><p>现在，您可以通过执行exit命令切换到root用户:</p><pre><code class="language-bash">exit</code></pre><p>另一个要点是，下一步您需要<strong>为上传和公共文件创建一个目录</strong>:</p><pre><code class="language-bash">mkdir -p /var/lib/pleroma/{uploads,static}</code></pre><p>您可以使用以下命令<strong>创建一个丛配置</strong> <strong>列表</strong>:</p><pre><code class="language-bash">mkdir -p /etc/pleroma</code></pre><p>最后，您可以通过运行以下命令将Pleroma目录的所有权更改为Pleroma用户:</p><pre><code class="language-bash">chown -R pleroma /var/lib/pleroma /etc/pleroma</code></pre><h3><span class="ez-toc-section" id="How_to_Configure_Pleroma_on_Ubuntu_2004"/> <strong>如何在Ubuntu 20.04上配置ple Roma</strong><span class="ez-toc-section-end"/></h3><p>在您完全熟悉如何安装上一节中的Pleroma后，我们现在要配置它。您必须首先使用以下命令返回到Pleroma用户:</p><pre><code class="language-bash">su pleroma -s /bin/bash -l</code></pre><p>使用以下命令生成Pleroma示例配置文件:</p><pre><code class="language-bash">./bin/pleroma_ctl instance gen --output /etc/pleroma/config.exs --output-psql /tmp/setup_db.psql</code></pre><p>你会被问到一些问题。如果没有错误发生，您可以忽略这些问题。注意，您需要为您的数据库选择一个强密码。如果您想从管理面板配置您的实例，为数据库中的配置存储问题选择“<strong> y </strong>”。</p><p>在此步骤中，您必须通过执行以下命令，转到安装<a href="https://blog.eldernode.com/install-postgresq-ubuntu-18-04/"> PostgreSQL </a>时创建的默认<strong> PostgreSQL用户</strong>:</p><pre><code class="language-bash">exit</code></pre><pre><code class="language-bash">su postgres -s /bin/bash -l</code></pre><p>然后<strong>可以使用SQL文件创建一个数据库</strong>:</p><pre><code class="language-bash">psql -f /tmp/setup_db.psql</code></pre><p>成功创建数据库后，您需要通过执行以下命令返回到Pleroma用户:</p><pre><code class="language-bash">exit</code></pre><pre><code class="language-bash">su pleroma -s /bin/bash -l</code></pre><p>最后，您可以运行以下命令<strong>初始化我们刚刚创建的数据库</strong>，并转到<strong>根用户</strong>:</p><pre><code class="language-bash">./bin/pleroma_ctl migrate</code></pre><pre><code class="language-bash">exit</code></pre><h3><span class="ez-toc-section" id="How_to_Setup_roma_on_Linux_Ubuntu_2004"/> <strong>如何在Linux Ubuntu 20.04上设置Roma</strong>T3】</h3><p>在本节中，您需要在启动Pleroma之前配置Nginx。您可以通过将Nginx移动到<strong>/etc/Nginx/sites-available</strong>目录来安装它。</p><pre><code class="language-bash">mv /opt/pleroma/installation/pleroma.nginx /etc/nginx/sites-available/pleroma.conf</code></pre><p>然后，在下一步中，您需要使用以下命令将所有的<strong> example.tld </strong>事件替换为您的域:</p><pre><code class="language-bash">sed -i 's/example\.tld/example.com/g' /etc/nginx/sites-available/pleroma.conf</code></pre><p>现在，您需要使用文本编辑器(如nano)打开配置文件进行编辑:</p><pre><code class="language-bash">nano /etc/nginx/sites-available/pleroma.conf</code></pre><p>现在你应该<strong>取消对位置<strong>~/</strong>的注释。知名/极致挑战</strong>街区。配置文件的服务器块应该如下所示:</p><pre><code class="language-bash">server {  server_name example.com;    listen 80;  listen [::]:80;    location ~ /\.well-known/acme-challenge {  root /var/lib/letsencrypt/;  }    location / {  return 301 https://$server_name$request_uri;  }  }</code></pre><p>完成更改后，您可以使用<strong> Ctrl+X </strong>组合键<strong>保存</strong>文件并退出。</p><p>是时候通过运行以下命令来<strong>启用Pleroma </strong> <strong> Nginx </strong>配置了:</p><pre><code class="language-bash">ln -s /etc/nginx/sites-available/pleroma.conf /etc/nginx/sites-enabled/pleroma.conf</code></pre><p>您还必须使用以下命令<strong>启用Nginx服务器</strong>,以便在引导时启动它:</p><pre><code class="language-bash">systemctl enable nginx</code></pre><pre><code class="language-bash">systemctl start nginx</code></pre><p>注意，您需要在发行版中安装Pleroma <strong> systemd </strong>服务单元文件。为此，请使用以下命令:</p><pre><code class="language-bash">mv /opt/pleroma/installation/pleroma.service /etc/systemd/system/pleroma.service</code></pre><p>最后，您可以通过执行以下命令来<strong>启用</strong>和<strong>启动</strong>Pleroma服务:</p><pre><code class="language-bash">systemctl enable pleroma</code></pre><pre><code class="language-bash">systemctl start pleroma</code></pre><p>完成本教程中提到的所有步骤后，你现在可以在你的网页浏览器中打开<strong>https://example.com</strong>来访问Pleroma。</p><p> </p><p><img data-lazyloaded="1" src="../Images/fd3ace162966517fbc9f9bc5b4cd9cf1.png" decoding="async" loading="lazy" class="aligncenter wp-image-30797 size-large" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/pleroma-home-1024x796.png" alt="pleroma-home" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/pleroma-home-1024x796.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/05/pleroma-home-300x233.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/05/pleroma-home-768x597.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/05/pleroma-home.png 1032w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/pleroma-home-1024x796.png"/></p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，我们试图首先向您介绍Pleroma。然后我们提到了安装Pleroma的先决条件。我们还配置了防火墙。完成所有这些步骤后，我们一步步教你如何在Ubuntu 20.04上安装Pleroma。最后，介绍了如何配置和设置Pleroma。如果您对本次培训有任何疑问，可以在本帖下方或在<a href="https://community.eldernode.com/">社区</a>版块发表评论。</p></div></div>    
</body>
</html>