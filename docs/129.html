<html>
<head>
<title>How to run or repeat a Linux command every X seconds forever - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何每隔X秒运行或重复一个Linux命令</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/run-repeat-linux-command/#0001-01-01">https://blog.eldernode.com/run-repeat-linux-command/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/47adbf136b1ebf31247f1f139da5e29e.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to run or repeat a Linux command every X seconds forever" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2126.png"/><p>一个Linux系统管理员需要知道一些Linux技巧。在本文中，您将学习<strong>如何永远每X秒运行或重复一个Linux命令</strong>。</p><p>您可能需要在某段时间内重复运行一个命令。使用简单的cron命令，可以轻松完成这些任务。</p><p>按照本指南学习简单的脚本技术，在默认情况下，每3秒钟监视或关注一个类似于top command的连续运行状态的特定命令。</p><p> </p><h2><span class="ez-toc-section" id="How_to_run_or_repeat_a_Linux_command_every_X_seconds_forever"/> <span>如何每隔X秒运行或重复一条Linux命令</span> <span class="ez-toc-section-end"/></h2><p>让我们不要放弃，开始讨论为什么您需要如此频繁地运行命令的原因，并回答如何永远每隔X秒运行或重复一个<span> <a href="https://www.linux.org/" target="_blank" rel="noopener noreferrer"> Linux </a>命令</span>。</p><h3><span class="ez-toc-section" id="Use_watch_Command"/> <span>使用</span>手表命令<span class="ez-toc-section-end"/></h3><p>为了使用监视命令，您将能够定期执行命令或程序，并在屏幕上显示您的输出。这样就可以及时看到程序输出。间隔可以很容易地改变，以满足您的要求，也看重新运行命令/程序每2秒钟。该间隔可以容易地改变。</p><p> </p><h4><span class="ez-toc-section" id="Monitor_Memory_Usage"/> <span>监控内存使用情况</span> <span class="ez-toc-section-end"/></h4><p>因为使用“Watch”非常容易，所以您可以通过立即启动Linux终端并键入以下命令来测试它:</p><pre><code class="language-bash">watch free -m</code></pre><p>使用上述命令后，将检查您的系统空闲内存，并且每两秒钟更新一次free命令的结果。</p><p>如果您需要隐藏标题，显示有关更新间隔、正在执行的命令和当前时间的信息，请使用<span> -t </span>选项。</p><p>然后，使用<span> -n </span>选项更改执行间隔，让它指定命令执行的间隔。要每10秒运行一次你的<span> script.sh </span>文件，你可以这样做:</p><pre><code class="language-bash">watch -n 10 script.sh</code></pre><p>因此，在运行上面的命令之后，您将需要将<span> cd </span>到脚本所在的目录，或者指定该脚本的完整路径。</p><p>看看下面的选项，看看其他手表命令有用的选项。</p><ol><li><span>-b</span>–如果命令的退出非零，则发出嘟嘟声。</li><li><span>-c</span>–解释ANSI颜色序列。</li><li><span>-d</span>–突出显示命令输出的变化。</li></ol><p> </p><p><span> <a href="https://eldernode.com/bitcoin-vps/" target="_blank" rel="noopener noreferrer">用比特币买VP</a></span></p><p> </p><h4><span class="ez-toc-section" id="Monitor_Logged-In_Users_Uptime_and_Load_Average"/> <span>监控登录用户、正常运行时间和平均负载</span> <span class="ez-toc-section-end"/></h4><p>要继续此步骤，请使用以下命令。</p><pre><code class="language-bash">watch uptime</code></pre><p>按下<span> CTRL+C </span>退出命令。</p><p>这里，默认情况下，'<span> uptime </span>'命令将每2秒运行并显示更新的结果。</p><p> </p><h4><span class="ez-toc-section" id="Monitor_Progress_of_Copy_Command"/> <span>监控复制进度命令</span> <span class="ez-toc-section-end"/></h4><p>正如您所猜测的，在Linux中，当使用<span> cp </span>命令将文件从一个位置复制到其他位置时，数据的进度不会显示出来。使用watch命令，查看数据复制的进度。</p><pre><code class="language-bash">cp ubuntu-15.10-desktop-amd64.iso /home/noodi/ &amp;  watch -n 0.1 du -s /home/tecmint/ubuntu-15.10-desktop-amd64.iso</code></pre><div class="QmZWSe"><p class="DHcWmd">或者，您可以转到高级复制命令，该命令在复制时显示数据的进度。</p></div><p> </p><h3><span class="ez-toc-section" id="Use_sleep_Command"/> <span>使用</span>睡眠命令<span class="ez-toc-section-end"/></h3><p>Sleep在许多有用的情况下使用，其中两个通常用于调试shell脚本，当与<span>结合用于</span>或<span>而</span>循环时，您可以获得非常棒的结果。</p><p>但是，如果这是你第一次听说“<span> sleep </span>命令，请不要担心，它是用来将某些事情延迟一段特定的时间。在脚本中，您可以使用它来告诉您的脚本运行命令1，等待10秒钟，然后运行命令2。</p><p>有了上面的循环，您可以告诉bash运行一个命令，休眠<strong> N </strong>秒，然后再次运行该命令。</p><p>让我们看看这两个循环的例子:</p><h4><span class="ez-toc-section" id="for_loop_Example"/> <span>为循环示例</span> <span class="ez-toc-section-end"/></h4><pre><code class="language-bash">for i in {1..10}; do echo -n "This is a test in loop $i "; date ; sleep 5; done</code></pre><p>上面的一行程序将运行echo命令并显示当前日期，总共运行10次，两次执行之间有5秒钟的间隔。</p><p><span>输出</span></p><pre><code class="language-bash">This is a test in loop 1 Wed Feb 17 20:49:47 EET 2016  This is a test in loop 2 Wed Feb 17 20:49:52 EET 2016  This is a test in loop 3 Wed Feb 17 20:49:57 EET 2016  This is a test in loop 4 Wed Feb 17 20:50:02 EET 2016  This is a test in loop 5 Wed Feb 17 20:50:07 EET 2016  This is a test in loop 6 Wed Feb 17 20:50:12 EET 2016  This is a test in loop 7 Wed Feb 17 20:50:17 EET 2016  This is a test in loop 8 Wed Feb 17 20:50:22 EET 2016  This is a test in loop 9 Wed Feb 17 20:50:27 EET 2016  This is a test in loop 10 Wed Feb 17 20:50:32 EET 2016</code></pre><p>此外，请考虑您可以用自己的命令或脚本更改<strong>回声</strong>和<strong>日期</strong>命令，并根据您的需要更改睡眠间隔。</p><p> </p><h4><span class="ez-toc-section" id="while_loop_Example"/> <span> while循环示例</span> <span class="ez-toc-section-end"/></h4><pre><code class="language-bash">while true; do echo -n "This is a test of while loop";date ; sleep 5; done</code></pre><p><span>输出</span></p><pre><code class="language-bash">This is a test of while loopWed Feb 17 20:52:32 EET 2016  This is a test of while loopWed Feb 17 20:52:37 EET 2016  This is a test of while loopWed Feb 17 20:52:42 EET 2016  This is a test of while loopWed Feb 17 20:52:47 EET 2016  This is a test of while loopWed Feb 17 20:52:52 EET 2016  This is a test of while loopWed Feb 17 20:52:57 EET 2016</code></pre><p>在被用户终止或中断之前，上面的命令将一直运行。如果你想在后台运行一个命令，而又不想依赖于<strong> corn </strong>的话，这是非常有用的。</p><p> </p><p><span> <strong>请注意</strong> </span>:在使用上述方法时，强烈建议您设置一个足够长的时间间隔，以便在下一次执行之前，给命令足够的时间来完成运行。</p><p><strong> <span>请考虑</span> </strong>:本教程中的示例很有用，但并不意味着完全取代<span> cron </span>实用程序。由你来决定哪一种更适合你，但是如果我们必须将两种技术的使用分开，我会这样说:</p><ul><li>当您需要定期运行命令时，甚至在系统重新启动后，也可以使用cron。</li><li>对于要在当前用户会话中运行的程序/脚本，使用本教程中介绍的方法。</li></ul><p> </p><p><strong>亲爱的用户</strong>，我们希望本教程如何每隔X秒运行或重复一次<span> <a href="https://eldernode.com/tag/linux-tricks/"> Linux </a> </span>命令永远对你有所帮助，要问任何问题或查看我们用户关于本文的对话，请访问<span> <a href="https://eldernode.com/ask" target="_blank" rel="noopener noreferrer">提问页面</a> </span>。也为了提高自己的知识，准备了这么多有用的教程<span> <a href="https://eldernode.com/blog/" target="_blank" rel="noopener noreferrer"> Eldernode培训</a> </span>。</p><p> </p><p> </p><p><strong>不要错过一些相关文章:</strong></p><p class="fjpost-title px-0"><strong> <a href="https://eldernode.com/ss-command-monitor-network-connections/" target="_blank" rel="noopener noreferrer"> ss命令示例监控网络连接</a> </strong></p><p class="fjpost-title px-0"><strong><a href="https://eldernode.com/linux-commands-with-examples/" target="_blank" rel="noopener noreferrer">Linux A到Z命令概述及示例</a> </strong></p></div></div>    
</body>
</html>