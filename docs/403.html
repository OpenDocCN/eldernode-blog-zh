<html>
<head>
<title>Setup private DNS Server in Debian 10 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Debian 10 - Eldernode博客中设置私有DNS服务器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/private-dns-server-in-debian-10/#0001-01-01">https://blog.eldernode.com/private-dns-server-in-debian-10/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/3c69f296405c81a94841bb6797c10990.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Set up private DNS Server in Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Set-up-private-DNS-Server-in-Debian-10.png"/><p>了解如何在Debian 10 Linux 中一步步设置私有DNS服务器。Bind是一种DNS服务，它为您的ip地址分配一个唯一的名称，这实际上称为域名。这使得在互联网上甚至在局域网(LAN)上解析ip地址变得更加容易。一个网络只能有一个域名。当域名解析为其ip地址时，此操作被标识为正向区域，当ip地址引用其名称时，它被称为反向区域。在这篇文章中，我们试着教你<strong>如何在Debian 10 </strong>中建立一个私有DNS服务器。可以在<a href="https://eldernode.com/" target="_blank" rel="noopener noreferrer"> Eldernode </a>到<a href="https://eldernode.com/vps/" target="_blank" rel="noopener noreferrer">购买VPS </a>服务器访问各种套餐。</p><h2><span class="ez-toc-section" id="Setup_private_DNS_Server_in_Debian_10"/> <strong>在Debian 10 </strong>中设置私有DNS服务器<span class="ez-toc-section-end"/></h2><p>Bind代表伯克利互联网域名，在Linux中被称为DNS服务。Bind是我们将在本文中安装的最流行的域名服务之一。在本教程中，我们将首先安装Bind，然后在第二步中，我们将在内部网络中构建一个区域。和我们在一起。</p><h2><span class="ez-toc-section" id="Tutorial_Setup_private_DNS_Server_in_Debian_10"/>教程在Debian 10中设置私有DNS服务器<span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="How_to_install_and_adjust_Bind_in_Debian_10_Linux"/>如何在Debian 10 Linux中安装和调整Bind<span class="ez-toc-section-end"/></h3><p><strong> 1。</strong>首先，设置好你的Debian 10主机。</p><p>请注意，主机名必须是<a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name" target="_blank" rel="noopener noreferrer"> FQDN </a>，域名必须是您想要使用的域。<strong>比如</strong>，问题中的域名是<strong> eldernode.local </strong>，我们把服务器<strong>叫做Srv.eldernode.com</strong>。</p><p><strong> 2。然后输入下面的命令，用最新的更新来装备你的Debian:</strong></p><pre><code class="language-bash">apt update</code></pre><p><strong> 3。</strong>完全更新后，重新启动系统一次。</p><pre><code class="language-bash">reboot</code></pre><h3><span class="ez-toc-section" id="How_to_install_Bind_in_Debian_Stretch"/>如何在Debian Stretch中安装Bind<span class="ez-toc-section-end"/></h3><p><strong> 1。</strong>输入以下命令来安装绑定服务和软件包:</p><pre><code class="language-bash">apt -y install bind9 bind9utils dnsutils</code></pre><p><strong> 2。</strong>安装后，使用以下命令启动绑定服务:</p><pre><code class="language-bash">systemctl start bind9</code></pre><h3><span class="ez-toc-section" id="Learn_how_to_set_Bind_in_Debian_10_and_build_Zone"/>了解如何在Debian 10中设置Bind并构建Zone <span class="ez-toc-section-end"/></h3><p><strong> 1。</strong>用编辑器打开<strong> etc/bind/named.conf </strong>文件:</p><pre><code class="language-bash">vi /etc/bind/named.conf</code></pre><p>输入以下语句来设置绑定存储文件及其工作方式:</p><pre><code class="language-bash">include "/etc/bind/named.conf.options";</code></pre><pre><code class="language-bash">include "/etc/bind/named.conf.local";</code></pre><pre><code class="language-bash"># add</code></pre><pre><code class="language-bash">include "/etc/bind/named.conf.internal-zones";</code></pre><p>到目前为止，您已经熟悉了Bind的安装和设置。现在，我们将为内部网络构建一个区域。</p><p><strong> 2。</strong>用编辑器打开<strong>etc/bind . named . conf . internal-zones</strong>文件。</p><p>该文件与在绑定设置中添加的文件相同。如果您已更改其名称，则必须在此部分添加相同的名称:</p><pre><code class="language-bash">vi /etc/bind/named.conf.internal-zones</code></pre><p><strong> 3。</strong>然后复制并粘贴以下语句，创建并设置一个区域:</p><pre><code class="language-bash"># create new  # define for internal section  view "internal" {          match-clients {                  localhost;                  <span>10.0.0.0/24</span>;          };          # set zone for internal          zone "<span>eldernode.local</span>" {                  type master;                  file "/etc/bind/<span>srv.eldernode.local</span>";                  allow-update { none; };          };          # set zone for internal *note          zone "<span>0.0.10</span>.in-addr.arpa" {                  type master;                  file "/etc/bind/<span>0.0.10.db</span>";                  allow-update { none; };          };          include "/etc/bind/named.conf.default-zones";  };</code></pre><p><em> <strong>注意:</strong> </em>在上述语句中，注意在变红的字段中，必须输入您的域名、IP范围和反向区域名称。</p><h3><span class="ez-toc-section" id="How_to_determine_the_Bind_Response_Range_private_DNS_Server_in_Debian_10"/>如何确定绑定响应范围(Debian 10中的私有DNS服务器)<span class="ez-toc-section-end"/></h3><p>现在，如果您需要设置绑定服务器响应范围，您应该执行以下操作。</p><p><strong> 1。</strong>用编辑器打开<strong>etc/bind/named . conf . options/</strong>文件。</p><pre><code class="language-bash">vi /etc/bind/named.conf.options</code></pre><p><strong> 2。</strong>然后输入以下命令，限制Bind响应特定的IP范围:</p><pre><code class="language-bash">options {            directory "/var/cache/bind";           # query range you allow          allow-query { localhost; 10.0.0.0/24; };          # the range to transfer zone files          allow-transfer { localhost; 10.0.0.0/24; };          # recursion range you allow          allow-recursion { localhost; 10.0.0.0/24; };            dnssec-validation auto;            auth-nxdomain no;    # conform to RFC1035          # change if not use IPV6          listen-on-v6 { none; };  };</code></pre><p>这里完成了内部网络的绑定和区域构建的安装和调整。</p><p>添加或编辑每个区域以及使用以下命令提到的文件后，必须重新启动绑定服务一次:</p><pre><code class="language-bash">systemctl restart bind9</code></pre><p><em> <strong>注意:</strong></em>DNS服务将使用端口53以及TCP和UDP协议，因此在您的系统防火墙中为这两种协议打开该端口。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>也许DNS的主要目的是方便网络请求。记住名称总是很容易的，这就是为什么我们给每个网络的ip地址分配一个名称的原因。在这篇文章中，我们试图教你如何在Debian 10中建立一个私有的DNS服务器。如果你也对<a href="https://blog.eldernode.com/tag/ubuntu/"> Ubuntu </a>发行版感兴趣，可以参考文章<a href="https://blog.eldernode.com/private-dns-server-on-ubuntu-20-04/">如何在ubuntu 20.04 </a>上设置私有DNS服务器。</p></div></div>    
</body>
</html>