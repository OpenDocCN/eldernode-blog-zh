<html>
<head>
<title>How to Install SoftEther VPN Server on Ubuntu 20.04</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.04上安装SoftEther VPN服务器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-softether-vpn-server-on-ubuntu-20/#0001-01-01">https://blog.eldernode.com/install-softether-vpn-server-on-ubuntu-20/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/248bfd468d0703e3f239fd6490978d00.png" data-src="https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Install SoftEther VPN Server on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2022/10/How-to-Install-SoftEther-VPN-Server-on-Ubuntu-20.04-1.webp"/><p>如果你想访问防火墙网络下完全保护的内容，SoftEther是一个很好的选择。此外，如果您使用的是不安全的互联网连接，最好使用SoftEther VPN协议来保护您正在尝试做的事情。如果您使用此协议，您的地理位置将从另一个国家注册，您将能够访问基于特定地理位置的有限内容。本文将教你如何在Ubuntu 20.04上安装SoftEther VPN服务器。你可以查看<a href="https://eldernode.com/"> Eldernode </a>网站上提供的软件包，购买自己的<a href="https://eldernode.com/ubuntu-vps/"> <strong> Ubuntu VPS </strong> </a>服务器。</p><h2><span class="ez-toc-section" id="What_is_SoftEther_VPN_Server"/> <strong>什么是SoftEther VPN服务器？</strong>T3】</h2><p>SoftEther VPN协议是一个开发和分发SoftEther VPN的免费、开源、跨平台和多协议的VPN程序。这是从微软购买OpenVPN和其他基于SSTP的VPN协议的替代方案。该协议提供高速和低延迟的客户端访问。由SoftEther VPN创建的VPN隧道是高度安全的，并且它们具有非常低的数据漏洞风险。此外，SoftEther VPN协议提供AES和RSA加密，具有出色的性能，非常高的速度，以及NAT和DNS功能。</p><p>在这篇来自<a href="https://blog.eldernode.com/tag/ubuntu/"> Ubuntu培训</a>系列的文章的续篇中，您将学习如何在Ubuntu 20.04上安装SoftEther VPN服务器。</p><h3><span class="ez-toc-section" id="Prerequisites_to_Install_SoftEther_VPN_Server_on_Ubuntu"/> <strong>在Ubuntu上安装SoftEther VPN服务器的先决条件</strong> <span class="ez-toc-section-end"/></h3><p>以下是在Ubuntu 20.04上安装SoftEther VPN服务器的先决条件:</p><p>–运行Ubuntu 20.04 server for VPN服务器的服务器</p><p>–运行Ubuntu 20.04 server for VPN client的服务器</p><p>–在两台服务器上配置超级用户密码</p><h2><span class="ez-toc-section" id="Install_SoftEther_VPN_Server_on_Ubuntu_2004"/> <strong>在Ubuntu 20.04上安装SoftEther VPN服务器</strong>T3】</h2><p>我们先去解释一下Ubuntu 20.04上SoftEther VPN服务器的安装方法。为此，只需遵循以下步骤:</p><p>首先，使用以下命令更新系统包缓存:</p><pre><code class="language-bash">apt-get update</code></pre><p>现在，您应该通过运行以下命令来安装其他必需的依赖项:</p><pre><code class="language-bash">apt-get install build-essential gnupg2 gcc make</code></pre><p>这一步就是从其<a href="https://www.softether-download.com/en.aspx?product=softether">官网</a>下载SoftEther VPN最新版本的时候了。此外，您可以使用下面的命令来完成此操作:</p><pre><code class="language-bash">wget http://www.softether-download.com/files/softether/v4.38-9760-rtm-2021.08.17-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.38-9760-rtm-2021.08.17-linux-x64-64bit.tar.gz</code></pre><p>下载完成后，通过输入以下命令提取下载的文件:</p><pre><code class="language-bash">tar -xvzf softether-vpnserver-v4.38-9760-rtm-2021.08.17-linux-x64-64bit.tar.gz</code></pre><p>转到您将下载文件解压缩到的目录。然后通过运行以下命令安装SoftEther VPN服务器:</p><pre><code class="language-bash">cd vpnserveer</code></pre><pre><code class="language-bash">make</code></pre><p>接下来，您必须将提取的目录移动到<strong> /ust/local目录</strong>，如下所示:</p><pre><code class="language-bash">cd ..</code></pre><pre><code class="language-bash">mv vpnserver /usr/local</code></pre><p>并为vpnserver目录设置适当的权限:</p><pre><code class="language-bash">cd /usr/local/vpnserver/</code></pre><pre><code class="language-bash">chmod 600 *</code></pre><pre><code class="language-bash">chmod 700 vpnserver</code></pre><pre><code class="language-bash">chmod 700 vpncmd</code></pre><h3><span class="ez-toc-section" id="Creating_a_Systemd_Service_File_for_SoftEther_VPN"/> <strong>为软交换VPN </strong>创建Systemd服务文件<span class="ez-toc-section-end"/></h3><p>您可以通过创建系统服务文件来管理SoftEther <a href="https://blog.eldernode.com/installing-vpn-on-windows-server-2012/"> VPN </a>服务。为此，请运行以下命令:</p><pre><code class="language-bash">nano /etc/init.d/vpnserver</code></pre><p>现在添加下面的行:</p><pre><code class="language-bash">#!/bin/sh  # chkconfig: 2345 99 01  # description: SoftEther VPN Server  DAEMON=/usr/local/vpnserver/vpnserver  LOCK=/var/lock/subsys/vpnserver  test -x $DAEMON || exit 0  case "$1" in  start)  $DAEMON start  touch $LOCK  ;;  stop)  $DAEMON stop  rm $LOCK  ;;  restart)  $DAEMON stop  sleep 3  $DAEMON start  ;;  *)  echo "Usage: $0 {start|stop|restart}"  exit 1  esac  exit 0</code></pre><p>保存文件并关闭它。</p><p>接下来，输入以下命令创建所需的目录，并为系统服务文件设置适当的权限:</p><pre><code class="language-bash">mkdir /var/lock/subsys  chmod 755 /etc/init.d/vpnserver</code></pre><p>要启动SoftEther VPN，请运行以下命令:</p><pre><code class="language-bash">/etc/init.d/vpnserver start</code></pre><p>最后，您可以在系统重新启动时启动SoftEther VPN服务。为此，请使用下面的命令:</p><pre><code class="language-bash">update-rc.d vpnserver defaults</code></pre><h2><span class="ez-toc-section" id="How_to_Configure_SoftEther_VPN_Server_on_Ubuntu_2004"/> <strong>如何在Ubuntu 20.04上配置SoftEther VPN服务器</strong> <span class="ez-toc-section-end"/></h2><p>在本节中，您将了解如何在Ubuntu 20.04上配置SoftEther VPN服务器。</p><p>首先，您应该使用以下命令将目录更改为<strong> /usr/local/vpnserver </strong>:</p><pre><code class="language-bash">cd /usr/local/vpnserver  ./vpncmd</code></pre><p>如果提示您选择VPN组件，请键入<strong> 1 </strong>并按两次<strong> Enter </strong>:</p><pre><code class="language-bash">By using vpncmd program, the following can be achieved.    1. Management of VPN Server or VPN Bridge  2. Management of VPN Client  3. Use of VPN Tools (certificate creation and Network Traffic Speed Test Tool)    Select 1, 2 or 3: 1</code></pre><p>现在，您应该使用下面的命令设置密码:</p><pre><code class="language-bash">ServerPasswordSet</code></pre><p>如果要创建集线器并设置密码，请输入以下命令:</p><pre><code class="language-bash">HubCreate myhub</code></pre><p>要进入集线器，请运行以下命令:</p><pre><code class="language-bash">Hub myhub</code></pre><p>您可以使用以下命令允许集线器作为虚拟局域网工作:</p><pre><code class="language-bash">SecureNatEnable</code></pre><p>现在是创建VPN用户的时候了。为此，请运行以下命令:</p><pre><code class="language-bash">UserCreate vpnuser</code></pre><p>要为VPN用户设置密码，请使用以下命令:</p><pre><code class="language-bash">UserPasswordSet vpnuser</code></pre><p>通过启用IPsec，您可以让多协议工作。为此，请运行以下命令:</p><pre><code class="language-bash">IPsecEnable</code></pre><p>接下来，回答如下所示的所有问题:</p><pre><code class="language-bash">IPsecEnable command - Enable or Disable IPsec VPN Server Function  Enable L2TP over IPsec Server Function (yes / no): yes    Enable Raw L2TP Server Function (yes / no): yes    Enable EtherIP / L2TPv3 over IPsec Server Function (yes / no): yes    Pre Shared Key for IPsec (Recommended: 9 letters at maximum): vpnserver    Default Virtual HUB in a case of omitting the HUB on the Username: myhub    The command completed successfully.</code></pre><p>要退出VPN配置，只需运行以下命令:</p><pre><code class="language-bash">exit</code></pre><p>在最后一步中，您应该使用以下命令配置UFW防火墙，以允许端口443、5555、992和1194通过:</p><pre><code class="language-bash">ufw allow 443/tcp  ufw allow 5555/tcp  ufw allow 992/tcp  ufw allow 1194/udp</code></pre><p>并重新加载UFW防火墙:</p><pre><code class="language-bash">ufw reload</code></pre><h3><span class="ez-toc-section" id="Installing_SoftEther_VPN_Client_on_Ubuntu_2004"/> <strong>在Ubuntu 20.04上安装软以太VPN客户端</strong> <span class="ez-toc-section-end"/></h3><p>一旦成功安装了SoftEther VPN服务器，您需要在客户端机器上安装SoftEther VPN客户端。首先，使用以下命令安装所需的依赖项:</p><pre><code class="language-bash">apt-get install build-essential gnupg2 gcc make</code></pre><p>要下载最新版本的SoftEther VPN客户端，请运行以下命令:</p><pre><code class="language-bash">wget http://www.softether-download.com/files/softether/v4.38-9760-rtm-2021.08.17-tree/Linux/SoftEther_VPN_Client/64bit_-_Intel_x64_or_AMD64/softether-vpnclient-v4.38-9760-rtm-2021.08.17-linux-x64-64bit.tar.gz</code></pre><p>下载完成后，使用以下命令提取下载的文件:</p><pre><code class="language-bash">tar -xvzf softether-vpnclient-v4.38-9760-rtm-2021.08.17-linux-x64-64bit.tar.gz</code></pre><p>现在，您应该通过运行以下命令创建一个目录来存储VPN客户端脚本:</p><pre><code class="language-bash">mkdir /root/vpnscript</code></pre><p>然后导航到VPN脚本下载页面并下载所有脚本:</p><pre><code class="language-bash">cd /root/vpnscript  </code></pre><pre><code class="language-bash">wget https://raw.githubusercontent.com/mfaizanse/intellexlab-files/main/softether-vpn-client/remove-client.sh</code></pre><pre><code class="language-bash">wget https://raw.githubusercontent.com/mfaizanse/intellexlab-files/main/softether-vpn-client/setup-client.sh  </code></pre><pre><code class="language-bash">wget https://raw.githubusercontent.com/mfaizanse/intellexlab-files/main/softether-vpn-client/vpn-connect.sh</code></pre><pre><code class="language-bash">wget https://raw.githubusercontent.com/mfaizanse/intellexlab-files/main/softether-vpn-client/vpn-disconnect.sh</code></pre><pre><code class="language-bash">wget https://raw.githubusercontent.com/mfaizanse/intellexlab-files/main/softether-vpn-client/vpn_config</code></pre><p>下载完成后，您应该为下载的脚本设置适当的权限:</p><pre><code class="language-bash">chmod 755 *3</code></pre><p>现在，您必须编辑<strong> vpn_config </strong>文件，并通过运行以下命令定义您的vpn客户端目录、VPN服务器IP、VPN用户名和本地网关IP:</p><pre><code class="language-bash">nano vpn_config</code></pre><p>并添加以下几行:</p><pre><code class="language-bash">CLIENT_DIR="/root/vpnclient"  NIC_NAME="Marilyn"  ACCOUNT_NAME="vpnuser"  VPN_HOST_IPv4="vpn-server-ip"  LOCAL_GATEWAY="gateway-ip-of-client-machine"</code></pre><p>保存并关闭文件。</p><p>现在使用以下命令设置VPN客户端:</p><pre><code class="language-bash">./setup-client.sh</code></pre><p>您应该提供您的VPN服务器IP、端口、集线器名称、VPN用户名、虚拟适配器名称和密码，如下所示:</p><pre><code class="language-bash">Connected to VPN Client "localhost".    VPN Client&gt;AccountCreate vpnuser  AccountCreate command - Create New VPN Connection Setting  Destination VPN Server Host Name and Port Number: IpNumber:Port    Destination Virtual Hub Name: myhub    Connecting User Name: vpnuser    Used Virtual Network Adapter Name: Marilyn    The command completed successfully.    vpncmd command - SoftEther VPN Command Line Management Utility  SoftEther VPN Command Line Management Utility (vpncmd command)  Version 4.38 Build 9760 (English)  Compiled 2021/08/17 22:32:49 by buildsan at crosswin  Copyright (c) SoftEther VPN Project. All Rights Reserved.    Connected to VPN Client "localhost".    VPN Client&gt;AccountPassword vpnuser  AccountPasswordSet command - Set User Authentication Type of VPN Connection Setting to Password Authentication  Please enter the password. To cancel press the Ctrl+D key.    Password: **********  Confirm input: **********      Specify standard or radius: radius    The command completed successfully.</code></pre><p>要连接到VPN服务器，请运行以下命令:</p><pre><code class="language-bash">./vpn-connect.sh</code></pre><p>最后，您将看到一个名为vpn_Marilyn的新VPN接口已经创建。要进行检查，请运行以下命令:</p><pre><code class="language-bash">ifconfig</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>SoftEther VPN服务器是一款VPN软件，是OpenVPN和Microsoft VPN服务器的替代产品。在这篇文章中，我们教你如何在Ubuntu 20.04上安装SoftEther VPN服务器。我希望这篇教程能帮助你在Ubuntu 20.04上安装SoftEther VPN服务器，并对你有用。如果你有任何疑问或问题，可以在评论区联系我们。</p></div></div>    
</body>
</html>