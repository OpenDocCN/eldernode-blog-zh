<html>
<head>
<title>Tutorial Install WireGuard VPN Server on AlmaLinux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在AlmaLinux上安装WireGuard VPN服务器</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-wireguard-vpn-server-on-almalinux/#0001-01-01">https://blog.eldernode.com/install-wireguard-vpn-server-on-almalinux/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/531c7f9c641035d7b06e7d5664c7f594.png" data-src="https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install WireGuard VPN Server on AlmaLinux" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2022/12/Tutorial-Install-WireGuard-VPN-Server-on-AlmaLinux.webp"/><p>WireGuard是一种开源软件和通信协议，它使用VPN解决方案来建立点对点连接。在本文中，我们打算一步一步地教你如何在AlmaLinux上安装WireGuard VPN服务器。还需要注意的是，如果你打算购买一台<a href="https://eldernode.com/linux-vps/"> Linux VPS </a>服务器，你可以访问<a href="https://eldernode.com/"> Eldernode </a>网站上提供的软件包。</p><h2><span class="ez-toc-section" id="2_Step_to_Setup_WireGuard_on_AlmaLinux"/> <strong> 2在AlmaLinux上设置WireGuard的步骤</strong> <span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="Introdction_to_WireGuard"/> <strong>对</strong> <span class="ez-toc-section-end"/>的介绍</h3><p><a href="https://blog.eldernode.com/introducing-and-install-wireguard-on-kali/"> WireGuard </a>是一种先进加密的现代虚拟专用网技术。与其他类似的方法相比，如IPsec和<a href="https://blog.eldernode.com/setup-an-openvpn-server-on-ubuntu-22-04/"> OpenVPN </a>，WireGuard技术更快，更容易配置，性能更好。该平台几乎可以在任何系统上运行，包括Linux、Windows、Android和macOS。</p><p>Wireguard的工作原理是在每台设备上创建一个充当隧道的网络。WireGuard中的VPN流量是UDP。简单来说，WireGuard是一款免费开源的应用软件，是一种在路由(网络)中使用虚拟专用网方法建立点对点通信的通信协议。</p><p>该程序作为Linux内核中的一个模块运行，旨在提高隧道协议中OpenVPN和IPsec的性能。</p><h2><span class="ez-toc-section" id="Installing_WireGuard_VPN_Server_on_AlmaLinux"/> <strong>在AlmaLinux上安装WireGuard VPN服务器</strong> <span class="ez-toc-section-end"/></h2><p>在前一节熟悉了WireGuard之后，现在我们将解释如何在<a href="https://blog.eldernode.com/tag/almalinux/" target="_blank" rel="noopener"> AlmaLinux </a>上安装它。为此，只需遵循以下步骤。</p><p>第一步，您应该通过运行以下命令来更新系统:</p><pre><code class="language-bash">sudo dnf update</code></pre><p>更新后，您必须借助以下命令重新启动系统:</p><pre><code class="language-bash">sudo reboot</code></pre><p>使用以下命令安装不在Almalinux存储库中的WireGuard软件包:</p><pre><code class="language-bash">sudo dnf install -y epel-release elrepo-release</code></pre><p>现在可以通过运行以下命令来安装WireGuard及其所需的依赖项了:</p><pre><code class="language-bash">sudo dnf install kmod-wireguard wireguard-tools</code></pre><p>安装程序时，如果您被询问一个问题，有必要通过键入y然后按enter键继续安装过程。</p><h3><span class="ez-toc-section" id="How_to_Configure_WireGuard_VPN_Server_on_AlmaLinux"/> <strong>如何在AlmaLinux上配置WireGuard VPN服务器</strong> <span class="ez-toc-section-end"/></h3><p>在上一节中您学习了如何在AlmaLinux上安装WireGuard VPN之后，现在我们想教您如何配置它。</p><p>配置WireGuard VPN的第一步是使用以下命令创建一个WireGuard工作目录。请注意，这样做会导致WireGuard将配置文件存储在该目录中:</p><pre><code class="language-bash">sudo mkdir /etc/wireguard</code></pre><p>这里您需要生成WireGuard公钥和私钥。您可以通过运行以下命令来生成私钥:</p><pre><code class="language-bash">umask 077 | wg genkey | sudo tee /etc/wireguard/wireguard.key</code></pre><p>在下一步中，您需要确认文件是否写在上面的目录中:</p><pre><code class="language-bash">cat /etc/wireguard/wireguard.key</code></pre><p>现在，您需要通过运行以下命令来生成公钥:</p><pre><code class="language-bash">wg pubkey &lt; /etc/wireguard/wireguard.key &gt; /etc/wireguard/wireguard.pub.key</code></pre><p>同样，您需要使用以下命令验证公钥文件的内容:</p><pre><code class="language-bash">cat /etc/wireguard/wireguard.pub.key</code></pre><p>接下来，您需要为WireGuard创建一个网络配置:</p><pre><code class="language-bash">sudo vim /etc/wireguard/wg0.conf</code></pre><pre><code class="language-bash">[Interface]  Address = 10.10.10.1/24  SaveConfig = true  ListenPort = 51820  DNS = 8.8.8.8,10.10.10.1,1.1.1.1  PrivateKey = &lt;SERVER-PRIVATE-KEY&gt;  PostUp = firewall-cmd --add-port=51820/udp; firewall-cmd --zone=public --add-masquerade; firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i wg0 -o eth0 -j ACCEPT; firewall-cmd --direct --add-rule ipv4 nat POSTROUTING 0 -o eth0 -j MASQUERADE  PostDown = firewall-cmd --remove-port=51820/udp; firewall-cmd --zone=public --remove-masquerade; firewall-cmd --direct --remove-rule ipv4 filter FORWARD 0 -i wg0 -o eth0 -j ACCEPT; firewall-cmd --direct --remove-rule ipv4 nat POSTROUTING 0 -o eth0 -j MASQUERADE</code></pre><p>为了<strong>启用IP转发</strong>，您需要在配置文件中添加以下行:</p><pre><code class="language-bash">net.ipv4.ip forward = 1</code></pre><p>应该注意的是，通过启用IP转发，将允许VPN客户端将数据包路由到它们各自的目的地:</p><p>echo " net . IP v4 . IP _ forward = 1 " | sudo tee-a/etc/sysctl . conf</p><p>最后，您可以通过运行以下命令来重新加载sysctl配置:</p><pre><code class="language-bash">sudo sysctl -p</code></pre><h3><span class="ez-toc-section" id="How_to_Start_WireGuard_VPN_Server_on_AlmaLinux"/> <strong>如何在AlmaLinux上启动WireGuard VPN服务器</strong> <span class="ez-toc-section-end"/></h3><p>在您成功安装和配置WireGuard之后，在本节中，我们将教您如何在AlmaLinux上启动它。您可以使用以下命令启动WireGuard:</p><pre><code class="language-bash">sudo wg-quick up wg0</code></pre><p>现在，您可以通过运行以下命令来启动该服务:</p><pre><code class="language-bash">sudo systemctl start <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0374642e72766a606843746433">[email protected]</a></code></pre><p>您还可以使用以下命令查看WireGuard的状态:</p><pre><code class="language-bash">systemctl status <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6b1c0c461a1e0208002b1c0c5b">[email protected]</a></code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>WireGuard使用不同的加密包，专注于看起来最安全的加密。此外，通过使用比OpenVPN和IPsec更小的代码库(大约4000行代码)，它使得安全审计更容易。在本文中，我们试图通过教授如何在AlmaLinux上安装WireGuard VPN服务器来帮助您。如果你有任何问题，可以在评论区和我们分享。</p></div></div>    
</body>
</html>