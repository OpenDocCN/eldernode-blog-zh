<html>
<head>
<title>How to install phpMyAdmin on Debian 10 - phpMyAdmin From Source</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Debian 10上安装phpMyAdmin</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/phpmyadmin-debian-10/#0001-01-01">https://blog.eldernode.com/phpmyadmin-debian-10/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/9e6226b88fdfa5880a805b4facbad944.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install phpMyAdmin on Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2210-1.png"/><p>在本文中，您将学习如何在Debian 10 上安装phpMyAdmin。作为一个用户，你需要一个像<span> <a href="https://eldernode.com/mariadb-installation-on-debian-10/" target="_blank" rel="noopener noreferrer"> MariaDB </a> </span>这样的数据库管理系统，但是由于他们都不习惯仅仅通过MariaDB提示符与系统交互。</p><p>所以我们引入了<span><a href="https://www.phpmyadmin.net/" target="_blank" rel="noopener noreferrer"><strong>phpMyAdmin</strong></a></span>，其中用户通过web接口与MariaDB交互。请加入本教程，了解更多信息，并回顾如何从源代码安装和保护phpMyAdmin，以便在Debian 10系统上安全地使用它和管理您的数据库。</p><p> </p><p><strong>先决条件</strong></p><p>如果您知道以下内容，本教程可能会更有用:</p><ul><li>一个拥有<span> sudo </span>权限的非root用户和一个配置了<span> ufw <span>的防火墙。</span> </span></li><li>要设置，请按照Debian 10 的<a href="https://eldernode.com/initial-setup-with-debian-10/" target="_blank" rel="noopener noreferrer">初始设置</a></li><li>安装在你的Debian 10服务器上的LAMP ( <strong> L </strong> inux、<strong> A </strong> pache、<strong> M </strong> ariaDB、<strong> P </strong> HP)栈。</li></ul><p> </p><h2><span class="ez-toc-section" id="How_to_install_phpMyAdmin_on_Debian_10"/> <span>如何在Debian 10上安装phpMyAdmin</span>T3】</h2><p>虽然MariaDB是社区开发的<span> <a href="https://eldernode.com/install-mysql-on-debian-10/" target="_blank" rel="noopener noreferrer"> MySQL </a> </span>的分支，但它们是密切相关的。phpMyAdmin是为管理MySQL数据库而设计的，所以您需要确保MariaDB的安装能够与phpMyAdmin一起正常工作。</p><p>要开始安装，您必须考虑一些重要的安全提示，如:</p><ul><li>与您的MariaDB安装直接通信</li><li>使用MariaDB凭据处理身份验证</li><li>执行任意SQL查询并返回结果</li></ul><p> </p><p>正如您所看到的，您不应该通过普通的HTTP连接在远程系统上运行phpMyAdmin，因为它是一个广泛部署的PHP应用程序，您可能经常面临攻击。</p><p> </p><h3 id="step-1-—-installing-phpmyadmin-and-recommended-packages"><span class="ez-toc-section" id="Installing_phpMyAdmin_and_recommended_packages"/> <span>安装phpMyAdmin和推荐包</span> <span class="ez-toc-section-end"/></h3><p>为了启用某些功能并提高性能，您需要在服务器上安装一些PHP扩展，然后开始安装和配置。</p><p>要解释更多，我们建议您查看下面的内容。</p><ul><li>php-mbstring :一个php扩展，用于管理非ASCII字符串并将字符串转换成不同的编码</li><li><span> php-zip </span>:支持上传<span>的php模块。将</span>文件压缩到phpMyAdmin</li><li>php-gd :另一个php模块，支持gd图形库</li></ul><p> </p><p>首先，您需要更新服务器的包索引。</p><pre><code class="language-bash">sudo apt update</code></pre><p>要下载文件并安装在你的系统上，使用<span> apt <br/> </span></p><pre><code class="language-bash">sudo apt install php-mbstring php-zip php-gd</code></pre><p>我们在本教程中使用了<span>全语言</span>包，但是你只能安装<span>英语</span>包。</p><p>要将tarball下载到您的服务器，请将下面的<span> wget </span>命令中的链接替换为下载链接，然后按<span>回车。</span></p><pre><code class="language-bash">wget https://files.phpmyadmin.net/phpMyAdmin/<span class="highlight">4.9.0.1</span>/phpMyAdmin-<span class="highlight">4.9.0.1</span>-<span class="highlight">all-languages</span>.tar.gz    </code></pre><p>然后提取tarball:</p><pre><code class="language-bash">tar xvf phpMyAdmin-<span class="highlight">4.9.0.1</span>-<span class="highlight">all-languages</span>.tar.gz    </code></pre><p>通过运行下面的命令，将<span> <code>phpMyAdmin-<span class="highlight">4.9.0.1</span>-</code>全语言</span>目录及其所有子目录移动到<span> /usr/share/ </span>目录。</p><pre><code class="language-bash">sudo mv phpMyAdmin-<span class="highlight">4.9.0.1</span>-<span class="highlight">all-languages</span>/ /usr/share/phpmyadmin      </code></pre><h3 id="step-2-—-configuring-phpmyadmin-manually"><span class="ez-toc-section" id="Configuring_phpMyAdmin_manually"/> <span>手动配置phpMyAdmin</span>T3】</h3><p>要创建一个phpMyAdmin存储其临时文件的新目录，请运行以下命令。</p><pre><code class="language-bash">sudo mkdir -p /var/lib/phpmyadmin/tmp  </code></pre><p>要设置Linux用户配置文件，请键入以下命令。</p><pre><code class="language-bash">sudo chown -R www-data:www-data /var/lib/phpmyadmin</code></pre><p>然后，复制您提取的文件，将其用作基本配置文件。你需要把它保存在<span> /usr/share/phpmyadmin </span>目录下，并重命名为【config.inc.php】T2:</p><pre><code class="language-bash">sudo cp /usr/share/phpmyadmin/config.sample.inc.php /usr/share/phpmyadmin/config.inc.php</code></pre><p>选择你最喜欢的文本编辑器，打开下面的文件</p><pre><code class="language-bash">sudo nano /usr/share/phpmyadmin/config.inc.php  </code></pre><p>默认情况下，phpMyAdmin使用<span> cookie </span>认证方法，并允许您以任何有效的MariaDB用户身份登录phpMyAdmin。</p><pre><code class="language-bash"/></pre><pre class="code-label" title="/usr/share/phpmyadmin/config.inc.php"><code class="language-bash"><span>. . .</span></code></pre><div title="/usr/share/phpmyadmin/config.inc.php"><pre><code class="language-bash">$cfg['blowfish_secret'] = ''; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */  . . .</code></pre></div><pre><code class="language-bash"/></pre><p>该短语仅供AES算法内部使用:</p><p class="code-label" title="/usr/share/phpmyadmin/config.inc.php"/><pre><code class="language-bash">. . .  $cfg['blowfish_secret'] = '<span>STRINGOFTHIRTYTWORANDOMCHARACTERS</span>'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */  . . .</code></pre><p><strong>注意</strong>:要生成一个真正随机的字符串，你可以安装并使用<span> pwgen </span>程序</p><pre><code class="language-bash">sudo apt install pwgen</code></pre><p>接下来，要指向一个安全的您选择的密码，通过删除前面的斜杠取消对<span> controluser </span>和<span> controlpass </span>指令的注释。然后更新<span> controlpass </span>指令。它有助于不保留默认密码，并且未知用户无法通过phpMyAdmin接口轻松访问您的数据库。所以你会看到:</p><p class="code-label" title="/usr/share/phpmyadmin/config.inc.php"/><div title="/usr/share/phpmyadmin/config.inc.php"><pre><code class="language-bash">. . .  /* User used to manipulate with storage */  // $cfg['Servers'][$i]['controlhost'] = '';  // $cfg['Servers'][$i]['controlport'] = '';  $cfg['Servers'][$i]['controluser'] = 'pma';  $cfg['Servers'][$i]['controlpass'] = 'password';  . . .</code></pre><p>如果您删除每一行开头的斜杠，并取消这一部分中每一行的注释，您将看到如下所示。</p><p class="code-label" title="/usr/share/phpmyadmin/config.inc.php"/></div><pre class="code-pre"><code class="language-bash">. . .  /* Storage database and tables */  $cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';  $cfg['Servers'][$i]['bookmarktable'] = 'pma__bookmark';  $cfg['Servers'][$i]['relation'] = 'pma__relation';  $cfg['Servers'][$i]['table_info'] = 'pma__table_info';  $cfg['Servers'][$i]['table_coords'] = 'pma__table_coords';  $cfg['Servers'][$i]['pdf_pages'] = 'pma__pdf_pages';  $cfg['Servers'][$i]['column_info'] = 'pma__column_info';  $cfg['Servers'][$i]['history'] = 'pma__history';  $cfg['Servers'][$i]['table_uiprefs'] = 'pma__table_uiprefs';  $cfg['Servers'][$i]['tracking'] = 'pma__tracking';  $cfg['Servers'][$i]['userconfig'] = 'pma__userconfig';  $cfg['Servers'][$i]['recent'] = 'pma__recent';  $cfg['Servers'][$i]['favorite'] = 'pma__favorite';  $cfg['Servers'][$i]['users'] = 'pma__users';  $cfg['Servers'][$i]['usergroups'] = 'pma__usergroups';  $cfg['Servers'][$i]['navigationhiding'] = 'pma__navigationhiding';  $cfg['Servers'][$i]['savedsearches'] = 'pma__savedsearches';  $cfg['Servers'][$i]['central_columns'] = 'pma__central_columns';  $cfg['Servers'][$i]['designer_settings'] = 'pma__designer_settings';  $cfg['Servers'][$i]['export_templates'] = 'pma__export_templates';  . . .</code></pre><p>最后，找到最下面的文件，添加下面一行来配置phpMyAdmin，使用您之前创建的<span> /var/lib/phpmyadmin/tmp </span>目录作为它的临时目录。为了更快地加载页面，phpMyAdmin将使用这个临时目录作为模板缓存。</p><p class="code-label" title="/usr/share/phpmyadmin/config.inc.php"/><pre><code class="language-bash">. . .  <span>$cfg['TempDir'] = '/var/lib/phpmyadmin/tmp';</span></code></pre><p>如果你用了<span> nano </span>，现在按<span> CTRL + X，Y </span>保存并关闭文件，然后<span>进入</span>。</p><p>是时候创建phpMyAdmin存储数据库和表了。当您安装phpMyAdmin时，它附带了一个名为<span> create_tables.sql <span>的文件。</span>T3】</span></p><p>要创建配置存储数据库和表，运行以下命令以使用<span> create_tables.sql </span>文件。</p><pre><code class="language-bash">sudo mariadb &lt; /usr/share/phpmyadmin/sql/create_tables.sql  </code></pre><pre><code class="language-bash"/></pre><p>打开MariaDB提示符并创建管理用户<strong> pma </strong>。</p><pre><code class="language-bash">sudo mariadb  </code></pre><p>运行以下命令来创建<strong> pma </strong>用户，并授予其适当的权限</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; NGRANT SELECT, INSERT, UPDATE, DELETE ON phpmyadmin.* TO 'pma'@'localhost' IDENTIFIED BY '<span class="highlight">password</span>';</code></pre><p>创建一个普通的MariaDB用户，用于通过phpMyAdmin管理数据库。尝试使用不同于<strong> pma </strong>用户的另一个帐户登录，并创建一个对数据库中所有表都有权限的用户。</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; GRANT ALL PRIVILEGES ON *.* TO '<span>noodi</span>'@'localhost' IDENTIFIED BY '<span>password</span>' WITH GRANT OPTION;  </code></pre><p>然后，退出MariaDB shell:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; exit</code></pre><p>现在phpMyAdmin已经完全安装并配置在您的服务器上了。</p><pre><code class="language-bash"/></pre><p><span> <a href="https://eldernode.com/linux-vps/">购买Linux虚拟私有服务器</a> </span></p><p> </p><h3 id="step-3-—-configuring-apache-to-serve-phpmyadmin"><span class="ez-toc-section" id="Configuring_Apache_to_Serve_phpMyAdmin"/> <span>配置Apache服务phpMyAdmin </span> <span class="ez-toc-section-end"/></h3><p>安装过程会自动创建一个Apache配置文件，并将其放在<span>/etc/Apache 2/conf-enabled/</span>目录中。</p><p>在<span>/etc/Apache 2/conf-available/</span>目录下创建一个名为<span> phpmyadmin.conf </span>的文件</p><pre><code class="language-bash">sudo nano /etc/apache2/conf-available/phpmyadmin.conf</code></pre><p>将以下内容添加到文件中</p><p class="code-label" title="/etc/apache2/conf-available/phpmyadmin.conf"/><pre class="code-pre"><code class="language-bash">phpMyAdmin default Apache configuration    Alias /phpmyadmin /usr/share/phpmyadmin    &lt;Directory /usr/share/phpmyadmin&gt;      Options SymLinksIfOwnerMatch      DirectoryIndex index.php        &lt;IfModule mod_php5.c&gt;          &lt;IfModule mod_mime.c&gt;              AddType application/x-httpd-php .php          &lt;/IfModule&gt;          &lt;FilesMatch ".+\.php$"&gt;              SetHandler application/x-httpd-php          &lt;/FilesMatch&gt;            php_value include_path .          php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp          php_admin_value open_basedir /usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/:/usr/share/php/php-gettext/:/usr/share/php/php-php-gettext/:/usr/share/javascript/:/usr/share/php/tcpdf/:/usr/share/doc/phpmyadmin/:/usr/share/php/phpseclib/          php_admin_value mbstring.func_overload 0      &lt;/IfModule&gt;      &lt;IfModule mod_php.c&gt;          &lt;IfModule mod_mime.c&gt;              AddType application/x-httpd-php .php          &lt;/IfModule&gt;          &lt;FilesMatch ".+\.php$"&gt;              SetHandler application/x-httpd-php          &lt;/FilesMatch&gt;            php_value include_path .          php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp          php_admin_value open_basedir /usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/:/usr/share/php/php-gettext/:/usr/share/php/php-php-gettext/:/usr/share/javascript/:/usr/share/php/tcpdf/:/usr/share/doc/phpmyadmin/:/usr/share/php/phpseclib/          php_admin_value mbstring.func_overload 0      &lt;/IfModule&gt;    &lt;/Directory&gt;    # Authorize for setup  &lt;Directory /usr/share/phpmyadmin/setup&gt;      &lt;IfModule mod_authz_core.c&gt;          &lt;IfModule mod_authn_file.c&gt;              AuthType Basic              AuthName "phpMyAdmin Setup"              AuthUserFile /etc/phpmyadmin/htpasswd.setup          &lt;/IfModule&gt;          Require valid-user      &lt;/IfModule&gt;  &lt;/Directory&gt;    # Disallow web access to directories that don't need it  &lt;Directory /usr/share/phpmyadmin/templates&gt;      Require all denied  &lt;/Directory&gt;  &lt;Directory /usr/share/phpmyadmin/libraries&gt;      Require all denied  &lt;/Directory&gt;  &lt;Directory /usr/share/phpmyadmin/setup/lib&gt;      Require all denied  &lt;/Directory&gt;</code></pre><p>保存并关闭该文件，然后通过键入以下命令来启用它。</p><pre><code class="language-bash">sudo a2enconf phpmyadmin.conf  </code></pre><p>要使配置更改生效，请重新加载apache2服务</p><pre><code class="language-bash">sudo systemctl reload apache2</code></pre><p>然后，您将能够通过在web浏览器中导航到以下URL来访问phpMyAdmin登录屏幕:</p><pre><code class="language-bash">https://your_domain/phpmyadmin    <img data-lazyloaded="1" src="../Images/690f8283685139a5ce66a8ceee8fe925.png" decoding="async" loading="lazy" class="aligncenter wp-image-9289 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_login_blank.jpg" alt="phpmyadmin login page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_login_blank.jpg 595w, https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_login_blank-289x300.jpg 289w" data-sizes="(max-width: 595px) 100vw, 595px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_login_blank.jpg"/></code></pre><p>您可以使用您配置的MariaDB用户名和密码登录界面，然后您将看到用户界面。</p><p><img data-lazyloaded="1" src="../Images/bf77041e1f34348b7a82b51b2adead90.png" decoding="async" loading="lazy" class="aligncenter wp-image-9290 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10.jpg" alt="phpmyadmin interface view" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10.jpg 1892w, https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10-300x135.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10-1024x461.jpg 1024w, https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10-768x345.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10-1536x691.jpg 1536w" data-sizes="(max-width: 1892px) 100vw, 1892px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/phpmyadmin_ui_deb10.jpg"/></p><p> </p><h3 id="step-4-—-securing-your-phpmyadmin-instance"><span class="ez-toc-section" id="_Securing_your_phpMyAdmin_instance"/> <span>保护phpMyAdmin实例</span> <span class="ez-toc-section-end"/></h3><pre><code class="language-bash"/></pre><p>由于phpMyAdmin是攻击者的一个常见目标，所以您应该格外小心以防止未经授权的访问。通过使用Apache内置的<span>在整个应用程序前面放置一个网关。htaccess </span>认证和授权功能是最好的保护方式之一。</p><p>编辑放置在Apache配置目录中的链接文件:</p><pre><code class="language-bash">sudo nano /etc/apache2/conf-available/phpmyadmin.conf  </code></pre><p>在配置文件的<span> &lt;目录/usr/share/phpmyadmin &gt; </span>段中添加一个<span> AllowOverride All </span>指令。</p><p class="code-label" title="/etc/apache2/conf-available/phpmyadmin.conf"/><div title="/etc/apache2/conf-available/phpmyadmin.conf"><pre><code class="language-bash">&lt;Directory /usr/share/phpmyadmin&gt;      Options FollowSymLinks      DirectoryIndex index.php  <span>    AllowOverride All</span>        &lt;IfModule mod_php5.c&gt;      . . .</code></pre></div><p>添加该行后，保存并关闭文件。为了实现您所做的更改，重新启动Apache，运行下面的命令。</p><pre><code class="language-bash">sudo systemctl restart apache2    </code></pre><p>启用<span>后。htaccess <span>，用于您的应用程序，您需要创建一个来实际实现一些安全性。然后创建必要的文件，并使用</span> </span> root权限在文本编辑器中打开它，输入:</p><pre><code class="language-bash">sudo nano /usr/share/phpmyadmin/.htaccess  </code></pre><p>输入以下内容</p><pre><code class="language-bash"><span>AuthType Basic  AuthName "Restricted Files"  AuthUserFile /usr/share/phpmyadmin/.htpasswd  Require valid-user</span></code></pre><p>如果你需要知道这些线的意思:</p><p><span> AuthType Basic </span>:这一行指定您正在实现的认证类型。此类型将使用密码文件实现密码身份验证。</p><p><span> AuthName </span>:设置认证对话框的消息。您应该保持这种通用性，以便未经授权的用户不会获得任何有关受保护内容的信息。</p><p><span> AuthUserFile </span>:设置用于认证的密码文件的位置。这应该在所提供的目录之外。我们将很快创建这个文件。</p><p><span> Require valid-user </span>:这指定只有经过身份验证的用户才能访问这个资源。这实际上阻止了未经授权的用户进入</p><p> </p><p>完成后，保存并关闭文件。创建这个文件，并使用<span> htpasswd </span>实用程序将它传递给一个初始用户:</p><pre><code class="language-bash">sudo htpasswd -c /usr/share/phpmyadmin/.htpasswd <span class="highlight"><span>username</span>    </span></code></pre><p>然后，您将被要求为您正在创建的用户选择并确认一个密码，因此该文件是使用您输入的散列密码创建的。</p><p>此外，如果您想输入一个额外的用户，您需要在不使用-c标志的情况下使用<strong/></p><pre><code class="language-bash">sudo htpasswd /etc/phpmyadmin/.htpasswd additionaluser  </code></pre><pre><code class="language-bash"/></pre><p>当您访问phpMyAdmin子目录时，会要求您添加刚刚配置的帐户名和密码。</p><p>https://your _ domain _ or _ IP/phpmyadmin</p><p><img data-lazyloaded="1" src="../Images/c3f36e7ff0b2626a181ca4a36824fd07.png" decoding="async" loading="lazy" class="aligncenter wp-image-9291 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/pma_deb10_apache_auth.jpg" alt="login page on debian 10 for phpmyadmin" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/pma_deb10_apache_auth.jpg 625w, https://blog.eldernode.com/wp-content/uploads/2020/07/pma_deb10_apache_auth-300x151.jpg 300w" data-sizes="(max-width: 625px) 100vw, 625px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/pma_deb10_apache_auth.jpg"/></p><p>最后，要输入您的MariaDB凭证，在输入Apache身份验证之后，您将看到常规的phpMyAdmin身份验证页面。</p><p>亲爱的用户，我们希望这篇关于如何在Debian 10上安装phpMyAdmin的教程对你有所帮助，如果你有任何问题或者想查看我们的用户关于这篇文章的对话，请访问<a href="https://eldernode.com/ask" target="_blank" rel="noopener noreferrer">提问页面</a>。也为了提高你的知识，有这么多有用的教程为<a href="https://eldernode.com/blog/" target="_blank" rel="noopener noreferrer">老年节点培训</a>准备。</p></div></div>    
</body>
</html>