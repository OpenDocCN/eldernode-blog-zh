<html>
<head>
<title>How To Install MongoDB 4 In CentOS 8 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在CentOS 8 - Eldernode博客中安装MongoDB 4</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-mongodb-4-centos-8/#0001-01-01">https://blog.eldernode.com/install-mongodb-4-centos-8/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/763632da2f9635088ffaf3b69d7f72fd.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install MongoDB 4 in CentOS 8" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2066.png"/><p>[更新日期:2021-01-16] MongoDB是一个流行的基于文档的通用NoSQL数据库引擎，它以<span> <a href="https://en.wikipedia.org/wiki/JSON#:~:text=JavaScript%20Object%20Notation%20(JSON%2C%20pronounced,or%20any%20other%20serializable%20value)." target="_blank" rel="noopener noreferrer"> JSON </a> </span>格式存储数据。MongoDB是免费和开源的，附带了一组很酷很棒的特性，比如文件存储、数据复制、特别查询和负载平衡等等。一些蓝筹公司已经将MongoDB整合到他们的应用程序中，包括Adobe、脸书、谷歌、易贝和比特币基地。在本文中，我们将向您<strong>学习如何在CentOS 8 </strong>中安装MongoDB 4。您可以访问<a href="https://eldernode.com/"> Eldernode </a>中提供的包来购买<a href="https://eldernode.com/centos-vps/"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="Tutorial_Install_MongoDB_4_In_CentOS_8"/> <strong> <span>教程在CentOS 8中安装MongoDB 4</span></strong>T5】</h2><p>在本文中，您将学习如何在CentOS 8中安装MongoDB 4。加入我们来检查细节。</p><h3><span class="ez-toc-section" id="How_To_Add_MongoDB_Repository"/> <span>如何添加MongoDB库</span> <span class="ez-toc-section-end"/></h3><p>由于<strong> MongoDB </strong>在<a href="https://blog.eldernode.com/tag/centos/"> CentOS </a> <strong> 8 </strong>默认库中不存在，需要手动添加。首先，创建一个存储库文件，如图所示。</p><pre><code class="language-bash">vi /etc/yum.repos.d/mongodb.repo  </code></pre><p>粘贴下面的配置并<strong>保存</strong>文件。</p><pre><code class="language-bash">[mongodb-org-4.2]  name=MongoDB Repository  baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/development/x86_64/  gpgcheck=1  enabled=1  gpgkey=https://www.mongodb.org/static/pgp/server-4.2.asc</code></pre><h3><span class="ez-toc-section" id="Install_MongoDB_in_CentOS_8_CentOS_7"/> <span>在CentOS 8中安装MongoDB | CentOS 7</span><span class="ez-toc-section-end"/></h3><p>一旦存储库被启用，您就可以使用下面的<strong> dnf </strong>命令安装<strong> MongoDB </strong>:</p><pre><code class="language-bash">dnf install mongodb-org</code></pre><p>然后，通过运行以下命令，启动MongoDB并使其在引导时启动:</p><pre><code class="language-bash">systemctl start mongod  </code></pre><pre><code class="language-bash">sudo systemctl enable mongod</code></pre><p>使用以下命令验证MongoDB的状态:</p><pre><code class="language-bash">systemctl status mongod  </code></pre><p>此外，为了确认<strong> Mongod </strong>服务确实在监听:</p><pre><code class="language-bash">netstat -pnltu</code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/f7ac3a25f459c5bccab4816e31bd8c68.png" decoding="async" loading="lazy" class="aligncenter wp-image-22118 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/10/1Verify-MongoDB-Port.jpg" alt="Verify-MongoDB-Port" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/10/1Verify-MongoDB-Port.jpg 819w, https://blog.eldernode.com/wp-content/uploads/2020/10/1Verify-MongoDB-Port-300x71.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/10/1Verify-MongoDB-Port-768x183.jpg 768w" data-sizes="(max-width: 819px) 100vw, 819px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/10/1Verify-MongoDB-Port.jpg"/></p><p> </p><h3><span class="ez-toc-section" id="How_To_Access_MongoDB_Shell"/> <span>如何访问MongoDB Shell </span> <span class="ez-toc-section-end"/></h3><p>现在只需发出以下命令就可以访问MongoDB的shell了:</p><pre><code class="language-bash">mongo</code></pre><p><strong>输出</strong>将类似于下面的截图</p><p> </p><p><img data-lazyloaded="1" src="../Images/851e3668dfe438c8e7b77f6eb828e71f.png" decoding="async" loading="lazy" class="aligncenter wp-image-22119" data-src="https://blog.eldernode.com/wp-content/uploads/2020/10/2Connect-MongoDB-Shell.jpg" alt="Connect-MongoDB-Shell" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/10/2Connect-MongoDB-Shell.jpg 760w, https://blog.eldernode.com/wp-content/uploads/2020/10/2Connect-MongoDB-Shell-300x208.jpg 300w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/10/2Connect-MongoDB-Shell.jpg"/></p><p> </p><h3><span class="ez-toc-section" id="How_To_Create_MongoDB_Admin_User"/> <span>如何创建MongoDB管理员用户</span> <span class="ez-toc-section-end"/></h3><p>现在让我们换个方式，创建一个管理员用户。创建一个具有提升权限的管理员用户来执行提升的任务总是一个好建议。为此，首先访问MongoDB的shell:</p><pre><code class="language-bash">mongo</code></pre><p>要切换到数据库管理，请键入下面的命令。</p><pre><code class="language-bash"><strong>&gt;</strong> use admin  </code></pre><p>现在，通过运行下面的代码创建一个新的MongoDB用户。</p><pre><code class="language-bash"><strong>&gt;</strong> db.createUser(   {   user: "mongod_admin",   pwd: "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0252427171756d7066">[email protected]</a>@2019",   roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]   }  </code></pre><p>当一切正常时，您将获得下面的<strong>输出</strong>。</p><pre><code class="language-bash">Successfully added user: {  	"user" : "mongod_admin",  	"roles" : [  		{  			"role" : "userAdminAnyDatabase",  			"db" : "admin"  		}  	]  }    </code></pre><p><img data-lazyloaded="1" src="../Images/22b4a877b2c8bb91f5b3d02549b0e985.png" decoding="async" loading="lazy" class="aligncenter wp-image-22120" data-src="https://blog.eldernode.com/wp-content/uploads/2020/10/3Create-Admin-User-in-MongoDB.jpg" alt="Create-Admin-User" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/10/3Create-Admin-User-in-MongoDB.jpg 566w, https://blog.eldernode.com/wp-content/uploads/2020/10/3Create-Admin-User-in-MongoDB-300x169.jpg 300w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/10/3Create-Admin-User-in-MongoDB.jpg"/></p><p> </p><p>接下来，运行以下命令来列出创建的MongoDB用户。</p><pre><code class="language-bash">show users  </code></pre><h3><span class="ez-toc-section" id="How_To_Configure_Authentication_for_MongoDB"/> <span>如何为MongoDB</span>T3配置认证</h3><p>正如您所看到的，所有用户都可以访问shell并执行任何命令，出于安全考虑，我们不建议这样做。因此，您需要为我们刚刚创建的管理员用户创建身份验证，以防止其他用户未经授权运行命令。</p><p>为了使认证能够编辑<strong>/lib/systemd/system/mongod . Service</strong>文件，在<strong>【服务】</strong>部分下，找到并编辑环境参数，如下所示:</p><pre><code class="language-bash">Environment="OPTIONS= --auth -f /etc/mongod.conf"  </code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/7c0e0f940676997bc94ecd47fd29ca92.png" decoding="async" loading="lazy" class="aligncenter wp-image-22121" data-src="https://blog.eldernode.com/wp-content/uploads/2020/10/4Enable-Authentication-in-Mongodb.jpg" alt="Enable-Authentication" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/10/4Enable-Authentication-in-Mongodb.jpg 610w, https://blog.eldernode.com/wp-content/uploads/2020/10/4Enable-Authentication-in-Mongodb-300x59.jpg 300w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/10/4Enable-Authentication-in-Mongodb.jpg"/></p><p> </p><p>现在，您可以<strong>保存</strong>并退出配置文件。</p><p>为了使更改生效，重新加载系统并重启<strong> MongoDB </strong>。</p><pre><code class="language-bash">systemctl daemon-reload</code></pre><pre><code class="language-bash">systemctl restart mongod</code></pre><p>如果您现在尝试列出未经身份验证的用户，您应该会得到如下所示的错误:</p><p> </p><p><img data-lazyloaded="1" src="../Images/7851b4b867d0c2d4509dc153c5bc6233.png" decoding="async" loading="lazy" class="aligncenter wp-image-22122 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/10/5Check-MongoDB-Authentication.jpg" alt="Check-MongoDB-Authentication" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/10/5Check-MongoDB-Authentication.jpg 1024w, https://blog.eldernode.com/wp-content/uploads/2020/10/5Check-MongoDB-Authentication-300x75.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/10/5Check-MongoDB-Authentication-768x191.jpg 768w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/10/5Check-MongoDB-Authentication.jpg"/></p><p> </p><p>要进行身份验证，只需传递如下所示的凭证。</p><pre><code class="language-bash"><strong>&gt;</strong> db.auth('mongod_admin', '<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6333231010140c1107">[email protected]</a>@2019')  </code></pre><p>现在，您可以运行之后的任何命令。让我们再次尝试列出用户:</p><pre><code class="language-bash"><strong>&gt;</strong> show users</code></pre><p>这一次，由于提供了身份验证凭证，一切进展顺利。</p><figure id="attachment_35488" class="wp-caption aligncenter" aria-describedby="caption-attachment-35488"/><p> </p><p><img data-lazyloaded="1" src="../Images/dd364772bbfc15cc216c3db71e814e19.png" decoding="async" loading="lazy" class="aligncenter wp-image-22124" data-src="https://blog.eldernode.com/wp-content/uploads/2020/10/6Verify-MongoDB-User-Authentication.jpg" alt="Verify-User-Authentication" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/10/6Verify-MongoDB-User-Authentication.jpg 662w, https://blog.eldernode.com/wp-content/uploads/2020/10/6Verify-MongoDB-User-Authentication-300x152.jpg 300w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/10/6Verify-MongoDB-User-Authentication.jpg"/></p><p> </p><p>运行以下命令退出数据库引擎:</p><pre><code class="language-bash">exit</code></pre><h2><span class="ez-toc-section" id="Conclusion"/> <b>结论</b> <span class="ez-toc-section-end"/></h2><p>在本文中，您成功地学习了如何在CentOS 8中安装MongoDB4，从现在开始，我们希望您能够轻松地在CentOS 8系统上安装MongoDB 4，并开始一些必要的步骤。可以参考文章<a href="https://blog.eldernode.com/install-mongodb-debian/">如何在Debian 10上安装MongoDB 4</a>和<a href="https://blog.eldernode.com/install-mongodb-on-windows/">如何在Windows上安装MongoDB</a>。</p></div></div>    
</body>
</html>