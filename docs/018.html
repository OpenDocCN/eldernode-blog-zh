<html>
<head>
<title>How to configure DNS Forwarding in Windows Server 2012 R2 version - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Windows Server 2012 R2版中配置DNS转发- Eldernode</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/how-to-configure-dns-forwarding-in-windows-server-2012-r2-version/#0001-01-01">https://blog.eldernode.com/how-to-configure-dns-forwarding-in-windows-server-2012-r2-version/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/78a09a104634baeefe30bb0412e66669.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to configure DNS Forwarding in Windows Server 2012 R2 version" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/How-to-configure-DNS-Forwarding-in-Windows-Server-2012-R2-version-1.png"/><p>本文是关于如何在Windows Server 2012 R2版中配置DNS转发的分步指南。在本教程的后续部分，我们将教您如何使用DNS管理器和PowerShell创建DNS转发器。</p><p>简单来说，<strong> DNS转发</strong>就是求助找地址。默认的方法是DNS服务器向互联网上的一系列<strong> DNS服务器</strong>发送无法回答的查询，这些服务器被称为根提示。<br/>但是如果配置了DNS转发，它会向目的地发送查询，我们称之为<strong>转发器</strong>。</p><h2><span class="ez-toc-section" id="How_to_configure_DNS_Forwarding_in_Windows_Server_2012_R2_version"/>如何在Windows Server 2012 R2版中配置DNS转发<span class="ez-toc-section-end"/></h2><p>在<span> <strong> DNS管理器</strong> </span>或<span> <strong> PowerShell </strong> </span>的帮助下完成<a href="https://eldernode.com/category/tutorial/"> Windows服务器</a>上的DNS服务器安装。</p><h3><span class="ez-toc-section" id="How_to_create_a_DNS_forwarder_using_DNS_Manager"/>如何使用DNS管理器创建DNS转发器<span class="ez-toc-section-end"/></h3><p>在安装了DNS server roll的服务器中，打开<strong>服务器管理器</strong>然后到<strong>工具</strong> &gt; <strong> DNS </strong>进入<strong> DNS管理器</strong>。</p><p><img data-lazyloaded="1" src="../Images/57bc84fa2da492041754c1ff2cafc633.png" decoding="async" loading="lazy" class="aligncenter wp-image-7330 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-1-eldernode.png" alt="create a DNS forwarder using DNS Manager in server manager" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-1-eldernode.png 776w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-1-eldernode-300x139.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-1-eldernode-768x355.png 768w" data-sizes="(max-width: 776px) 100vw, 776px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-1-eldernode.png"/></p><p> </p><p>右键点击<strong> DNS服务器</strong>名称，点击<strong>属性</strong>。</p><p><img data-lazyloaded="1" src="../Images/f279472e20d5be8a11e158b0ce286b95.png" decoding="async" loading="lazy" class="aligncenter wp-image-7331 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-2-eldernode.png" alt="setting server manager to create a DNS forwarder" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-2-eldernode.png 398w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-2-eldernode-261x300.png 261w" data-sizes="(max-width: 398px) 100vw, 398px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-2-eldernode.png"/></p><p> </p><p>进入<strong>货代</strong>页签，点击<strong>编辑</strong>。</p><p><img data-lazyloaded="1" src="../Images/98705a8537c10c303865fcea11cbe46f.png" decoding="async" loading="lazy" class="aligncenter wp-image-7332 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-3-eldernode.png" alt="create a DNS forwarder" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-3-eldernode.png 416w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-3-eldernode-259x300.png 259w" data-sizes="(max-width: 416px) 100vw, 416px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-3-eldernode.png"/></p><p> </p><p>输入另一台DNS服务器(转发器)的IP地址，然后按Enter键。如果<strong> IP地址</strong>有效，将显示一个<strong>绿色勾号</strong>。为每个其他转发器服务器执行此操作。</p><p><img data-lazyloaded="1" src="../Images/fcc12e4024e99c094211e32d5eb31c48.png" decoding="async" loading="lazy" class="aligncenter wp-image-7333 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-4-eldernode.png" alt="IP address of the DNS server" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-4-eldernode.png 545w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-4-eldernode-300x248.png 300w" data-sizes="(max-width: 545px) 100vw, 545px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-4-eldernode.png"/></p><p> </p><p>点击<strong>确定</strong>保存设置。</p><h3/><h3><span class="ez-toc-section" id="How_to_create_a_DNS_forwarder_using_PowerShell"/>如何使用PowerShell创建DNS转发器<span class="ez-toc-section-end"/></h3><p>正如我们所说的，您也可以使用<a href="https://en.wikipedia.org/wiki/PowerShell"> PowerShell </a>来做到这一点。为此，请输入以下命令:</p><pre><code class="language-bash">Add-DnsServerForwarder –IPAddress &lt; <span>IP Address</span> &gt;</code></pre><p>以下命令用于相同的目的:</p><pre><code class="language-bash">Set-DnsServerForwarder –IPAddress &lt; <span>IP Address</span> &gt;</code></pre><p>只需输入相关的IP地址即可正确执行命令。您可以在一个命令中添加多个转发器，方法是使用逗号(，)分隔它们的IP地址。请注意，以上两个命令是有区别的。<strong> Add命令</strong>将指定的转发器添加到转发器列表中，但是Set命令用指定的IP地址替换现有的转发器。</p><p>在下图中，您可以看到一个将IP地址放入forwarder命令的示例。</p><p><img data-lazyloaded="1" src="../Images/f3c8903bc018f09d7927f5c7ed0271cb.png" decoding="async" loading="lazy" class="aligncenter wp-image-7334 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-5-eldernode.png" alt="putting the IP address in the forwarder command" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-5-eldernode.png 619w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-5-eldernode-300x60.png 300w" data-sizes="(max-width: 619px) 100vw, 619px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-5-eldernode.png"/></p><h2/><h3><span class="ez-toc-section" id="How_to_work_with_DNS_Forwarding_on_Windows_DNS_server"/>如何在Windows DNS服务器上使用DNS转发<span class="ez-toc-section-end"/></h3><p>在配置DNS转发之前，您需要确保递归没有被禁用。DNS转发需要递归来向客户端的转发器请求信息。</p><p>默认情况下，递归是启用的，但在某些情况下，它可能被禁用。要对此进行检查，您需要输入DNS服务器设置，然后转到高级选项卡。然后在<strong>服务器选项</strong>部分，确保禁用递归选项没有被选中。</p><p><img data-lazyloaded="1" src="../Images/38f40dab10ae6f1f0266f0a3a9732d01.png" decoding="async" loading="lazy" class="aligncenter wp-image-7335 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-6-eldernode.png" alt="advanced settings of server manager to create dns forwarder" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-6-eldernode.png 415w, https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-6-eldernode-259x300.png 259w" data-sizes="(max-width: 415px) 100vw, 415px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/06/server-manager-6-eldernode.png"/></p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>本文介绍如何使用DNS管理器和PowerShell在Windows Server 2012 R2版中配置DNS转发。然后用图片解释了创建DNS转发器的步骤。如果对MikroTik感兴趣，可以参考MikroTik 中的<a href="https://blog.eldernode.com/dns-configuration-tutorial-in-mikrotik/"> DNS配置教程。</a></p></div></div>    
</body>
</html>