<html>
<head>
<title>Tutorial Install And Configure Reverse Proxy On IIS - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在IIS - Eldernode博客上安装和配置反向代理</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-and-configure-reverse-proxy-on-iis/#0001-01-01">https://blog.eldernode.com/install-and-configure-reverse-proxy-on-iis/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/f8ef9a6c3f7b2dfb58492a283ce19658.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install And Configure Reverse Proxy On IIS" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/Tutorial-Install-And-Configure-Reverse-Proxy-On-IIS.png"/><p>IIS代表互联网信息服务。它是一个web服务器软件包，是为Windows Server设计的。作为网站管理员，您需要IIS来创建、配置和发布网站。Internet信息服务允许您修改网站的默认页面、错误页面、日志记录设置和安全设置。本文介绍了在IIS 上安装和配置反向代理的教程<strong>。访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>将满足您购买自己的<a href="https://eldernode.com/windows-vps/" target="_blank" rel="noopener"> Windows VPS </a>主机的愿望。</strong></p><h2><span class="ez-toc-section" id="Install_And_Configure_Reverse_Proxy_On_IIS"/> <strong>在IIS上安装并配置反向代理</strong> <span class="ez-toc-section-end"/></h2><p>IIS主要用于托管ASP.NET web应用程序和静态网站。由于IIS提供标准HTML网页和动态网页，它能够将HTML和相关图像发送到用户的浏览器。IIS可以在使用Mono的Linux和Mac上运行，但是建议你在Windows服务器操作系统上运行IIS，因为它更加灵活和稳定。</p><p>一个正向代理位于一组客户端机器的前面，而一个<strong>反向代理</strong>是一个位于web服务器前面的服务器，将客户端请求转发到那些web服务器。本指南将教你如何在<a href="https://blog.eldernode.com/tag/windows/" target="_blank" rel="noopener"> Windows </a>服务器上<strong>安装和配置带有IIS </strong>的反向代理。</p><h2><span class="ez-toc-section" id="How_to_Install_Reverse_Proxy_on_IIS"/> <strong>如何在IIS上安装反向代理</strong> <span class="ez-toc-section-end"/></h2><p>首先，您需要学习下载和安装扩展，因为默认情况下IIS没有反向代理路由功能。让我们来看一下本节的步骤，并回顾一下路由扩展的安装过程。</p><p><em>第一步:</em></p><p><em> <strong>注:</strong> </em>如你所知，必须先<strong>启用IIS </strong>。这里是<a href="https://www.iis.net/downloads/microsoft/application-request-routing" target="_blank" rel="noopener">应用程序请求路由</a>和<a href="https://www.iis.net/downloads/microsoft/url-rewrite" target="_blank" rel="noopener"> URL重写</a>链接，让您手动安装某些扩展。</p><p>当您安装扩展时，您将看到URL重写选项被添加到IIS仪表板的默认网站下。您必须查看如下内容:</p><p> </p><p><img data-lazyloaded="1" src="../Images/b466071509b21ec6021d01d474d56d6f.png" decoding="async" loading="lazy" class="aligncenter wp-image-31734 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1.png" alt="Routing Extensions installation" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/1.png 700w, https://blog.eldernode.com/wp-content/uploads/2021/05/1-300x119.png 300w" data-sizes="(max-width: 700px) 100vw, 700px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1.png"/></p><p><em>第二步:</em></p><p>现在，您可以<strong>添加一个反向代理规则</strong>。在URL重写选项内单击，并遵循以下路径来完成此操作:</p><p><strong>右边工具栏</strong> &gt; &gt;选择<strong>动作</strong> &gt; &gt; <strong>添加规则</strong> (s)… &gt; &gt; <strong>入库规则</strong> s &gt; &gt; <strong>空白规则或反向代理规则</strong>。</p><p> </p><p><img data-lazyloaded="1" src="../Images/ffb3aca09de970b53695d01ebba41965.png" decoding="async" loading="lazy" class="size-full wp-image-31698 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/clipboard_image_4.png" alt="add a reverse proxy rule" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/clipboard_image_4.png 210w, https://blog.eldernode.com/wp-content/uploads/2021/05/clipboard_image_4-186x300.png 186w" data-sizes="(max-width: 210px) 100vw, 210px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/clipboard_image_4.png"/></p><p> </p><p>然后，您应该会看到如下所示:</p><p> </p><p><img data-lazyloaded="1" src="../Images/279f613c962dc2bafc8d8b5e372cef5a.png" decoding="async" loading="lazy" class="size-full wp-image-31690 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1_qZoXrULWGZzbjP2ZwKutKQ.png" alt="Add a reverse proxy rule" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/1_qZoXrULWGZzbjP2ZwKutKQ.png 701w, https://blog.eldernode.com/wp-content/uploads/2021/05/1_qZoXrULWGZzbjP2ZwKutKQ-300x285.png 300w" data-sizes="(max-width: 701px) 100vw, 701px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1_qZoXrULWGZzbjP2ZwKutKQ.png"/></p><p> </p><p>让我们看看上图的选项是什么意思。</p><p><strong>图案:</strong></p><p>匹配反向代理路由的正则表达式形式的URL模式。它使用正则表达式格式。</p><p><strong>条件:</strong></p><p>补充模式的额外条件。(可选)</p><p><strong>服务器变量:</strong></p><p>如有必要，添加自定义服务器变量。(可选)</p><p><strong>动作:</strong></p><p>URL匹配时要执行的操作</p><p><strong>重写网址:</strong></p><p>匹配时要路由到的URL。</p><p><strong> <em>模式注意:</em> </strong>在<strong>模式</strong>的字段中，必须检查反向路由URL的属性是否匹配。如果是，暗示将模式设置为<em>(。*) </em>。用括号括起来的<strong>模式</strong>中的所有内容都可以在后面的<strong>重写URL </strong>框中依次引用(<em> {R:1} </em>、<em> {R:2} </em>等等)。<em> {R:0} </em>指整个URL。</p><p>如上图所示，<strong>http://api.myserver.com/myapi/auth/login</strong>的请求作为<strong>http://localhost:8080/auth/log in</strong>被路由到<strong> http://localhost:8080 </strong>。</p><p>这样就创建了<em><b>{ R:0 }—myapi/API/log in</b>和<b> {R:1} — auth/login </b> </em>变量。</p><p>修改完<b>模式</b>和<b>重写URL </b>后，点击<b>应用</b>即可应用修改。</p><p><span class="ez-toc-section" id="How_to_Configure_Reverse_Proxy_on_IIS"/> <strong>如何在IIS上配置反向代理</strong> <span class="ez-toc-section-end"/></p><h3>正如您在前面读到的，默认情况下，IIS是不启用的。因此，在本节中，您将学习如何启用IIS代理设置。按照下面的简单步骤继续在IIS上配置反向代理。</h3><p>1-打开<b> IIS管理器</b>并点击服务器。</p><p>2-双击<strong>应用请求路由</strong>选项。</p><p> </p><p><img data-lazyloaded="1" src="../Images/a9fa65cfe59c4764cc13e55b3848d797.png" decoding="async" loading="lazy" class="size-full wp-image-31694 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1_2hxUzWTIkhLOWrNWrQjytA.png" alt="How to Configure Reverse Proxy on IIS" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/1_2hxUzWTIkhLOWrNWrQjytA.png 599w, https://blog.eldernode.com/wp-content/uploads/2021/05/1_2hxUzWTIkhLOWrNWrQjytA-300x105.png 300w" data-sizes="(max-width: 599px) 100vw, 599px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1_2hxUzWTIkhLOWrNWrQjytA.png"/></p><p> </p><p>3-在右侧工具栏，选择服务器<strong>代理设置… </strong></p><p>4-检查<b>启用代理。</b></p><p><img data-lazyloaded="1" src="../Images/6bb6316fc352c7ed58f1157b74528105.png" decoding="async" loading="lazy" class="size-full wp-image-31696 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1_aqTknQVvypANI5kLvSoBqQ.png" alt="How to Configure Reverse Proxy on IIS" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/05/1_aqTknQVvypANI5kLvSoBqQ.png 629w, https://blog.eldernode.com/wp-content/uploads/2021/05/1_aqTknQVvypANI5kLvSoBqQ-300x203.png 300w" data-sizes="(max-width: 629px) 100vw, 629px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/05/1_aqTknQVvypANI5kLvSoBqQ.png"/></p><p> </p><p>5-点击<b>应用</b>并继续URL重写配置。</p><p><strong> <em>注:</em> </strong>启用转发代理未得到404未找到。如果只应用URL重写规则，就会发生这种情况。</p><p>就是这样！您刚刚回顾了在Windows IIS中启用反向代理路由所需的所有步骤。反向代理设置现在即将完成。</p><p><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></p><p>在本文中，您了解了如何在IIS上安装和配置反向代理。我们不希望你遇到严重的问题。IIS将能够捕获传入流量并将其转发到后端服务器，检查来自后端服务器的响应，并重写响应中的URL链接，以匹配IIS用于发布网站的主机头。</p><h2><span class="ez-toc-section" id="Conclusion"/>Conclusion<span class="ez-toc-section-end"/></h2><p>In this article, you learned How to Install And Configure Reverse Proxy on IIS. We do not expect you to encounter serious issues. IIS will be able to capture incoming traffic and forward it to the backend server and inspect responses from the backend server and rewrite URL links inside the responses to match the host headers that IIS uses to publish the site.</p></div></div>    
</body>
</html>