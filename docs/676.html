<html>
<head>
<title>How To Install LAMP On Debian 10 - ElderNode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Debian 10 - ElderNode博客上安装LAMP</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-lamp-debian-10/#0001-01-01">https://blog.eldernode.com/install-lamp-debian-10/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/fcc7d83e1915554d43e83cfe47771c2d.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install LAMP on Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/IMG_2209.png"/><p>[更新]LAMP(Linux、Apache、MariaDB、PHP)堆栈是一组流行的开源软件，通常安装在一起以使服务器能够托管动态网站和web应用程序。每一层都代表了堆栈的一个基本层，它们一起可以创建一个数据库驱动的动态网站。Linux是操作系统，Apache是HTTP服务器，MariaDB是数据库管理系统，PHP是编程语言。在这篇文章中，你将学习如何在Debian 10 上安装LAMP。要购买自己的<strong> <a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener"> Linux VPS </a> </strong>，看看<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>上可用的软件包，买下你考虑的所有东西。</p><h2><span class="ez-toc-section" id="Tutorial_Install_LAMP_On_Debian_10_step_by_step"/> <strong>教程在Debian 10上逐步安装LAMP</strong><span class="ez-toc-section-end"/></h2><p>为了帮助web应用程序工作，LAMP Stack必须包括操作系统、web服务器、数据库和编程语言。在本教程中，我们使用<span> <a href="https://eldernode.com/mariadb-installation-on-debian-10/" target="_blank" rel="noopener noreferrer"> Mariadb </a> </span>作为数据库管理系统。让我们执行以下步骤来开始并完成安装。和我们一起阅读这个指南，预览在Debian 10上安装LAMP的必要步骤。</p><h3><span class="ez-toc-section" id="Prerequisites_to_Install_LAMP_on_Debian_10_Linux"/> <strong>在Debian 10 Linux上安装LAMP的先决条件</strong> <span class="ez-toc-section-end"/></h3><p>如果您知道以下内容，本教程可能会更有用:</p><p>_拥有<span> <span> Sudo </span> </span>权限和配置有<span> <span> ufw </span> <span>防火墙的非root用户。</span>T9】</span></p><p>_要设置，请按照Debian 10 的<a href="https://eldernode.com/initial-setup-with-debian-10/" target="_blank" rel="noopener noreferrer">初始设置</a></p><h3><span class="ez-toc-section" id="How_to_Install_Apache_and_update_the_firewall"/> <strong>如何安装Apache并更新防火墙</strong> <span class="ez-toc-section-end"/></h3><p>由于Apache是世界上最流行的web服务器之一，我们选择它来托管网站。</p><p>首先，你需要安装Apache。所以，运行:</p><pre><code class="language-bash">sudo apt update</code></pre><pre><code class="language-bash">sudo apt install apache2</code></pre><p>若要查看应用程序配置文件列表，请运行以下命令。</p><pre><code class="language-bash">sudo ufw app list</code></pre><p>您可以使用<em> <span> WWW </span> </em>配置文件来管理web服务器使用的端口。</p><p><strong> <span>输出</span> </strong></p><pre><code class="language-bash">Available applications:  . . .    WWW    WWW Cache    WWW Full    WWW Secure  . . .  </code></pre><p>如您所见，交通对于<span> 80 </span>和<span> 443 </span>是启用的</p><pre><code class="language-bash">sudo ufw app info "WWW Full"</code></pre><p title="Output"><strong>输出</strong></p><pre><code class="language-bash">Profile: WWW Full  Title: Web Server (HTTP,HTTPS)  Description: Web Server (HTTP,HTTPS)    Ports:    80,443/tcp</code></pre><p>对于此配置文件，允许传入的HTTP和HTTPS流量。</p><pre><code class="language-bash">sudo ufw allow in "WWW Full"  </code></pre><p>并在web浏览器中访问服务器的公共IP地址，检查一切是否按计划进行。</p><pre><code class="language-bash">http://your_server_ip</code></pre><p>在下面，你会看到默认的Debian 10 Apache网页，显示了信息和测试的目的。</p><p> </p><p><img data-lazyloaded="1" src="../Images/78ba7d7dafc1b9c295cb99eb555eb9f7.png" decoding="async" loading="lazy" class="size-large wp-image-26830 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3-930x1024.jpg" alt="install LAMP on Debian 10" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3-930x1024.jpg 930w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3-272x300.jpg 272w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3-768x846.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3-1395x1536.jpg 1395w, https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3.jpg 1624w" data-sizes="(max-width: 930px) 100vw, 930px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/small_apache_default_debian9-3-930x1024.jpg"/></p><p> </p><p>有很多方法可以找到IP地址，这是你用来通过<a href="https://eldernode.com/tutorial-connect-to-ssh-on-linux/" target="_blank" rel="noopener noreferrer"> SSH </a>连接到你的服务器的地址。第一种方法是使用下面的命令:</p><pre><code class="language-bash">ip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\/.*$//'  </code></pre><p>或者使用以下替代方法:</p><pre><code class="language-bash">sudo apt install curl  </code></pre><pre><code class="language-bash">curl http://icanhazip.com  </code></pre><h3><span class="ez-toc-section" id="How_to_Install_MariaDB"/> <strong>如何安装MariaDB </strong> <span class="ez-toc-section-end"/></h3><p>在这一步中，您将安装数据库系统，以便能够为您的站点存储和管理数据。运行以下命令安装该软件:</p><pre><code class="language-bash">sudo apt install mariadb-server  </code></pre><p>接下来，建议您运行MariaDB预安装的安全脚本:</p><pre><code class="language-bash">sudo mysql_secure_installation</code></pre><p>刚安装完MariaDB时，在prom上按<strong> <em>进入</em> </strong>。而且由于MariaDB对<strong> root </strong>用户使用了特殊的认证方法，你需要键入<em> <strong> N </strong> </em>然后按<strong> <em>回车</em> </strong>。之后，您可以按下<em> <strong> Y </strong> </em>然后<em> <strong>输入</strong> </em>接受所有后续问题的默认设置。</p><p>完成后，登录到MariaDB控制台:</p><pre><code class="language-bash">sudo mariadb</code></pre><p title="Output"><strong>输出</strong></p><pre><code class="language-bash">Welcome to the MariaDB monitor.  Commands end with ; or \g.  Your MariaDB connection id is 74  Server version: 10.3.15-MariaDB-1 Debian 10    Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.    Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.    MariaDB [(none)]&gt;</code></pre><p>为了提高安全性，最好为每个数据库设置特权较少的专用用户帐户。为此，您需要创建一个新的数据库。</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; CREATE DATABASE example_database;  </code></pre><p>创建新用户并授予他们对定制数据库的完全权限后，使用下面的命令将该用户的密码定义为一个<em>密码。</em></p><pre><code class="language-bash">mariaDB [ (none) ] &gt; GRANT ALL ON <span class="highlight">example_database</span>.* TO '<span class="highlight">example_user</span>'@'localhost' IDENTIFIED BY '<span class="highlight">password</span>' WITH GRANT OPTION;  </code></pre><p>如果您需要确保它们已保存并在当前会话中可用:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; FLUSH PRIVILEGES;  </code></pre><p>然后，您可以退出MariaDB shell:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; exit</code></pre><p>要确认您有权访问<strong> example_database </strong>数据库，请在登录MariaDB控制台后键入以下命令。</p><p>然后，您可以退出MariaDB shell:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; SHOW DATABASES;</code></pre><p title="Output"><strong>输出</strong></p><pre><code class="language-bash">+--------------------+  | Database           |  +--------------------+  | example_database   |  | information_schema |  +--------------------+  2 rows in set (0.000 sec)</code></pre><p>同样，要退出MariaDB shell，请键入:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; exit</code></pre><h3><span class="ez-toc-section" id="How_to_Install_PHP_on_Debian_Linux"/> <strong>如何在Debian Linux上安装PHP</strong><span class="ez-toc-section-end"/></h3><p>PHP处理代码来显示动态内容和运行脚本，连接到MariaDB数据库来获取信息，并将处理后的内容交给web服务器来显示。为了确保PHP代码可以在Apache服务器下运行并与您的MariaDB数据库对话:</p><pre><code class="language-bash">sudo pt install php libapache2-mod-php php-mysql  </code></pre><p>让Apache首先查找一个<strong>index.php</strong>文件，然后通过下面的命令在一个具有root权限的文本编辑器中打开<strong> dir.conf </strong>文件:</p><pre><code class="language-bash">sudo nano /etc/apache2/mods-enabled/dir.conf  </code></pre><pre><code class="language-bash">&lt;IfModule mod_dir.c&gt;      DirectoryIndex index.html index.cgi index.pl <em>index.php</em> index.xhtml index.htm  &lt;/IfModule&gt;</code></pre><p>在<strong> DirectoryIndex </strong>规范之后，将PHP索引文件移动到<strong> DirectoryIndex </strong>规范之后的第一个位置。</p><pre><code class="language-bash">&lt;IfModule mod_dir.c&gt;      DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm  &lt;/IfModule&gt;</code></pre><p>然后，您可以使用以下命令重新加载Apache的配置:</p><pre><code class="language-bash">sudo systemctl reload apache2  </code></pre><p>运行这个命令来检查<strong> apache2 </strong>服务的状态:</p><pre><code class="language-bash">sudo systemctl status apache2</code></pre><p class="secondary-code-label" title="Sample Output"><strong>样本输出</strong></p><pre><code class="language-bash">● apache2.service - The Apache HTTP Server     Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)     Active: active (running) since Mon 2019-07-08 12:58:31 UTC; 8s ago       Docs: https://httpd.apache.org/docs/2.4/    Process: 11948 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SUCCESS)   Main PID: 11954 (apache2)      Tasks: 6 (limit: 4719)     Memory: 11.5M     CGroup: /system.slice/apache2.service             ├─11954 /usr/sbin/apache2 -k start             ├─11955 /usr/sbin/apache2 -k start             ├─11956 /usr/sbin/apache2 -k start             ├─11957 /usr/sbin/apache2 -k start             ├─11958 /usr/sbin/apache2 -k start             └─11959 /usr/sbin/apache2 -k start</code></pre><h3 id="step-4-—-creating-a-virtual-host-for-your-website"><span class="ez-toc-section" id="How_to_create_a_Virtual_Host_for_your_Website"/>如何为你的网站创建虚拟主机<span class="ez-toc-section-end"/></h3><p>为了测试您的PHP环境，您需要创建一个新的虚拟主机。它允许你在一台Apache服务器上托管多个网站。为<strong> your_domain </strong>创建web根目录。</p><pre><code class="language-bash">sudo mkdir /var/www/your_domain  </code></pre><p>引用您当前的系统用户</p><pre><code class="language-bash">sudo chown -R $USER:$USER /var/www/your_domain  </code></pre><p>通过您喜欢的命令行编辑器，在Apache的<strong> sites-available </strong>目录中打开一个新的配置文件</p><pre><code class="language-bash">sudo nano /etc/apache2/sites-available/<span class="highlight">your_domain</span>.conf  </code></pre><pre><code class="language-bash">VirtualHost *:80&gt;      ServerName your_domain      ServerAlias www.your_domain       ServerAdmin <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="077062656a6674736275476b6864666b6f687473">[email protected]</a>      DocumentRoot /var/www/your_domain      ErrorLog ${APACHE_LOG_DIR}/error.log      CustomLog ${APACHE_LOG_DIR}/access.log combined  &lt;/VirtualHost&gt;</code></pre><p>要启用该虚拟主机，请使用<strong> a2ensite </strong>:</p><pre><code class="language-bash">sudo a2ensite your_domain  </code></pre><p>如果您想禁用Apache的默认网站，请键入:</p><pre><code class="language-bash">sudo a2dissite 000-default  </code></pre><p>要检查配置语法错误，请运行:</p><pre><code class="language-bash">sudo apache2ctl configtest</code></pre><p>要使更改生效，请重新加载Apache:</p><pre><code class="language-bash">sudo systemctl reload apache2</code></pre><h3 id="step-5-—-testing-php-processing-on-your-web-server"><span class="ez-toc-section" id="How_to_Test_PHP_Processing_on_your_Web_Server"/> <strong>如何在你的Web服务器上测试PHP处理</strong> <span class="ez-toc-section-end"/></h3><p>在这一步中，您将确认Apache能够处理PHP文件请求。因此，在你的自定义webroot文件夹中创建一个名为<strong>info.php</strong>的新文件:</p><pre><code class="language-bash">nano /var/www/your_domain/info.php</code></pre><pre><code class="language-bash">&lt;?php  phpinfo();  </code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/961ddd60deab9ccbc346a9077fed8258.png" decoding="async" loading="lazy" class="size-full wp-image-24062 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/02/How-to-Enable-PHP-8-on-Directadmin.png" alt="Test PHP Processing on your Web Server" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/02/How-to-Enable-PHP-8-on-Directadmin.png 811w, https://blog.eldernode.com/wp-content/uploads/2021/02/How-to-Enable-PHP-8-on-Directadmin-300x229.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/02/How-to-Enable-PHP-8-on-Directadmin-768x585.png 768w" data-sizes="(max-width: 811px) 100vw, 811px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/02/How-to-Enable-PHP-8-on-Directadmin.png"/></p><p> </p><p>完成后，保存并关闭文件。</p><p>要测试您的web服务器是否能够正确显示这个PHP脚本生成的内容，您应该在web浏览器中访问这个页面。</p><p>您想要访问的地址是:</p><pre><code class="language-bash">http://your_domain/info.php</code></pre><p>当您检查PHP服务器信息时，删除您创建的文件，因为它包含关于您的PHP环境和Debian的敏感信息:</p><pre><code class="language-bash">serversudo rm /var/www/<span class="highlight">your_domain</span>/info.php  </code></pre><h3 id="step-6-—-testing-database-connection-from-php-optional"><span class="ez-toc-section" id="How_to_Test_Database_Connection_from_PHP"/> <strong>如何从PHP测试数据库连接</strong> <span class="ez-toc-section-end"/></h3><p>您可以使用数据库用户连接到MariaDB控制台:</p><pre><code class="language-bash">mariadb -u example_user -p  </code></pre><pre><code class="language-bash">mariaDB [ (none) ] &gt; CREATE TABLE <span class="highlight">example_database</span>.<span class="highlight">todo_list</span> (  mariaDB [ (none) ] &gt;   item_id INT AUTO_INCREMENT,  mariaDB [ (none) ] &gt; content VARCHAR(255),  mariaDB [ (none) ] &gt; PRIMARY KEY(item_id)  mariaDB [ (none) ] &gt; );</code></pre><p>然后，在测试表中插入几行内容:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; INSERT INTO <span class="highlight">example_database</span>.<span class="highlight">todo_list</span> (content) VALUES ("<span class="highlight">My first important item</span>");  </code></pre><p>运行以下命令，确认数据已成功保存到您的表中:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; SELECT * FROM example_database.todo_list;</code></pre><div title="Output"><p title="Output"><strong>输出</strong></p><pre><code class="language-bash">+---------+--------------------------+  | item_id | content                  |  +---------+--------------------------+  |       1 | My first important item  |  |       2 | My second important item |  |       3 | My third important item  |  |       4 | and this one more thing  |  +---------+--------------------------+  4 rows in set (0.000 sec)  </code></pre></div><p>当您可以确认表中有有效数据时，退出MariaDB控制台:</p><pre><code class="language-bash">mariaDB [ (none) ] &gt; exit</code></pre><p>通过您喜欢的编辑器，在您的自定义web根目录下创建一个新的PHP文件:</p><pre><code class="language-bash">nano /var/www/your_domain/todo_list.php</code></pre><p>现在，将这些内容复制到您的<strong> todo_list.php </strong>脚本中:</p><pre><code class="language-bash">&lt;?php  $user = "example_user";  $password = "password";  $database = "example_database";  $table = "todo_list";</code></pre><pre><code class="language-bash">try {  $db = new PDO("mysql:host=localhost;dbname=$database", $user, $password);  echo "&lt;h2&gt;TODO&lt;/h2&gt;&lt;ol&gt;";  foreach($db-&gt;query("SELECT content FROM $table") as $row) {  echo "&lt;li&gt;" . $row['content'] . "&lt;/li&gt;";  }  echo "&lt;/ol&gt;";  } catch (PDOException $e) {  print "Error!: " . $e-&gt;getMessage() . "&lt;br/&gt;";  die();  }</code></pre><p>编辑完成后，保存并关闭文件。通过访问您网站的域名或公共IP地址，y通过访问您网站的域名或公共IP地址。最后，您应该会看到您在测试表中插入的内容，如下所示:</p><p> </p><p><img data-lazyloaded="1" src="../Images/399d6b5fd1f5bb72c34f55d338134aea.png" decoding="async" loading="lazy" class="size-full wp-image-26832 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2020/07/todo_list-1.jpg" alt="php sample code on debian 10" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/07/todo_list-1.jpg 424w, https://blog.eldernode.com/wp-content/uploads/2020/07/todo_list-1-300x127.jpg 300w" data-sizes="(max-width: 424px) 100vw, 424px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/07/todo_list-1.jpg"/></p><p> </p><p>当您到达这一步时，您的PHP环境就准备好与您的MariaDB服务器进行连接和交互了。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在这篇文章中。您学习了如何在Debian 10上安装LAMP。此外，您可以安装<a href="https://blog.eldernode.com/install-composer-debian-10/" target="_blank" rel="noopener"> Composer </a>用于PHP中的依赖和包管理，以改进您当前的设置。你也可以围绕这个主题继续阅读。所以，请参考<a href="https://blog.eldernode.com/install-lamp-stack-on-centos-8/" target="_blank" rel="noopener">在CentOS 8上安装灯</a>和<a href="https://blog.eldernode.com/how-to-install-lamp-on-ubuntu-20-04/" target="_blank" rel="noopener"> Ubuntu 20.04 </a>。</p></div></div>    
</body>
</html>