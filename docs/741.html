<html>
<head>
<title>Introducing and Configure HAProxy Stats - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>介绍和配置HAProxy Stats - Eldernode博客</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/introducing-and-configure-haproxy-stats/#0001-01-01">https://blog.eldernode.com/introducing-and-configure-haproxy-stats/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/6400feee9989dee65bf39f02bfedb956.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Introducing and Configure HAProxy Stats" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/04/Introducing-and-Configure-HAProxy-Stats.png"/><p>HAProxy是一个软件，通过它你将能够创建一个强大的负载平衡器。HAProxy代表高可用性代理。该软件是负载平衡领域中最强大、最好、最专业的软件之一。有了这个系统，你就可以在不同的服务器之间分配你的访问者。这将增加您的正常运行时间。此外，并非所有的压力都集中在一台服务器上，而是分散在几台服务器上。这篇文章是关于<strong>介绍和配置HAProxy Stats </strong>。注意，如果你想买一个<a href="https://eldernode.com/vps/" target="_blank" rel="noopener"> VPS服务器</a>，你可以在<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>看到可用的包。</p><h2><span class="ez-toc-section" id="Introducing_HAProxy_Stats_Complete"/> <strong>介绍HAProxy统计【完整】</strong> <span class="ez-toc-section-end"/></h2><p>HAproxy是最流行的负载平衡软件之一。需要注意的是，HAproxy被用于很多高负载环境，比如GitHub、Imgur、Instagram、Twitter。在下一节中，我们将尝试为您提供一个HAProxy统计的定义。在熟悉了HAProxy Stats的定义之后，下一步，我们将提到HAProxy Stats的一些特性。然后我们将一步一步地解释如何在Ubuntu/CentOS上安装HAProxy，在最后一部分我们将教你如何配置HAProxy Stats。请陪我们继续这篇文章。</p><h3><span class="ez-toc-section" id="What_is_HAProxy_Stats"/> <strong>什么是HAProxy Stats？</strong>T3】</h3><p>HAProxy是开源软件，通常用作web服务的负载平衡器和代理。这个工具甚至可以用来平衡TCP流量。负载平衡是对多个资源(如网络、处理器、磁盘等)之间负载分布的改进。).这项工作的目的是什么？提高资源利用率，增加吞吐量，减少响应时间，并防止资源过载。</p><p>HAProxy服务器不是在物理上，而是在逻辑上位于web服务器的前面，用户请求首先被发送到这个服务器。然后，该服务器根据为其定义的算法调整web服务器的负载。</p><h3><span class="ez-toc-section" id="HAProxy_Stats_Features"/> <strong> HAProxy Stats特性</strong> <span class="ez-toc-section-end"/></h3><p>HAProxy会给你很棒的功能。例如，使用该软件，如果您的一台服务器崩溃并停机，您可以将用户重定向到第二台/第三台服务器。这将减少您的停机时间，并防止对服务器的压力。有了HAProxy，你还可以根据每台服务器的能力来分配访客。</p><p>为了说明为什么它的性能如此之好，HAProxy列出了许多架构特性，包括事件驱动、零拷贝转发、O (1)事件检查器等等。</p><h2><span class="ez-toc-section" id="How_to_Install_HAProxy_on_UbuntuCentOS"/> <strong>如何在Ubuntu/CentOS上安装ha proxy</strong><span class="ez-toc-section-end"/></h2><p>在这一节中，我们将一步步教你如何在<a href="https://blog.eldernode.com/tag/ubuntu/"> Ubuntu </a> /CentOS上安装HAProxy。基于此，第一步，我们将教你如何在Ubuntu上安装HAProxy，然后在<a href="https://blog.eldernode.com/tag/centos/" target="_blank" rel="noopener"> CentOS </a>上安装。请加入我们。</p><p><strong>在Ubuntu上安装ha proxy</strong></p><p>在这一节的开始，我们将教你如何<strong>在Ubuntu </strong>上安装HAProxy。第一步，您可以输入以下命令来了解通过官方渠道提供的版本号:</p><pre><code class="language-bash">sudo apt show haproxy</code></pre><p>然后，要从外部存储库安装HAProxy，必须使用以下命令添加新的存储库。键入以下命令后，按<strong>回车</strong>确认添加新的PPA:</p><pre><code class="language-bash">sudo add-apt-repository ppa:vbernat/haproxy-1.7</code></pre><p>下一步是使用以下命令更新您的资源列表:</p><pre><code class="language-bash">sudo apt update</code></pre><p>最后，您可以通过运行以下命令在Ubuntu系统上安装HAProxy :</p><pre><code class="language-bash">sudo apt install -y haproxy</code></pre><p><strong>在CentOS 8上安装ha proxy</strong></p><p>下面介绍如何<strong>在CentOS 8 </strong>上安装HAProxy。首先，您需要运行以下命令来找到HAProxy的最新版本:</p><pre><code class="language-bash">sudo yum info haproxy</code></pre><p>然后你需要检查你是否具备下载和编辑程序的先决条件。为此，请使用以下命令:</p><pre><code class="language-bash">sudo yum install gcc pcre-devel tar make -y</code></pre><p>在下一步中，您必须使用以下命令<strong>下载</strong>源代码:</p><pre><code class="language-bash">wget http://www.haproxy.org/download/2.0/src/haproxy-2.0.7.tar.gz -O ~/haproxy.tar.gz</code></pre><p><em> <strong>注:</strong> </em>最新版本的HAProxy参见<a href="http://www.haproxy.org/#down"> HAProxy下载页面</a>。</p><p>现在，您需要通过执行以下命令来<strong>提取</strong>文件:</p><pre><code class="language-bash">tar xzvf ~/haproxy.tar.gz -C ~/</code></pre><p>成功提取文件后，现在必须通过以下命令输入提取的源代码列表:</p><pre><code class="language-bash">cd ~/haproxy-2.0.7</code></pre><p>注意，你必须<strong>为你的系统编译</strong>这个程序。为此，您必须使用以下命令:</p><pre><code class="language-bash">make TARGET=linux-glibc</code></pre><p>最后，您可以使用以下命令<strong>安装HAProxy </strong>:</p><pre><code class="language-bash">sudo make install</code></pre><h3><span class="ez-toc-section" id="How_to_Configure_HAProxy_Stats"/> <strong>如何配置HAProxy Stats </strong> <span class="ez-toc-section-end"/></h3><p>在您成功完成上一步中的HAProxy安装步骤后，现在是时候配置它了。您可以在web浏览器中查看HAProxy统计数据。HAProxy Stats提供了大量关于数据传输、总连通性、服务器状态等信息。您可以通过使用以下步骤对HAProxy设置进行一些更改来轻松配置它。</p><p>第一步，你需要<strong>启用HAProxy Stats </strong>。请注意，您可以在HAProxy中启用统计。为此，您需要编辑您的HAProxy配置文件。因此，您必须在默认部分之后添加以下命令:</p><p> </p><p><img data-lazyloaded="1" src="../Images/9480b0cfadd4a371328864688a43d4f0.png" decoding="async" loading="lazy" class="aligncenter wp-image-29872 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/04/01.jpg" alt="Enable HAProxy Statics" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/04/01.jpg 884w, https://blog.eldernode.com/wp-content/uploads/2021/04/01-300x177.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2021/04/01-768x453.jpg 768w" data-sizes="(max-width: 884px) 100vw, 884px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/04/01.jpg"/></p><p> </p><p>在下一步中，您可以使用以下URL轻松地<strong>访问HAProxy </strong>统计数据。为此，在上面的配置中，使用服务器的<strong> IP地址</strong>，后跟统计URI。正如您在以下命令中看到的那样，您可以使用配置文件中带有统计信息的已配置登录信息:</p><pre><code class="language-bash">URL: http://YourIPAddress:PortNumber/haproxy?stats</code></pre><pre><code class="language-bash">Login user: admin</code></pre><pre><code class="language-bash">Login password: password</code></pre><p>然后，您可以看到如下所示的统计数据:</p><p> </p><p><img data-lazyloaded="1" src="../Images/5b414d9dd787b5e5d375676d2d743c9e.png" decoding="async" loading="lazy" class="aligncenter wp-image-29871 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/04/haproxy-stats.png" alt="haproxy stats" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/04/haproxy-stats.png 963w, https://blog.eldernode.com/wp-content/uploads/2021/04/haproxy-stats-300x193.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/04/haproxy-stats-768x494.png 768w" data-sizes="(max-width: 963px) 100vw, 963px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/04/haproxy-stats.png"/></p><p> </p><p>注意，如果您想<strong>更改HAProxy stats的</strong> <strong>登录细节</strong>，您可以编辑您的配置文件。按照下面的命令更新“<strong> stats auth </strong>的值。然后你需要<strong>保存</strong>配置文件并退出。您需要<strong>重启</strong>系统以应用您所做的更改。</p><pre><code class="language-bash">stats auth username:password</code></pre><p>最后，您可以编辑配置文件来更改HAProxy统计数据的URL，并使用以下命令更新它:</p><pre><code class="language-bash">stats uri /ha-stats</code></pre><p>或者</p><pre><code class="language-bash">stats uri /stats</code></pre><p>您需要再次<strong>保存</strong>文件，然后<strong>重启</strong>系统以应用更改。</p><p>现在，正确完成上述步骤后，您可以使用以下地址访问URL:</p><pre><code class="language-bash">http://YourDomainAddress:PortNumber/ha-stats</code></pre><p>或者</p><pre><code class="language-bash">http://YourDomainAddress:PortNumber/stats</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>HAProxy是负载均衡领域免费且非常强大的服务之一。此服务用于提高web服务器的性能和可用性。该服务也可以在Linux、Solaris和FreeBSD平台上启动。这种免费且非常小的服务具有非常高的性能，也用于企业环境中。在本文中，我们试图介绍如何引入和配置HAProxy Stats。</p></div></div>    
</body>
</html>