<html>
<head>
<title>Tutorial Setup and Use Fail2ban on Rocky Linux - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>洛基Linux - Eldernode博客上的教程设置和使用Fail2ban</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/setup-and-use-fail2ban-on-rocky-linux/#0001-01-01">https://blog.eldernode.com/setup-and-use-fail2ban-on-rocky-linux/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/ca9d1d53ad624e468b8e4fedd680a6d0.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Setup and Use Fail2ban on Rocky Linux" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Setup-and-Use-Fail2ban-on-Rocky-Linux.png"/><p>Fail2ban是防止暴力攻击的软件。这个用Python编写的软件使它能够在本地安装了用户界面或防火墙的POSIX Fail2ban系统上运行。Fail2ban实际上负责监视所选内容的日志文件，并根据所选内容执行脚本。在这篇文章中，我们将一步一步地教你如何在Rocky Linux上设置和使用Fail2ban。如果你需要购买一台<a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener"> <strong> Linux VPS </strong> </a>服务器，你可以在<a href="https://eldernode.com/"> Eldernode </a>中看到可用的软件包。</p><h2><span class="ez-toc-section" id="How_to_Install_and_Use_Fail2ban_on_Rocky_Linux"/> <strong>如何在洛基Linux上安装使用fail 2 ban</strong><span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="Introduction_to_Fail2ban"/> <strong>失败2班简介</strong> <span class="ez-toc-section-end"/></h3><p>Fail2ban不是防火墙，而是一个界面软件，用来检查你的系统日志。如果多次尝试在您的系统中输入成功的名称，它会暂时将该IP列入防火墙的黑名单。</p><p>服务器管理员为服务器上的每个活动设置时间。例如，每个人最多可以用错误的密码向服务器发送3次登录请求。Fail2ban屏蔽了这段时间以来被强奸的人。这可以防止创建涉及服务器处理器的多个日志。</p><p>尽管Fail2ban提供了所有这些解释和许多特性来创建服务器上的安全性，但这个流行的软件仍然有三个缺点。首先，Fail2ban与某些应用程序(如API和AGI)没有交互。第二种情况是这个程序不支持IPv6，如果恶意的人使用这种类型的IP进行暴力攻击，Fail2ban将不会做任何事情。但第三种情况是主要的弱点。Fail2ban是它无法在分布式攻击中保护服务器。如果攻击者使用几个不同的来源进行攻击，这个程序将无法响应。</p><p>在这篇文章的剩余部分，请关注我们如何在Rocky <a href="https://blog.eldernode.com/tag/linux/" target="_blank" rel="noopener"> Linux </a>上设置Fail2ban。</p><h2><span class="ez-toc-section" id="Setup_Fail2ban_on_Rocky_Linux"/> <strong>安装失败2禁止在洛基Linux上</strong> <span class="ez-toc-section-end"/></h2><p>在这一节，我们将教你如何在Rocky Linux上设置Fail2ban。为此，您必须按顺序执行以下步骤。</p><p>在第一步中，我们希望使用以下命令<strong>启动防火墙</strong>:</p><pre><code class="language-bash">sudo systemctl start firewalld</code></pre><p>现在你需要<strong>启动防火墙</strong>来启动:</p><pre><code class="language-bash">sudo systemctl enable firewalld</code></pre><p>您可以使用以下命令检查防火墙的<strong>状态:</strong></p><pre><code class="language-bash">sudo systemctl status firewalld</code></pre><p>有趣的是，您可以使用以下命令来验证所有正在运行的防火墙规则:</p><pre><code class="language-bash">sudo firewall-cmd --list-all</code></pre><p>下一步是使用下面的命令<strong>安装EPEL存储库</strong>。应该注意的是，EPEL库为基于RHEL的发行版提供了高质量的包:</p><pre><code class="language-bash">sudo dnf install epel-release</code></pre><p>安装了EPEL库之后，您现在需要使用以下命令<strong>安装fail2ban </strong>和fail2ban-firewalld软件包:</p><pre><code class="language-bash">sudo dnf install fail2ban fail2ban-firewalld</code></pre><p>然后，您可以通过运行以下命令来<strong>启动fail2ban </strong>:</p><pre><code class="language-bash">sudo systemctl start fail2ban</code></pre><p>您还可以通过运行以下命令来<strong>使fail2ban </strong>在引导时启动:</p><pre><code class="language-bash">sudo systemctl enable fail2ban</code></pre><p>最后，您可以使用以下命令检查fail2ban的状态:</p><pre><code class="language-bash">sudo systemctl status fail2ban</code></pre><h3><span class="ez-toc-section" id="How_to_Configure_Fail2ban_on_Rocky_Linux"/> <strong>如何在Rocky Linux上配置fail 2 ban</strong><span class="ez-toc-section-end"/></h3><p>在您能够按照上一节的说明设置Fail2ban之后，我们现在想教您如何在Rocky Linux上配置Fail2ban。</p><p>为此，您需要打开<strong> etc/fail2ban/jail.conf </strong>配置文件进行编辑。然后将<strong> jail.conf </strong>配置文件的内容复制到jail.local文件中，如下所示:</p><pre><code class="language-bash">sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</code></pre><p>然后使用文本编辑器文件打开<strong> jail.local </strong>文件:</p><pre><code class="language-bash">sudo vim /etc/fail2ban/jail.local</code></pre><p>您应该注意，在<strong>【默认】</strong>部分，检查如下设置:</p><pre><code class="language-bash">bantime = 1h  findtime = 1h  maxretry = 5</code></pre><p>现在，您需要使用以下命令来配置fail2ban，以便使用firewalld而不是iptables:</p><pre><code class="language-bash">sudo mv /etc/fail2ban/jail.d/00-firewalld.conf /etc/fail2ban/jail.d/00-firewalld.local</code></pre><p>最后，在进行更改后，<strong>使用以下命令重启fail2ban </strong>一次:</p><pre><code class="language-bash">sudo systemctl restart fail2ban</code></pre><h3><span class="ez-toc-section" id="How_to_Use_Fail2ban_on_Rocky_Linux"/> <strong>如何在Rocky Linux上使用fail 2 ban</strong><span class="ez-toc-section-end"/></h3><p>在前面的部分中，我们教了您如何设置和配置fail2ban。现在我们想向您展示如何使用fail2ban。在下面的示例中，我们希望通过为每个密码设置不正确的密码来模拟3次失败的登录。</p><p>要执行这个测试，您需要进入一个远程Linux系统，并尝试使用错误的密码登录。您会注意到，在3次不成功的尝试后，连接将被断开。换句话说，任何进入的企图都将被阻止，直到禁令解除。</p><p> </p><p><img data-lazyloaded="1" src="../Images/d04176f873e4b7497b4cec2f1c4dd981.png" decoding="async" loading="lazy" class="aligncenter wp-image-34539 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/09/Testing-Fail2ban-in-Linux.jpg" alt="Testing-Fail2ban-in-Linux" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/09/Testing-Fail2ban-in-Linux.jpg 934w, https://blog.eldernode.com/wp-content/uploads/2021/09/Testing-Fail2ban-in-Linux-300x84.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2021/09/Testing-Fail2ban-in-Linux-768x215.jpg 768w" data-sizes="(max-width: 934px) 100vw, 934px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/09/Testing-Fail2ban-in-Linux.jpg"/></p><p> </p><p>您可以使用以下命令检查被阻止的客户端系统的jail状态:</p><pre><code class="language-bash">sudo fail2ban-client status sshd</code></pre><p>请注意，您可以使用以下命令从jail中删除客户端:</p><pre><code class="language-bash">sudo fail2ban-client unban 192.168.2.102</code></pre><p>运行以下命令查看jail状态，并确保该客户端不在禁止的IP列表中:</p><pre><code class="language-bash">sudo fail2ban-client status sshd</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>黑客经常使用各种方法来攻击服务器。影响服务器的常见攻击之一是“密码攻击”。fail2ban工具可以成为应对这类攻击的有效方法。在本文中，我们试图教您如何在Rocky Linux上设置和使用Fail2ban。</p></div></div>    
</body>
</html>