<html>
<head>
<title>How To Install And Configure OpenVAS On Ubuntu 20.04 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.04上安装和配置open vas-elder node</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-and-configure-openvas-on-ubuntu/#0001-01-01">https://blog.eldernode.com/install-and-configure-openvas-on-ubuntu/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/f4343fc71649d4ebe40370fadaef4c31.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How To Install And Configure OpenVAS On Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/How-To-Install-And-Configure-OpenVAS-On-Ubuntu-20.04.png"/><p><strong>Open V</strong>vulnerability<strong>A</strong>assessment<strong>S</strong>system是一款免费的漏洞扫描软件。OpenVAS的大多数组件都是在GNU通用公共许可证(GPL)下授权的。OpenVAS 9框架发布后，它被重命名为<strong>G</strong>reebone<strong>V</strong>vulnerability<strong>M</strong>management，并作为Greenbone源代码版本发布。OpenVAS设计为在Linux环境中运行，也可以作为独立的虚拟机安装。在这篇文章中，你将学习如何在Ubuntu 20.04上安装和配置OpenVAS。要购买您自己的<a href="https://eldernode.com/ubuntu-vps/" target="_blank" rel="noopener"> Ubuntu VPS </a>，请访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>上根据您的需求定制的可用软件包。</p><p>为了让本教程更好地发挥作用，请考虑以下<strong>先决条件</strong>:</p><p>–拥有Sudo权限的非root用户。</p><p>–要进行设置，请遵循我们在Ubuntu 20.04 上的<a href="https://blog.eldernode.com/initial-server-setup-on-ubuntu-20/" target="_blank" rel="noopener">初始服务器设置。</a></p><p>–至少4 GB内存。</p><p>–至少4个vCPUs。</p><p>–超过8 GB的磁盘空间。</p><h2><span class="ez-toc-section" id="Tutorial_Install_And_Configure_OpenVAS_On_Ubuntu_2004"/> <strong>教程在Ubuntu 20.04上安装配置open vas</strong><span class="ez-toc-section-end"/></h2><p>GVM以前称为OpenVAS，是一个用于漏洞扫描和漏洞管理的开源解决方案。安全专家和普通用户使用这一整套工具。OpenVAS被广泛用于使用自己的已知弱点和漏洞数据库对客户端计算机进行测试。请确保您的服务器免受攻击，并与我们一起查看OpenVAS在<a href="https://blog.eldernode.com/tag/ubuntu/" target="_blank" rel="noopener"> Ubuntu </a> 20.04上的安装。</p><h2><span class="ez-toc-section" id="How_To_Install_GVM_On_Ubuntu_2004_Ubuntu_1804"/> <strong>如何在Ubuntu 20.04上安装GVM |</strong>T3】Ubuntu 18.04T5】</h2><p>让我们浏览一下本指南的步骤，成为OpenVAS安装专家。一如既往，从更新您的系统包开始。使用以下命令将您的系统软件包更新到最新版本:</p><pre><code class="language-bash">apt-get update -y</code></pre><h3><span class="ez-toc-section" id="How_to_install_Prerequisites"/> <strong>如何安装先决条件</strong> <span class="ez-toc-section-end"/></h3><p>首先你需要安装下面的<strong>依赖包</strong>。</p><pre><code class="language-bash">sudo su -</code></pre><pre><code class="language-bash">apt update &amp;&amp;\</code></pre><pre><code class="language-bash">apt -y dist-upgrade &amp;&amp;\</code></pre><pre><code class="language-bash">apt -y autoremove &amp;&amp;\</code></pre><pre><code class="language-bash">apt install -y software-properties-common &amp;&amp;\</code></pre><pre><code class="language-bash">apt install -y build-essential cmake pkg-config libglib2.0-dev libgpgme-dev libgnutls28-dev uuid-dev libssh-gcrypt-dev libldap2-dev doxygen graphviz libradcli-dev libhiredis-dev libpcap-dev bison libksba-dev libsnmp-dev gcc-mingw-w64 heimdal-dev libpopt-dev xmltoman redis-server xsltproc libical-dev postgresql postgresql-contrib postgresql-server-dev-all gnutls-bin nmap rpm nsis curl wget fakeroot gnupg sshpass socat snmp smbclient libmicrohttpd-dev libxml2-dev python3-polib gettext rsync xml-twig-tools python3-paramiko python3-lxml python3-defusedxml python3-pip python3-psutil python3-impacket virtualenv vim git &amp;&amp;\</code></pre><pre><code class="language-bash">apt install -y texlive-latex-extra --no-install-recommends &amp;&amp;\</code></pre><pre><code class="language-bash">apt install -y texlive-fonts-recommended &amp;&amp;\</code></pre><pre><code class="language-bash">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add - &amp;&amp;\</code></pre><pre><code class="language-bash">echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list &amp;&amp;\</code></pre><pre><code class="language-bash">apt update &amp;&amp;\</code></pre><pre><code class="language-bash">apt -y install yarn &amp;&amp;\</code></pre><pre><code class="language-bash">yarn install &amp;&amp;\</code></pre><pre><code class="language-bash">yarn upgrade</code></pre><h3><span class="ez-toc-section" id="How_to_create_the_GVM_user"/> <strong>如何创建GVM用户</strong> <span class="ez-toc-section-end"/></h3><p>现在，您必须创建GVM用户。打开终端，粘贴下面的命令来创建GVM用户。然后，将在安装和编译过程中使用它。</p><pre><code class="language-bash">echo 'export PATH="$PATH:/opt/gvm/bin:/opt/gvm/sbin:/opt/gvm/.local/bin"' | tee -a /etc/profile.d/gvm.sh &amp;&amp;\</code></pre><pre><code class="language-bash">chmod 0755 /etc/profile.d/gvm.sh &amp;&amp;\</code></pre><pre><code class="language-bash">source /etc/profile.d/gvm.sh &amp;&amp;\</code></pre><pre><code class="language-bash">bash -c 'cat &lt; /etc/ld.so.conf.d/gvm.conf</code></pre><pre><code class="language-bash"># gmv libs location</code></pre><pre><code class="language-bash">/opt/gvm/lib</code></pre><pre><code class="language-bash">EOF'</code></pre><pre><code class="language-bash">mkdir /opt/gvm &amp;&amp;\</code></pre><pre><code class="language-bash">adduser gvm --disabled-password --home /opt/gvm/ --no-create-home --gecos '' &amp;&amp;\</code></pre><pre><code class="language-bash">usermod -aG redis gvm &amp;&amp;\</code></pre><pre><code class="language-bash">chown gvm:gvm /opt/gvm/</code></pre><p>现在，您可以登录GVM用户:</p><pre><code class="language-bash">sudo su - gvm</code></pre><h2><span class="ez-toc-section" id="How_to_download_and_install_GVM"/> <strong>如何下载安装GVM </strong> <span class="ez-toc-section-end"/></h2><p>在这一步中，您将通过创建src文件夹来下载和安装软件，并由git克隆GVM源代码。因此，导航到上面创建的临时目录并运行后续命令。</p><pre><code class="language-bash">mkdir src &amp;&amp;\  </code></pre><pre><code class="language-bash">cd src &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH</code></pre><pre><code class="language-bash">git clone -b gvm-libs-20.08 --single-branch https://github.com/greenbone/gvm-libs.git &amp;&amp;\</code></pre><pre><code class="language-bash">git clone -b openvas-20.08 --single-branch https://github.com/greenbone/openvas.git &amp;&amp;\</code></pre><pre><code class="language-bash">git clone -b gvmd-20.08 --single-branch https://github.com/greenbone/gvmd.git &amp;&amp;\</code></pre><pre><code class="language-bash">git clone -b master --single-branch https://github.com/greenbone/openvas-smb.git &amp;&amp;\</code></pre><pre><code class="language-bash">git clone -b gsa-20.08 --single-branch https://github.com/greenbone/gsa.git &amp;&amp;\</code></pre><pre><code class="language-bash">git clone -b ospd-openvas-20.08 --single-branch https://github.com/greenbone/ospd-openvas.git &amp;&amp;\</code></pre><pre><code class="language-bash">git clone -b ospd-20.08 --single-branch https://github.com/greenbone/ospd.git</code></pre><h3><span class="ez-toc-section" id="How_to_install_gvm-libs"/> <strong>如何安装gvm-libs </strong> <span class="ez-toc-section-end"/></h3><p>是时候从GitHub安装和编译gvm-libs了。使用下面的命令将目录更改为gvm-libs，导出配置路径并创建一个构建目录。</p><pre><code class="language-bash">cd gvm-libs &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH &amp;&amp;\</code></pre><pre><code class="language-bash">mkdir build &amp;&amp;\</code></pre><pre><code class="language-bash">cd build &amp;&amp;\</code></pre><pre><code class="language-bash">cmake -DCMAKE_INSTALL_PREFIX=/opt/gvm .. &amp;&amp;\</code></pre><pre><code class="language-bash">make &amp;&amp;\</code></pre><pre><code class="language-bash">make doc &amp;&amp;\</code></pre><pre><code class="language-bash">make install &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="How_to_install_openvas-smb"/> <strong>如何安装openvas-smb </strong> <span class="ez-toc-section-end"/></h3><p>使用下面的命令进入Openvas-smb目录并编译源代码。</p><pre><code class="language-bash">cd openvas-smb &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH &amp;&amp;\</code></pre><pre><code class="language-bash">mkdir build &amp;&amp;\</code></pre><pre><code class="language-bash">cd build/ &amp;&amp;\</code></pre><pre><code class="language-bash">cmake -DCMAKE_INSTALL_PREFIX=/opt/gvm .. &amp;&amp;\</code></pre><pre><code class="language-bash">make &amp;&amp;\</code></pre><pre><code class="language-bash">make install &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="How_to_install_OpenVAS_Scanner"/> <strong>如何安装OpenVAS扫描仪</strong> <span class="ez-toc-section-end"/></h3><p>同样，您需要构建并安装OpenVas扫描仪。</p><pre><code class="language-bash">cd openvas &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH &amp;&amp;\</code></pre><pre><code class="language-bash">mkdir build &amp;&amp;\</code></pre><pre><code class="language-bash">cd build/ &amp;&amp;\</code></pre><pre><code class="language-bash">cmake -DCMAKE_INSTALL_PREFIX=/opt/gvm .. &amp;&amp;\</code></pre><pre><code class="language-bash">make &amp;&amp;\</code></pre><pre><code class="language-bash">make doc &amp;&amp;\</code></pre><pre><code class="language-bash">make install &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="How_to_fix_Redis_for_OpenVAS_install"/> <strong>如何为OpenVAS安装修复Redis</strong><span class="ez-toc-section-end"/></h3><p>要注销当前会话以返回特权用户，您应该在终端中键入“exit”。然后，粘贴以下代码。</p><pre><code class="language-bash">export LC_ALL="C" &amp;&amp;\</code></pre><pre><code class="language-bash">ldconfig &amp;&amp;\</code></pre><pre><code class="language-bash">cp /etc/redis/redis.conf /etc/redis/redis.orig &amp;&amp;\</code></pre><pre><code class="language-bash">cp /opt/gvm/src/openvas/config/redis-openvas.conf /etc/redis/ &amp;&amp;\</code></pre><pre><code class="language-bash">chown redis:redis /etc/redis/redis-openvas.conf &amp;&amp;\</code></pre><pre><code class="language-bash">echo "db_address = /run/redis-openvas/redis.sock" &gt; /opt/gvm/etc/openvas/openvas.conf &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl enable <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="473522232e346a342235312235072837222931263469342235312e2422">[email protected]</a> &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl start <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1a687f7e736937697f686c7f685a756a7f746c7b6934697f686c73797f">[email protected]</a></code></pre><pre><code class="language-bash">sysctl -w net.core.somaxconn=1024 &amp;&amp;\</code></pre><pre><code class="language-bash">sysctl vm.overcommit_memory=1 &amp;&amp;\</code></pre><pre><code class="language-bash">echo "net.core.somaxconn=1024" &gt;&gt; /etc/sysctl.conf &amp;&amp;\</code></pre><pre><code class="language-bash">echo "vm.overcommit_memory=1" &gt;&gt; /etc/sysctl.conf</code></pre><pre><code class="language-bash">systemctl daemon-reload &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl start disable-thp &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl enable disable-thp &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl restart redis-server</code></pre><p>此时，您应该将<strong> <em> /opt/gvm/sbin </em> </strong>路径添加到secure_path变量中:</p><pre><code class="language-bash">sed 's/Defaults\s.*secure_path=\"\/usr\/local\/sbin:\/usr\/local\/bin:\/usr\/sbin:\/usr\/bin:\/sbin:\/bin:\/snap\/bin\"/Defaults secure_path=\"\/usr\/local\/sbin:\/usr\/local\/bin:\/usr\/sbin:\/usr\/bin:\/sbin:\/bin:\/snap\/bin:\/opt\/gvm\/sbin\"/g' /etc/sudoers | EDITOR='tee' visudo</code></pre><p>现在，使用以下命令允许运行ospd-openvas的用户使用<strong> root </strong>权限启动。</p><pre><code class="language-bash">echo "gvm ALL = NOPASSWD: /opt/gvm/sbin/openvas" &gt; /etc/sudoers.d/gvm</code></pre><pre><code class="language-bash">echo "gvm ALL = NOPASSWD: /opt/gvm/sbin/gsad" &gt;&gt; /etc/sudoers.d/gvm</code></pre><h3><span class="ez-toc-section" id="How_to_update_NVT"/> <strong>如何更新NVT </strong> <span class="ez-toc-section-end"/></h3><p>在本节中，您将更新漏洞文件定义。为此，应该运行greenbone-nvt。但是首先，切换回GVM用户会话。</p><pre><code class="language-bash">sudo su – gvm</code></pre><p>然后，键入:</p><pre><code class="language-bash">greenbone-nvt-sync</code></pre><p>您可能会因为防火墙而面临超时错误。打开TCP端口873，如果你得到连接被拒绝的错误，去喝杯咖啡，然后再回来。这需要很长时间。</p><h3><span class="ez-toc-section" id="Upload_plugins_in_Redis_with_GVM"/> <strong>用GVM </strong> <span class="ez-toc-section-end"/>将插件上传到中继站</h3><p>使用OpenVAS在<a href="https://blog.eldernode.com/configure-redis-on-linux-ubuntu-20-04/"> Redis </a>中上传插件将会很耗时，这取决于您的硬件。此外，当您运行该命令时，您将不会收到任何反馈。</p><pre><code class="language-bash">sudo openvas -u</code></pre><p>如果您遇到缺失库错误，请运行以下命令。</p><pre><code class="language-bash">exit</code></pre><pre><code class="language-bash">echo "/opt/gvm/lib &gt; /etc/ld.so.conf.d/gvm.conf</code></pre><pre><code class="language-bash">ldconfig</code></pre><pre><code class="language-bash">sudo su - gvm</code></pre><h3><span class="ez-toc-section" id="Install_GreenboneManager"/> <strong>安装green bonemanager</strong>T3】</h3><p>要构建和安装Greenbone Manager，请进入gvmd目录:</p><pre><code class="language-bash">cd /opt/gvm/src/gvmd &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH &amp;&amp;\</code></pre><pre><code class="language-bash">mkdir build &amp;&amp;\</code></pre><pre><code class="language-bash">cd build/ &amp;&amp;\</code></pre><pre><code class="language-bash">cmake -DCMAKE_INSTALL_PREFIX=/opt/gvm .. &amp;&amp;\</code></pre><pre><code class="language-bash">make &amp;&amp;\</code></pre><pre><code class="language-bash">make doc &amp;&amp;\</code></pre><pre><code class="language-bash">make install &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="How_to_configure_PostgreSQL"/> <strong>如何配置PostgreSQL </strong> <span class="ez-toc-section-end"/></h3><p>要配置<a href="https://blog.eldernode.com/tutorial-postgresql-installation-ubuntu-20/"> PostgreSQL </a>，请切换到sudoers中的一个用户。用户会话将使用下面的“sudo -u postgres bash”命令进行切换。</p><p><em> <strong>注意</strong> </em>:不要使用root或者gvm，一次执行一行。</p><pre><code class="language-bash">exit</code></pre><pre><code class="language-bash">cd /</code></pre><pre><code class="language-bash">sudo -u postgres bas</code></pre><pre><code class="language-bash">export LC_ALL="C"</code></pre><pre><code class="language-bash">createuser -DRS gvm</code></pre><pre><code class="language-bash">createdb -O gvm gvmd</code></pre><pre><code class="language-bash">psql gvmd</code></pre><pre><code class="language-bash">create role dba with superuser noinherit;</code></pre><pre><code class="language-bash">grant dba to gvm;</code></pre><pre><code class="language-bash">create extension "uuid-ossp";</code></pre><pre><code class="language-bash">create extension "pgcrypto";</code></pre><pre><code class="language-bash">exit</code></pre><pre><code class="language-bash">exit</code></pre><h3><span class="ez-toc-section" id="How_to_fix_Certificates"/> <strong>如何固定证书</strong> <span class="ez-toc-section-end"/></h3><p>要修复GVM证书，请一次键入一行:</p><pre><code class="language-bash">sudo su - gvm</code></pre><pre><code class="language-bash">gvm-manage-certs -a</code></pre><h3><span class="ez-toc-section" id="How_to_create_an_Admin_user"/> <strong>如何创建管理员用户</strong> <span class="ez-toc-section-end"/></h3><p>运行以下命令创建初始用户名和密码，但不要忘记更改它。</p><pre><code class="language-bash">gvmd --create-user=admin --password=admin</code></pre><h3><span class="ez-toc-section" id="How_to_configure_and_update_feeds"/> <strong>如何配置和更新提要</strong> <span class="ez-toc-section-end"/></h3><p>将“提要导入所有者”设置为管理员的UUID。它可以让提要完全更新。要查找新管理员用户的UUID，请键入:</p><pre><code class="language-bash">gvmd --get-users --verbose</code></pre><p>在那里，你会得到如下的东西:</p><pre><code class="language-bash">admin fb019c52-75ec-4cb6-b176-5a55a9b360bf</code></pre><p>然后，运行:</p><pre><code class="language-bash">gvmd --modify-setting 78eceaec-3385-11ea-b237-28d24461215b --value (output string from the above command fb019c52-75ec-4cb6-b176-5a55a9b360bf)</code></pre><pre><code class="language-bash">So the example command would be:</code></pre><pre><code class="language-bash">$ gvmd --get-users --verbose</code></pre><p>管理员FB 019 c 52-75ec-4cb 6-b176-5a 55 a9 b 360 BF</p><pre><code class="language-bash">$ gvmd --modify-setting 78eceaec-3385-11ea-b237-28d24461215b --value fb019c52-75ec-4cb6-b176-5a55a9b360bf</code></pre><p>接下来，一次一行地运行以下命令。您可能会得到连接被拒绝的错误，但再次运行，直到它成功。考虑到这些命令可能需要一些时间。</p><pre><code class="language-bash">greenbone-feed-sync --type GVMD_DATA</code></pre><pre><code class="language-bash">greenbone-feed-sync --type SCAP</code></pre><pre><code class="language-bash">greenbone-feed-sync --type CERT</code></pre><h3><span class="ez-toc-section" id="How_to_install_GSA"/> <strong>如何安装GSA </strong> <span class="ez-toc-section-end"/></h3><p>要安装GSA (GVM)，进入GSA文件夹并编译GSA源代码。</p><pre><code class="language-bash">cd /opt/gvm/src/gsa &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH &amp;&amp;\</code></pre><pre><code class="language-bash">mkdir build &amp;&amp;\</code></pre><pre><code class="language-bash">cd build/ &amp;&amp;\</code></pre><pre><code class="language-bash">cmake -DCMAKE_INSTALL_PREFIX=/opt/gvm .. &amp;&amp;\</code></pre><pre><code class="language-bash">make &amp;&amp;\</code></pre><pre><code class="language-bash">make doc &amp;&amp;\</code></pre><pre><code class="language-bash">make install &amp;&amp;\</code></pre><pre><code class="language-bash">touch /opt/gvm/var/log/gvm/gsad.log &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="Set_up_OSPD-OpenVAS_and_Install_the_virtualenv"/> <strong>设置OSPD-OpenVAS并安装virtualenv </strong> <span class="ez-toc-section-end"/></h3><pre><code class="language-bash">cd /opt/gvm/src &amp;&amp;\</code></pre><pre><code class="language-bash">export PKG_CONFIG_PATH=/opt/gvm/lib/pkgconfig:$PKG_CONFIG_PATH &amp;&amp;\</code></pre><pre><code class="language-bash">virtualenv --python python3.8 /opt/gvm/bin/ospd-scanner/ &amp;&amp;\</code></pre><pre><code class="language-bash">source /opt/gvm/bin/ospd-scanner/bin/activate</code></pre><p><em> <strong>注意</strong> </em>:要匹配你安装的python版本，可能要改_python python3.8</p><h3><span class="ez-toc-section" id="How_to_Install_ospd"/> <strong>如何安装ospd </strong> <span class="ez-toc-section-end"/></h3><p>使用pip安装程序安装ospd，如下所示:</p><pre><code class="language-bash">mkdir /opt/gvm/var/run/ospd/ &amp;&amp;\</code></pre><pre><code class="language-bash">cd ospd &amp;&amp;\</code></pre><pre><code class="language-bash">pip3 install . &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="Install_ospd-openvas"/> <strong>安装ospd-open vas</strong>T3】</h3><p>同样，使用pip安装程序来安装ospd-openvas。</p><pre><code class="language-bash">cd ospd-openvas &amp;&amp;\</code></pre><pre><code class="language-bash">pip3 install . &amp;&amp;\</code></pre><pre><code class="language-bash">cd /opt/gvm/src</code></pre><h3><span class="ez-toc-section" id="How_to_create_startup_scripts"/> <strong>如何创建启动脚本</strong> <span class="ez-toc-section-end"/></h3><p>要创建启动脚本(root ),请粘贴下面的命令。在此之前，您应该键入exit退出根会话。</p><pre><code class="language-bash">cat &lt;&lt; EOF &gt; /etc/systemd/system/gvmd.service</code></pre><pre><code class="language-bash">[Unit]</code></pre><pre><code class="language-bash">Description=Open Vulnerability Assessment System Manager Daemon</code></pre><pre><code class="language-bash">Documentation=man:gvmd(8) https://www.greenbone.net</code></pre><pre><code class="language-bash">Wants=postgresql.service ospd-openvas.service</code></pre><pre><code class="language-bash">After=postgresql.service ospd-openvas.service</code></pre><pre><code class="language-bash">[Service]</code></pre><pre><code class="language-bash">Type=forking</code></pre><pre><code class="language-bash">User=gvm</code></pre><pre><code class="language-bash">Group=gvm</code></pre><pre><code class="language-bash">PIDFile=/opt/gvm/var/run/gvmd.pid</code></pre><pre><code class="language-bash">WorkingDirectory=/opt/gvm</code></pre><pre><code class="language-bash">ExecStart=/opt/gvm/sbin/gvmd --osp-vt-update=/opt/gvm/var/run/ospd.sock</code></pre><pre><code class="language-bash">ExecReload=/bin/kill -HUP $MAINPID</code></pre><pre><code class="language-bash">KillMode=mixed</code></pre><pre><code class="language-bash">Restart=on-failure</code></pre><pre><code class="language-bash">RestartSec=2min</code></pre><pre><code class="language-bash">KillMode=process</code></pre><pre><code class="language-bash">KillSignal=SIGINT</code></pre><pre><code class="language-bash">GuessMainPID=no</code></pre><pre><code class="language-bash">PrivateTmp=true</code></pre><pre><code class="language-bash">[Install]</code></pre><pre><code class="language-bash">WantedBy=multi-user.target</code></pre><pre><code class="language-bash">EOF</code></pre><pre><code class="language-bash">cat &lt;&lt; EOF &gt; /etc/systemd/system/gsad.service</code></pre><pre><code class="language-bash">[Unit]</code></pre><pre><code class="language-bash">Description=Greenbone Security Assistant (gsad)</code></pre><pre><code class="language-bash">Documentation=man:gsad(8) https://www.greenbone.net</code></pre><pre><code class="language-bash">After=network.target</code></pre><pre><code class="language-bash">Wants=gvmd.service</code></pre><pre><code class="language-bash">[Service]</code></pre><pre><code class="language-bash">Type=forking</code></pre><pre><code class="language-bash">PIDFile=/opt/gvm/var/run/gsad.pid</code></pre><pre><code class="language-bash">WorkingDirectory=/opt/gvm</code></pre><pre><code class="language-bash">ExecStart=/opt/gvm/sbin/gsad --drop-privileges=gvm</code></pre><pre><code class="language-bash">Restart=on-failure</code></pre><pre><code class="language-bash">RestartSec=2min</code></pre><pre><code class="language-bash">KillMode=process</code></pre><pre><code class="language-bash">KillSignal=SIGINT</code></pre><pre><code class="language-bash">GuessMainPID=no</code></pre><pre><code class="language-bash">PrivateTmp=true</code></pre><pre><code class="language-bash">[Install]</code></pre><pre><code class="language-bash">WantedBy=multi-user.target</code></pre><pre><code class="language-bash">EOF</code></pre><h3><span class="ez-toc-section" id="How_to_enable_and_start_the_services"/> <strong>如何启用和启动服务</strong> <span class="ez-toc-section-end"/></h3><p>作为root用户，启用并启动GVM服务:</p><pre><code class="language-bash">systemctl daemon-reload &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl enable gvmd &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl enable gsad &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl enable ospd-openvas &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl start gvmd &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl start gsad &amp;&amp;\</code></pre><pre><code class="language-bash">systemctl start ospd-openvas</code></pre><h3><span class="ez-toc-section" id="How_to_check_the_services"/> <strong>如何查看服务</strong> <span class="ez-toc-section-end"/></h3><p>一次一行地运行以下命令，并确保所有三个服务都在运行。</p><pre><code class="language-bash">systemctl status gvmd</code></pre><pre><code class="language-bash">systemctl status gsad</code></pre><pre><code class="language-bash">systemctl status ospd-openvas</code></pre><h3><span class="ez-toc-section" id="How_to_modify_default_scanner"/> <strong>如何修改默认扫描仪</strong> <span class="ez-toc-section-end"/></h3><p>要修改默认扫描仪(GVM)，请切换回您的GVM会话。</p><pre><code class="language-bash">sudo su - gvm</code></pre><p>要获取具有套接字(ospd.sock)的扫描仪的UUID，请运行:</p><pre><code class="language-bash">gvmd --get-scanners</code></pre><p>接下来，使用下面的命令修改扫描仪。</p><pre><code class="language-bash">gvmd --modify-scanner=(INSERT SCANNER UUID HERE) --scanner-host=/opt/gvm/var/run/ospd.sock</code></pre><h3><span class="ez-toc-section" id="How_to_access_the_GVM_web_interface"/> <strong>如何访问GVM网页界面</strong> <span class="ez-toc-section-end"/></h3><p>您可以使用URL<strong>https://your-server-IP</strong>访问GVM web接口，因为它已安装并监听端口80和443。因此，您将被重定向到GVM登录页面，如下所示:</p><p> </p><p><img data-lazyloaded="1" src="../Images/d2c873c40a85cdb881f4cd7993b93f2f.png" decoding="async" loading="lazy" class="size-full wp-image-26367 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/p1.png" alt="access the GVM web interface " data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/p1.png 750w, https://blog.eldernode.com/wp-content/uploads/2021/03/p1-300x146.png 300w" data-sizes="(max-width: 750px) 100vw, 750px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/p1.png"/></p><p> </p><p>要登录GVM，请提供您的管理员用户名和密码，然后单击登录按钮。然后，您将看到如下GVM仪表板:</p><p> </p><p><img data-lazyloaded="1" src="../Images/f92baaee02e12ff37e965d64d626e6b7.png" decoding="async" loading="lazy" class="size-full wp-image-26368 aligncenter" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/p2.png" alt=" login to GVM web interface" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/p2.png 750w, https://blog.eldernode.com/wp-content/uploads/2021/03/p2-300x156.png 300w" data-sizes="(max-width: 750px) 100vw, 750px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/p2.png"/></p><p> </p><p>默认登录是上面设置的admin/admin。OpenVAS的web界面在其配置选项卡中提供了许多操作。浏览选项，进行必要的修改，并使用不同的目标、扫描配置和凭据运行高级扫描。</p><h3><span class="ez-toc-section" id="How_to_use_the_advanced_scan_options"/> <strong>如何使用高级扫描选项</strong> <span class="ez-toc-section-end"/></h3><p>如果您希望更好地控制您的扫描，高级任务向导就是为您设计的。您可以通过浏览以下路径来访问它:</p><p>扫描&gt;&gt;任务并单击紫色按钮</p><p>高级向导将为您提供一些扫描选项，例如:设置任务名称、选择扫描配置、设置目标IP地址、计划未来扫描以及使用凭证扫描。</p><p>OpenVAS提供了几个默认扫描配置，允许您创建自定义配置。浏览至配置&gt;&gt;扫描配置以查看扫描配置的描述并创建新的扫描配置。如果您单击它们，还可以看到每个扫描配置的详细信息。点击左上角的蓝色星形按钮，创建配置，然后点击进行编辑，以便能够<strong>创建新的扫描</strong>。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文中，您了解了如何在Ubuntu 20.04上安装和配置OpenVAS。您应该已经成功安装并设置了GVM。使用您的IP地址登录，开始扫描您的系统漏洞，并将您的反馈发送给您在<a href="https://community.eldernode.com/" target="_blank" rel="noopener">社区长者节点</a>上的朋友。如果您有兴趣了解更多信息，请参考<a href="https://blog.eldernode.com/install-openvas-centos-7/" target="_blank" rel="noopener">在CentOS 7 Linux上安装open vas</a>。</p></div></div>    
</body>
</html>