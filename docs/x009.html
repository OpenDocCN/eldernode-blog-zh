<html>
<head>
<title>How to install LEMP stack on Ubuntu 20.04 - Linux, Nginx, MySQL, PHP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.04上安装LEMP栈——Linux，Nginx，MySQL，PHP</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-lemp-stack-ubuntu20/#0001-01-01">https://blog.eldernode.com/install-lemp-stack-ubuntu20/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/bc56ad7ef2646a221431a9fa23a0b3dc.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Install LEMP on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/How-to-Install-LEMP-on-Ubuntu-20.04.webp"/><p>Ubuntu操作系统满足了第一个要求。在这篇文章中，我们将向你学习如何在Ubuntu 20.04上安装LEMP堆栈，并让其余的组件正常运行。</p><p>LEMP软件栈(Linux，Nginx，MySQL，PHP)是一组软件，可以用来服务于用<span> <a href="https://www.php.net/" target="_blank" rel="noopener noreferrer"> PHP </a> </span>编写的动态网页和网络应用，它描述了一个带有Nginx网络服务器的<strong> L </strong> inux操作系统。后端数据存储在<strong> M </strong> ySQL数据库中，动态处理由<strong> P </strong> HP处理。</p><p> </p><p> </p><h4 id="prerequisites"><span class="ez-toc-section" id="Prerequisites"/>先决条件<span class="ez-toc-section-end"/></h4><p>如果您知道以下内容，本教程可能会更有用:</p><h2><span class="ez-toc-section" id="How_to_install_LEMP_stack_on_Ubuntu_2004"/> <span>如何在Ubuntu 20.04上安装LEMP栈</span> <span class="ez-toc-section-end"/></h2><p>让我们通过下面的步骤来完成教程，学习如何在Ubuntu 20.04上<strong>安装</strong> <strong> Linux，Nginx，MySQL，PHP。</strong></p><p> </p><p><strong>另外，您可以在:</strong>中找到相关文章</p><p><strong> <span> <a href="https://eldernode.com/install-lemp-on-centos-8/" target="_blank" rel="noopener noreferrer">如何在CentOS 8上安装LEMP</a></span></strong></p><p><strong> <span> <a href="https://eldernode.com/tag/lamp-stack/" target="_blank" rel="noopener noreferrer">灯堆教程</a> </span> </strong></p><p class="fjpost-title px-0"><span> <strong> <a href="https://eldernode.com/install-lemp-on-centos-8/" target="_blank" rel="noopener noreferrer">如何在CentOS 8上安装LEMP</a></strong></span></p><p> </p><h3 id="step-1-–-installing-the-nginx-web-server"><span class="ez-toc-section" id="1-_Installing_the_Nginx_Web_Server"/> <span> 1-安装Nginx Web服务器</span> <span class="ez-toc-section-end"/></h3><p>您需要使用Nginx，一种高性能的web服务器，向您的站点访问者显示网页。为此，请使用<span> <strong> apt </strong> </span>软件包管理器来获取该软件。但是请考虑你必须更新它，因为这是第一次使用<span> apt </span>。</p><p>运行以下命令来更新并安装Nginx:</p><pre><code class="language-bash">sudo apt update  sudo apt install nginx</code></pre><p>当你输入<span> <strong> Y </strong> </span>确认你要安装Nginx时，Nginx网络服务器将会在你的Ubuntu 20.04服务器上激活并运行。</p><p>由于我们建议您启用<strong> <span> ufw </span> </strong>防火墙，当您这样做时，您将需要允许连接到Nginx。幸运的是，Nginx在安装时用<strong> </strong> <span> <strong> ufw </strong> </span>注册了一些配置文件。</p><p>要查看哪些UFW简档可用:</p><pre><code class="language-bash">sudo ufw app list</code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">Available applications:    Nginx Full    Nginx HTTP    Nginx HTTPS    OpenSSH</code></pre><p>建议您启用仍允许您需要的流量的最严格的配置文件。此外，您只需要允许端口<span> 80、<span>上的常规HTTP流量，因为<span>您可能没有在本指南中为您的服务器配置SSL。</span> </span> </span></p><p>使用下面的命令来启用</p><pre><code class="language-bash">sudo ufw allow 'Nginx HTTP'  </code></pre><p>要验证更改，请执行以下操作:</p><pre><code class="language-bash">sudo ufw status</code></pre><p>如果现在允许HTTP流量，您将看到以下输出:</p><p title="Output"><span>输出</span></p><pre class="code-pre"><code class="language-bash">Status: active    To                         Action      From  --                         ------      ----  OpenSSH                    ALLOW       Anywhere  <span>Nginx HTTP                 ALLOW       Anywhere  </span>OpenSSH (v6)               ALLOW       Anywhere (v6)  <span>Nginx HTTP (v6)            ALLOW       Anywhere (v6)</span></code></pre><p>您将添加新的防火墙规则，以便能够通过在web浏览器中访问服务器的域名或公共IP地址来测试服务器是否启动并运行。如果您没有指向您的服务器的域名，并且您不知道您的服务器的公共IP地址，请运行下面的命令来找到它。</p><p><strong>注意</strong>:在打印出几个IP地址后，您可以在您的网络浏览器中依次尝试每一个:</p><pre><code class="language-bash">ip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\/.*$//'  </code></pre><p>Aso，您可以从互联网上的其他位置查看哪个IP地址是可访问的:</p><pre><code class="language-bash">curl -4 icanhazip.com</code></pre><p>要访问Nginx的默认登录页面，请键入您在网络浏览器中收到的地址。</p><pre><code class="language-bash">http://<span>server_domain_or_IP</span></code></pre><p> </p><p><img data-lazyloaded="1" src="../Images/464728240c903f8bd1c90d3e00195fd0.png" decoding="async" loading="lazy" class="aligncenter wp-image-10000 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/nginx_default.jpg" alt="welcome to nginx" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/nginx_default.jpg 650w, https://blog.eldernode.com/wp-content/uploads/2020/08/nginx_default-300x132.jpg 300w" data-sizes="(max-width: 650px) 100vw, 650px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/nginx_default.jpg"/></p><p>当您看到上面的页面时，这意味着您已经成功安装了Nginx，并为您的web服务器启用了HTTP流量。</p><p> </p><p class="fjtitle1 text-uppercase1"><span> <a href="https://eldernode.com/vps/" target="_blank" rel="noopener noreferrer"> <strong>购买VPS服务器</strong> </a> </span></p><h3/><h3 id="step-2-—-installing-mysql"><span class="ez-toc-section" id="2-_Installing_MySQL"/> <span> 2-安装MySQL </span> <span class="ez-toc-section-end"/></h3><p>在建立并运行web服务器之后，让我们安装数据库系统，以便能够为您的站点存储和管理数据。如你所知，MySQL是PHP环境中使用的一个流行的数据库管理系统。</p><p>同样，我们使用<span> apt </span>来获取并安装该软件:</p><pre><code class="language-bash">sudo apt install mysql-server  </code></pre><p>通过键入<span> Y </span>，然后<span>输入<span>，当询问您时确认安装。</span> </span></p><p>安装完成后，建议您运行MySQL预安装的安全脚本。这样做是为了让脚本删除一些不安全的默认设置，并锁定对数据库系统的访问。通过运行以下命令启动交互式脚本:</p><pre><code class="language-bash">sudo mysql_secure_installation</code></pre><p>接下来，它会询问您是否要配置<span> <strong>验证密码插件</strong> </span>。如果您启用它，不符合指定标准的密码将被MySQL拒绝并出错。因此，禁用验证是安全的，但是您应该始终使用强大、唯一的<span> <a href="https://eldernode.com/how-to-create-strong-password/" target="_blank" rel="noopener noreferrer">密码</a> </span>作为数据库凭证。</p><p>此时，回答<span> <strong> Y </strong> </span>为是，否则不启用继续。</p><pre><code class="language-bash">VALIDATE PASSWORD PLUGIN can be used to test passwords  and improve security. It checks the strength of password  and allows the users to set only those passwords which are  secure enough. Would you like to setup VALIDATE PASSWORD plugin?    Press y|Y for Yes, any other key for No:</code></pre><p>之后，如果您回答“是”，将要求您选择密码验证的级别。不要忘记，如果您输入<strong> 2 </strong>作为最强级别，当您试图设置任何不包含数字、大小写字母和特殊字符或基于常用字典单词的密码时，您将会收到错误。</p><pre><code class="language-bash">There are three levels of password validation policy:    LOW    Length &gt;= 8  MEDIUM Length &gt;= 8, numeric, mixed case, and special characters  STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary              file    Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: <span>1</span></code></pre><p>无论您是否选择设置<span> <strong>验证密码插件</strong> </span>，您的服务器接下来都会要求您选择并确认MySQL <strong> root </strong>用户的密码。这不要与<strong>系统根</strong>混淆。<strong>数据库根用户</strong>是对数据库系统拥有完全权限的管理用户。您需要在这里定义一个强密码作为额外的安全措施，即使MySQL root用户的默认身份验证方法不使用密码，<strong>即使设置了密码。</strong></p><p>然后，如果您启用了密码验证，您将看到刚才输入的根密码的密码强度，您的服务器将询问您是否要继续使用该密码。如果您对自己的选择持肯定态度，请在提示符下输入<span> Y </span>表示“是”。</p><pre class="code-pre"><code class="language-bash">Estimated strength of the password: <span>100 </span>  Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) :<span> y</span></code></pre><p>要删除一些匿名用户和测试数据库，禁用远程root登录并加载这些新规则，以便MySQL立即尊重您所做的更改，请按下<span> Y </span>并在其余问题的每个提示处点击<span> ENTER </span>键。</p><p>要测试您是否能够登录到MySQL控制台:</p><pre><code class="language-bash">sudo mysql</code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">Welcome to the MySQL monitor.  Commands end with ; or \g.  Your MySQL connection id is 22  Server version: 8.0.19-0ubuntu5 (Ubuntu)    Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.    Oracle is a registered trademark of Oracle Corporation and/or its  affiliates. Other names may be trademarks of their respective  owners.    Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.    mysql&gt;</code></pre><p>要退出MySQL控制台:</p><pre><code class="language-bash">mysql &gt; exit</code></pre><p>关于额外的要点，我们可以提到，你不需要提供密码来作为<strong> root </strong>用户连接，即使你在运行<span><strong>MySQL _ secure _ installation</strong></span>脚本时已经定义了一个密码。原因是管理员MySQL用户的默认认证方式是<span> <strong> unix_socket </strong> </span>而不是<span> <strong>密码</strong> </span>。虽然这起初看起来像是一个安全问题，但它使数据库服务器更加安全，因为只允许拥有sudo权限的系统用户作为<strong> root </strong> MySQL用户登录，这些系统用户从控制台或通过以相同权限运行的应用程序进行连接。事实上，这意味着您将无法使用管理数据库根用户从您的PHP应用程序进行连接。为<strong> root </strong> MySQL账户设置密码是一种保护措施，以防默认认证方法从<span> unix_socket </span>更改为<span>密码</span>。</p><p>提高安全性的最佳方式似乎是为每个数据库设置特权较少的专用用户帐户，尤其是如果您计划在服务器上托管多个数据库。</p><p> </p><h3 id="step-3-–-installing-php"><span class="ez-toc-section" id="3-_Installing_PHP"/> <span> 3-安装PHP </span> <span class="ez-toc-section-end"/></h3><p>现在，是时候安装PHP来处理代码并为web服务器生成动态内容了。</p><p>为了在大多数基于PHP的网站中获得更好的整体性能，Apache在每个请求中嵌入了PHP解释器，Nginx需要一个外部程序来处理PHP，并充当PHP解释器本身和web服务器之间的桥梁，但这需要额外的配置。但是，它还需要额外的配置。接下来你要安装<strong><span>php-fpm</span></strong>(PHP fastCGI进程管理器)并告诉Nginx将PHP请求传递给这个软件进行处理。记住<span> <strong> php-mysql </strong> </span>，一个允许php与基于mysql的数据库通信的PHP模块是必需的，核心PHP包将作为依赖项自动安装。</p><p>使用以下命令安装<span> php-fpm </span>和<span> php-mysql </span>包。</p><pre><code class="language-bash">sudo apt install php-fpm php-mysql  </code></pre><p>像往常一样，输入<span> <strong> Y </strong> </span>和<strong> <span>当你被询问时，输入</span> </strong>确认安装。</p><p> </p><h3 id="step-4-—-configuring-nginx-to-use-the-php-processor"><span class="ez-toc-section" id="4-_Configuring_Nginx_to_use_the_PHP_processor"/> <span> 4-配置Nginx使用PHP处理器</span> <span class="ez-toc-section-end"/></h3><p>类似于Apache中的虚拟主机，当使用Nginx web服务器封装配置细节并在单个服务器上托管多个域时，可以创建服务器块。</p><p>在Ubuntu 20.04上，Nginx有一个默认启用的服务器块，配置为在<span> <strong> /var/www/html </strong> </span>提供目录外的文档。如果您托管多个站点，管理起来会变得很困难，直到这对于单个站点很有效。</p><p>此外，您可以在your_domain网站的<span> <strong> /var/www </strong> </span>中创建一个目录结构，保留<span>/T5】/var/www/html</span>作为缺省目录，以便在客户端请求不匹配任何其他站点时提供服务，而不是修改<span> <strong> /var/www/html </strong> </span>。</p><p>要为您的_domain创建根web目录，请执行以下操作:</p><pre><code class="language-bash">sudo mkdir /var/www/<span>your_domain  </span></code></pre><p>然后，使用<span> $USER </span>环境变量分配目录的所有权，该变量将引用您当前的系统用户:</p><pre><code class="language-bash">sudo chown -R $USER:$USER /var/www/<span>your_domain  </span></code></pre><p>使用您喜欢的命令行编辑器在Nginx的<span> sites-available </span>目录中打开一个新的配置文件。</p><pre><code class="language-bash">sudo nano /etc/nginx/sites-available/<span class="highlight">your_domai</span><span class="highlight">n</span></code></pre><p><span class="highlight"> <span>在创建一个新的空白文件时，粘贴以下的基本配置。【T2<br/></span></span></p><p class="code-label" title="/etc/nginx/sites-available/your_domain">/etc/nginx/sites-available/your _ domain</p><div title="/etc/nginx/sites-available/your_domain"><pre class="code-pre"><code class="language-bash">server {      listen 80;      server_name <span>your_domain</span> www.<span>your_domain</span>;      root /var/www/<span>your_domain</span>;        index index.html index.htm index.php;        location / {          try_files $uri $uri/ =404;      }        location ~ \.php$ {          include snippets/fastcgi-php.conf;          fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;       }        location ~ /\.ht {          deny all;      }    }</code></pre></div><p><span class="highlight"> <span>要查看这些指令和位置块的作用，请看下面的列表。</span>T3】</span></p><p><span> <span> 1- </span>监听</span> —定义Nginx将监听的端口。在这种情况下，它将监听端口<span> 80，【HTTP的默认端口。</span></p><p><span>2</span>–<span>根</span> —定义存储该网站提供的文件的文件根。</p><p><span> 3- </span> <span>索引</span> —定义Nginx为该网站排列索引文件的优先顺序。一种常见的做法是列出优先级高于index.php文件的index.html文件<span>，以便在PHP应用程序中快速建立维护登录页面。您可以调整这些设置，以更好地满足您的应用需求。</span></p><p><span> 4- </span> <span>服务器名</span> —定义该服务器块应响应的域名和/或IP地址。<strong>将此指令指向您的服务器的域名或公共IP地址。</strong></p><p><span> 5- </span> <span>位置/ </span> —第一个位置块包括一个<span> try_files </span>指令，它检查是否存在与URI请求相匹配的文件或目录。如果Nginx找不到合适的资源，它将返回404错误。</p><p><span> 6- </span> <span>地点~ \。php$ </span> —这个位置块通过将Nginx指向<span> fastcgi-php.conf </span>配置文件和<span> php7.4-fpm.sock </span>文件来处理实际的php处理，这两个文件声明了哪个套接字与<span> php-fpm </span>相关联。</p><p><span> 7- </span> <span>地点~ /\。ht </span> —最后一个位置块处理<span>。htaccess </span>文件，Nginx不处理这些文件。通过添加<span>拒绝所有</span>指令，如果有的话<span>。htaccess </span>文件碰巧找到了进入文档根的路径，它们不会被提供给访问者。</p><p>如果你使用的是<span> nano <span>保存并关闭文件</span>T3，方法是输入<span> CTRL+X </span>，然后输入<span> y </span>和<span>回车</span>确认你完成了编辑。</span></p><p>链接到Nginx的<span> sites-enabled </span>目录中的配置文件，激活您的配置。</p><pre><code class="language-bash">sudo ln -s /etc/nginx/sites-available/<span>your_domain</span> /etc/nginx/sites-enabled/  </code></pre><p>因此，Nginx将被告知在下次重新加载时使用该配置。</p><p>要测试配置中的语法错误，请执行以下操作:</p><pre><code class="language-bash">sudo nginx -t  </code></pre><p>如果遇到任何错误，您可以在继续之前返回到配置文件中查看其内容。</p><p>然后，重新加载Nginx以应用更改:</p><pre><code class="language-bash">sudo systemctl reload nginx  </code></pre><p>您的新网站现在是活动的，但是webroot<span>/var/www/your _ domain</span>仍然是空的。因此，为了测试您的新服务器块是否按预期工作，在那个位置创建一个index.html文件。</p><pre><code class="language-bash">nano /var/www/<span>your_domain</span>/index.html  </code></pre><p class="code-label" title="/var/www/your_domain/index.html">/var/www/your _ domain/index . html</p><pre><code class="language-bash">&lt;html&gt;    &lt;head&gt;      &lt;title&gt;<span>your_domain</span> website&lt;/title&gt;    &lt;/head&gt;    &lt;body&gt;      &lt;h1&gt;Hello World!&lt;/h1&gt;        &lt;p&gt;This is the landing page of &lt;strong&gt;<span>your_domain</span>&lt;/strong&gt;.&lt;/p&gt;    &lt;/body&gt;  &lt;/htm</code></pre><p>要进入浏览器并访问服务器的域名或IP地址:</p><p>http:/<span>/server _ domain _ or _ IP</span></p><p>将出现如下页面:</p><p><strong> <span>注意</span> </strong>:查看此页面意味着您的Nginx服务器模块正在按预期工作。</p><p><img data-lazyloaded="1" src="../Images/a6a6712dc0a4a1f6e2b3ebb431cfa9dd.png" decoding="async" loading="lazy" class="aligncenter wp-image-10005 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/landing_page-2.jpg" alt="landing test for LEMP" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/landing_page-2.jpg 320w, https://blog.eldernode.com/wp-content/uploads/2020/08/landing_page-2-300x135.jpg 300w" data-sizes="(max-width: 320px) 100vw, 320px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/landing_page-2.jpg"/></p><p>现在，你可以把这个文件留在原处作为你的应用程序的临时登陆页面，直到你建立一个<span>index.php</span>文件来替换它。所以，不要忘记从你的文档根目录中删除或重命名index.html的<span>文件，因为默认情况下它优先于index.php的<span>文件。</span></span></p><p> </p><h3 id="step-5-–testing-php-with-nginx"><span class="ez-toc-section" id="5-_Testing_PHP_with_Nginx"/> <span> 5-用Nginx </span>测试PHP<span class="ez-toc-section-end"/></h3><p>直到这一步，你已经完全设置好了你的<strong> LEMP堆栈</strong>。为了验证Nginx能够正确的处理<span>。php </span>文件下载到您的php处理器，您可以按照我们下面的解释来测试它。</p><p>为此，在您的文档根目录中创建一个测试PHP文件。在文本编辑器的文档根目录下打开一个名为<span>info.php</span>的新文件:</p><pre><code class="language-bash">nano /var/www/your_domain/info.php  </code></pre><p>接下来，将下面几行粘贴到新文件中。这是一个有效的PHP代码，它将返回关于您的服务器的信息:</p><p class="code-label" title="/var/www/your_domain/info.php">/var/www/your_domain/info.php</p><pre><code class="language-bash">&lt;?php  phpinfo();</code></pre><p>再次，保存并关闭文件，方法是键入<span> CTRL </span> + <span> X </span>，然后y和<span>输入</span> <span>以确认完成。然后，您可以通过访问您在Nginx配置文件中设置的域名或公共IP地址，然后通过<span> /info.php </span>，在您的web浏览器中</span>访问该页面:</p><p>http://<span>server _ domain _ or _ IP</span>/info . PHP</p><p>之后，您将看到一个网页，其中包含有关您的服务器的详细信息:</p><p> </p><p><img data-lazyloaded="1" src="../Images/66ba47de338d03afb8b289e57ea8b403.png" decoding="async" loading="lazy" class="aligncenter wp-image-10007 size-large" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/phpinfo-1024x832.jpg" alt="php" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/phpinfo-1024x832.jpg 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/phpinfo-300x244.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/phpinfo-768x624.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/phpinfo.jpg 1085w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/phpinfo-1024x832.jpg"/></p><p> </p><p>最好删除您创建的文件，因为它包含了您的PHP环境和Ubuntu服务器的敏感信息，当您通过该页面检查PHP服务器的相关信息时。使用<span> rm </span>删除该文件。</p><pre><code class="language-bash">sudo rm /var/www/<span class="highlight">your_domain</span>/info.php</code></pre><p><strong>注意</strong>:如果以后需要，您可以随时重新生成该文件。</p><h3 id="step-6-—-testing-database-connection-from-php-optional"><span class="ez-toc-section" id="6-_Testing_Database_Connection_from_PHP_Optional"/> <span> 6-从PHP测试数据库连接(可选)</span> <span class="ez-toc-section-end"/></h3><p>使用虚拟数据创建一个测试表，并从PHP脚本中查询其内容，以测试PHP是否能够连接到MySQL并执行数据库查询。但是首先，您需要创建一个测试数据库和一个正确配置的新MySQL用户来访问它。</p><p>然后，创建一个名为<strong> example_database </strong>的数据库和一个名为<strong> example_user </strong>的用户，你可以用不同的值替换这些名称。</p><p>使用<strong> root </strong>帐户连接到MySQL控制台:</p><pre><code class="language-bash">sudo mysql</code></pre><p>使用以下命令创建新数据库:</p><pre><code class="language-bash">mysql &gt; CREATE DATABASE example_database;  </code></pre><p>之后，您可以创建一个新用户，并授予他们刚刚创建的自定义数据库的全部权限。</p><p>通过运行下面的命令，您将创建一个名为<span> example_user </span>的新用户，使用<span> mysql_native_password </span>作为默认的身份验证方法。记得用你自己选择的安全密码替换这个值(<span>密码</span>)。</p><pre><code class="language-bash">mysql &gt; CREATE USER '<span>example_user</span>'@'%' IDENTIFIED WITH mysql_native_password BY '<span>password</span>';  </code></pre><p>接下来，授予该用户对<span> example_database </span>数据库的权限:</p><pre><code class="language-bash">mysql &gt;GRANT ALL ON example_database.* TO 'example_user'@'%';  </code></pre><p>这将赋予<strong> example_user </strong>用户对<strong> example_database </strong>数据库的全部权限，同时防止该用户在您的服务器上创建或修改其他数据库。</p><p>要退出MySQL shell:</p><pre><code class="language-bash">mysql &gt; exit</code></pre><p>通过再次登录MySQL控制台，您可以测试新用户是否具有适当的权限，这一次使用自定义用户凭证:</p><pre><code class="language-bash">mysql -u <span>example_user</span> -p  </code></pre><p>在这个命令中，注意<span> <strong> -p </strong> </span>标志，它会提示您在创建<strong> example_user </strong>用户时使用的密码。登录MySQL控制台后，确认您有权访问example_database数据库:</p><pre><code class="language-bash">mysql &gt; SHOW DATABASES;  </code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">+--------------------+  | Database           |  +--------------------+  | <span>example_database</span>   |  | information_schema |  +--------------------+  2 rows in set (0.000 sec)</code></pre><p>现在，创建一个名为<strong> todo_list </strong>的测试表。从MySQL控制台，运行以下语句:</p><pre><code class="language-bash">mysql &gt;CREATE TABLE<span class="highlight"> example_database</span>.<span class="highlight">todo_list <span>(</span>  </span><span>mysql &gt;item_id INT AUTO_INCREMENT,</span>  mysql &gt;content VARCHAR(255),  mysql &gt;PRIMARY KEY(item_id)  mysql &gt;);</code></pre><p>在测试表中插入几行内容，您可以使用不同的值重复下一个命令几次:</p><pre><code class="language-bash">INSERT INTO<span> example_database</span>.<span>todo_list</span> (content) VALUES ("<span>My first important item</span>");</code></pre><p>运行以下命令，确认您已将数据成功保存到表中。</p><pre><code class="language-bash">mysql &gt; SELECT * FROM <span>example_database</span>.<span>todo_list</span>;  </code></pre><p><span>输出</span></p><pre><code class="language-bash"/></pre><pre class="code-pre"><code class="language-bash">+---------+--------------------------+  | item_id | content                  |  +---------+--------------------------+  |       1 | My first important item  |  |       2 | My second important item |  |       3 | My third important item  |  |       4 | and this one more thing  |  +---------+--------------------------+  4 rows in set (0.000 sec)</code></pre><p class="code-pre">在确认测试表中有有效数据后，您可以退出MySQL控制台。</p><pre><code class="language-bash">mysql &gt; exit</code></pre><p>下面的PHP脚本连接到MySQL数据库。并查询<strong> todo_list </strong>表的内容，在列表中显示结果。如果数据库连接有问题，它会抛出一个异常。将这些内容复制到您的<span> todo_list.php </span>脚本中:</p><p class="code-label" title="/var/www/your_domain/todo_list.php">/var/www/your _ domain/todo _ list . PHP</p><p class="code-toolbar"/><p><?php <br/?>user = "<span>example _ use</span>r "；<br/>密码= " <span>密码</span>"；<br/>数据库= " <span>示例_数据库</span>"；<br/>table = "<span>todo _ list</span>"；</p><p>试试{ <br/> db =新PDO(" MySQL:host = localhost；dbname =数据库”，用户，密码)；<br/>echo "&lt;H2&gt;TODO&lt;/H2&gt;T14】ol&gt;；【foreach】(db-&gt;query(" SELECT content FROM table ")as row){<br/>echo "&lt;Li&gt;"。第['content']行。”&lt;/李&gt;；<br/>}<br/>echo&lt;/ol&gt;；<br/> } catch (PDOException e) { <br/>打印“错误！: " .getMessage()。"&lt;br/&gt;"；<br/>die()；<br/> }</p><p>现在，您可以保存并关闭文件。</p><p><strong>最后，</strong>您将看到这样一个页面，显示您在测试表中插入的内容:</p><p><img data-lazyloaded="1" src="../Images/ba53c497535033a535a1264f01d43863.png" decoding="async" loading="lazy" class="aligncenter wp-image-10010 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/todo_list.jpg" alt="viewing todo-list with LEMP stack on ubuntu" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/todo_list.jpg 424w, https://blog.eldernode.com/wp-content/uploads/2020/08/todo_list-300x127.jpg 300w" data-sizes="(max-width: 424px) 100vw, 424px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/todo_list.jpg"/></p><p>因此，在这一点上，这意味着您的PHP环境已经准备好与您的MySQL服务器进行连接和交互。</p><p> </p><p>亲爱的用户，我们希望你喜欢这个教程<strong>如何在Ubuntu 20.04 </strong>上安装LEMP堆栈，你可以在评论区提出关于这个培训的问题，或者解决<span> <a href="https://eldernode.com/"> Eldernode </a> </span>培训领域的其他问题，请参考<span> <a href="https://eldernode.com/ask">提问页面</a> </span>部分并在其中提出你的问题。</p><p> </p><h5><span class="ez-toc-section" id="Also_read"/> <strong>也，读作</strong> <span class="ez-toc-section-end"/></h5><p class="fjpost-title px-0"><strong> <span> <a href="https://eldernode.com/wordpress-nginx-mariadb-php-ubuntu/" target="_blank" rel="noopener noreferrer">在Ubuntu 18.04上用LEMP安装WordPress</a></span></strong></p><p><span> <strong> <a href="https://eldernode.com/how-to-install-lamp-on-ubuntu-20-04/" target="_blank" rel="noopener noreferrer">如何在Ubuntu 20.04上安装灯</a> </strong> </span></p><p><span> <strong> <a href="https://eldernode.com/install-lamp-stack-on-centos-8/" target="_blank" rel="noopener noreferrer">在CentOS 8上安装灯栈</a> </strong> </span></p><p><span> <strong> <a href="https://eldernode.com/install-lemp-debian-10/" target="_blank" rel="noopener noreferrer">如何在Debian 10上安装LEMP栈</a> </strong> </span></p></div></div>    
</body>
</html>