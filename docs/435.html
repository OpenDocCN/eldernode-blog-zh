<html>
<head>
<title>Performance tuning and optimize CentOS 7 [Best way] - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>性能调优和优化CentOS 7[最佳方式] - Eldernode</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/tuning-and-optimize-centos-7/#0001-01-01">https://blog.eldernode.com/tuning-and-optimize-centos-7/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/e4216fb87e516a61d84deb90009e1cb7.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Performance tuning and optimize CentOS 7" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Performance-tuning-and-optimize-CentOS-7.png"/><p><strong> Linux CentOS </strong>发行版CentOS是当今最流行的Linux发行版之一，代表社区企业操作系统。CentOS Linux的核心源自Red Hat Enterprise Linux或RHEL，因此完全兼容RHEL。与商业RHEL不同，CentOS是一个免费的Linux发行版。CentOS是由社区支持的，你只需要从这些公共社区获得帮助和支持，你不必支付任何费用。在本文中，我们试图教你<strong>性能调优和优化CentOS 7 </strong>。您可以从<a href="https://eldernode.com/"> Eldernode </a>中提供的套装中选择并购买您的<a href="http://eldernode.com/centos-vps/"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="Performance_tuning_and_optimize_CentOS_7"/>性能调优和优化CentOS 7 <span class="ez-toc-section-end"/></h2><p>为了提高服务器上的服务、应用程序和数据库的性能，使用各种工具执行一系列自定义性能设置。本教程将解释如何调整和优化<a href="https://blog.eldernode.com/tag/centos/" target="_blank" rel="noopener noreferrer"> CentOS </a> 7。</p><h3><span class="ez-toc-section" id="What_is_Tuned_and_what_does_it_do"/>什么是调谐的，它有什么作用？<span class="ez-toc-section-end"/></h3><p>Tuned不会动态调整系统设置。您可以修改调优后的守护进程的运行方式，并允许它根据系统使用情况动态改变设置。还可以使用tuned-adm命令行工具来管理正在运行的守护程序。</p><p>一般来说，tuning是一个强大的守护进程，可以根据它从监视系统组件的使用中收集的信息来动态地自动调整Linux服务器的性能，从而最大限度地提高服务器的性能。Tuned通过使用调优配置文件，根据系统活动动态地调优系统设置来实现这一点。</p><p>通过设置调优配置文件，tuned tuning service可以调整操作系统，使其在某些工作负载下性能更好。tuned-adm命令行工具允许用户在不同的调优配置文件之间切换。调优配置文件包括sysctl配置、磁盘升降机配置、透明大页面、电源管理选项和定制脚本。</p><h4><span class="ez-toc-section" id="Tuned_Profiles_Overview"/>调谐配置文件概述<span class="ez-toc-section-end"/></h4><p>几个<strong>预定义的</strong>概要文件包含在常见用例中，但是tuned也使您能够定义自定义概要文件，它可以基于预定义的概要文件之一，也可以从头开始定义。随tuned提供的配置文件分为两类:<strong>节能配置文件</strong>和<strong>性能提升配置文件</strong>。</p><p>性能提升配置文件包括侧重于以下方面的配置文件:</p><p>–存储和网络延迟低</p><p>–存储和网络的高吞吐量</p><p>–虚拟机性能</p><p>–虚拟化主机性能</p><h2><span class="ez-toc-section" id="Performance_tuning_and_optimize_CentOS_7-2"/>性能调优和优化CentOS 7 <span class="ez-toc-section-end"/></h2><p>在本文的后续部分，我们将教您如何在CentOS 7上安装tuned，以及如何创建定制的调优配置文件。请和我们在一起。</p><h3><span class="ez-toc-section" id="Tutorial_Install_Tuned_on_CentOS_7"/>CentOS 7上调谐的教程安装<span class="ez-toc-section-end"/></h3><p><em> <strong>注意:</strong> </em>在CentOS 7上，默认预装并激活tuned，但在旧版CentOS中，需要使用以下命令进行安装:</p><pre><code class="language-bash">yum install tuned</code></pre><p>安装后，您可以看到以下配置文件:</p><p>/etc/tuned–优化的配置目录。</p><p>/etc/tuned/tuned-main . conf–优化的邮件配置文件。</p><p>/usr/lib/tuned/–存储所有优化配置文件的子目录。</p><p>现在可以使用以下命令来管理CentOS 7上的优化服务了:</p><pre><code class="language-bash">systemctl start tuned</code></pre><pre><code class="language-bash">systemctl enable tuned</code></pre><pre><code class="language-bash">systemctl status tuned</code></pre><pre><code class="language-bash">systemctl stop tuned</code></pre><p>现在，您应该能够使用Tunde-adm工具控制设置了。您可以使用以下命令检查当前活动的概要文件。</p><p><em> <strong>注意:</strong> </em>对于一些常见的用例，已经包含了许多预定义的调优配置文件。</p><pre><code class="language-bash">tuned-adm active</code></pre><p>您可以使用以下命令行获得可用优化配置文件的列表:</p><pre><code class="language-bash">tuned-adm list</code></pre><p>使用以下命令移动到公共服务器负载上的任何配置文件:</p><pre><code class="language-bash">tuned-adm profile throughput-performance  tuned-adm active</code></pre><p>您也可以使用以下命令将<strong>推荐的配置文件</strong>用于您的系统:</p><pre><code class="language-bash">tuned-adm recommend</code></pre><p>最后，您可以使用以下命令<strong>禁用</strong>设置:</p><pre><code class="language-bash">tuned-adm off</code></pre><h3><span class="ez-toc-section" id="Learn_how_to_Create_Custom_Tuning_Profiles_on_CentOS_7"/>了解如何在CentOS 7上创建定制调谐配置文件<span class="ez-toc-section-end"/></h3><p>在本教程的后续部分，通过给出一个如何创建名为test-performance的新概要文件的例子，我们将展示您也可以创建新概要文件。此配置文件将使用延迟性能设置。请遵循以下步骤:</p><p><strong> 1。</strong>转到存储所有调谐配置文件子目录的路径。</p><p><strong> 2。</strong>为您的定制调优配置文件创建一个名为test-performance的新子目录。</p><pre><code class="language-bash">cd /usr/lib/tuned/  mkdir test-performance</code></pre><p><strong> 3。</strong>要在类别中创建一个<strong> tuned.conf </strong>配置文件，使用以下命令:</p><pre><code class="language-bash">vim test-performance/tuned.conf</code></pre><p><strong> 4。</strong>将以下指令放入文件中，然后<strong>保存</strong>它:</p><pre><code class="language-bash">[main]  include=latency-performance  summary=Test profile that uses settings for latency-performance tuning profile</code></pre><p><strong> 5。</strong>现在，您可以在以下命令的帮助下激活新调整的配置文件:</p><pre><code class="language-bash">tuned-adm profile test-performance</code></pre><h3><span class="ez-toc-section" id="Latency-performance_for_CentOS_7"/>CentOS 7的延迟-性能<span class="ez-toc-section-end"/></h3><p><strong>–</strong>用于低延迟性能调整的配置文件。</p><p><strong>–</strong>禁用省电机制。</p><p><strong>–</strong>CPU调控器被设置为性能并锁定到低C状态(通过PM QoS)。</p><p><strong>–</strong>CPU能耗性能偏向性能。</p><p><strong>–</strong>该配置文件是“网络延迟”的父配置文件。</p><p>您可以使用以下命令<strong>激活CentOS 7的</strong>优化延迟性能:</p><pre><code class="language-bash">tuned-adm profile latency-performance</code></pre><p>对于CentOS 7，延迟-性能特征包括以下调整:</p><pre><code class="language-bash">cat /usr/lib/tuned/latency-performance/tuned.conf</code></pre><p><strong>【CPU】</strong></p><p>force_latency=1 <br/>调控器=性能<br/>energy _ perf _ bias =性能<br/> min_perf_pct=100</p><p><strong>【sysctl】</strong></p><p>kernel . sched _ min _ granularity _ ns = 10000000<br/>VM . dirty _ ratio = 10<br/>VM . dirty _ background _ ratio = 3<br/>VM . swappiness = 10<br/>kernel . sched _ migration _ cost _ ns = 5000000</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>在本文的开始，我们解释了tuned及其应用的介绍。然后，我们回顾了调优配置文件，并尝试教您如何在CentOS 7上安装tuned以及如何创建自定义调优配置文件。</p></div></div>    
</body>
</html>