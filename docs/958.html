<html>
<head>
<title>How to Change SSH Port on CentOS 7, 8 and 9 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何更改CentOS 7、8和9上的SSH端口- Eldernode博客</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/change-ssh-port-on-centos/#0001-01-01">https://blog.eldernode.com/change-ssh-port-on-centos/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/d898434f2f0599af000c3ba569e5871b.png" data-src="https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789.webp" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How-to-Change-SSH-Port-on-CentOS-7,8,9" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789.webp 2069w, https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789-300x164.webp 300w, https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789-1024x561.webp 1024w, https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789-768x421.webp 768w, https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789-1536x842.webp 1536w, https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789-2048x1122.webp 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2022/06/How-to-Change-SSH-Port-on-CentOS-789.webp"/><p>默认的SSH服务端口值是22，在这种情况下，黑客可以通过端口22对服务器发起攻击，获得对服务器的控制或对其造成不可修复的损害。为了提高服务器的安全性，您必须更改默认的SSH端口。在本文中，您将学习如何在CentOS 7、8和9上更改SSH端口。如果你想购买<a href="https://eldernode.com/centos-vps/"> <strong> CentOS VPS </strong> </a>服务器，你可以在<a href="https://eldernode.com/"> Eldernode </a>网站查看提供的套餐。</p><h2><span class="ez-toc-section" id="Tutorial_Change_SSH_Port_on_CentOS_7_8_and_9"/> <strong>教程更改CentOS 7、8、9上的SSH端口</strong> <span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="Introduction_to_SSH_Port"/><strong>SSH端口介绍</strong> <span class="ez-toc-section-end"/></h3><p>SSH是一种远程管理协议，允许用户远程控制和修改他们的服务器。此服务是Telnet的替代服务，与Telnet不同，Telnet使用加密技术。它为远程用户身份验证、从客户端到主机的数据传输以及到客户端的重新传输提供了一种机制。按照以下步骤更改CentOS上的SSH端口。在这种状态下，需要重新标记要设置的端口，以便访问控制策略规则可以接受SSH服务进行连接。</p><p>在下一节中，我们将一步步教您如何在<a href="https://blog.eldernode.com/tag/centos/"> CentOS </a> 7和8上更改SSH端口。</p><h3><span class="ez-toc-section" id="Change_SSH_Port_on_CentOS_7_and_8"/> <strong>更改CentOS 7和8上的SSH端口</strong> <span class="ez-toc-section-end"/></h3><p>首先登录CentOS系统，运行以下命令<strong>备份SSH配置</strong>文件:</p><pre><code class="language-bash">date_format=`date +%Y_%m_%d:%H:%M:%S`  </code></pre><pre><code class="language-bash">sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config_$date_format</code></pre><p>然后<strong>用下面的命令确认备份</strong>:</p><pre><code class="language-bash">ls /etc/ssh/sshd_config*  </code></pre><pre><code class="language-bash">/etc/ssh/sshd_config /etc/ssh/sshd_config_2019_09_05:21:40:10</code></pre><p>您可以使用任何类型的文本编辑器(vi、vim、nano e.t.c)打开SSH配置文件:</p><pre><code class="language-bash">sudo vi /etc/ssh/sshd_config</code></pre><p>找到<strong>端口22 </strong>和<strong>的线路，取消对</strong>的注释，并设置您的新服务端口以供使用；例如，我使用端口9782:</p><pre><code class="language-bash">Port 9782</code></pre><p>保存更改后关闭文件。</p><p>如上所述，默认端口标记为SSH 22:</p><pre><code class="language-bash">semanage port -l | grep ssh</code></pre><pre><code class="language-bash">ssh_port_t tcp 22</code></pre><p>为了<strong>在防火墙上打开SSH端口</strong>，您应该保持防火墙服务运行，并且只允许可信服务:</p><pre><code class="language-bash">sudo firewall-cmd --add-port=9782/tcp --permanent</code></pre><pre><code class="language-bash">sudo firewall-cmd --reload</code></pre><p>使用以下命令<strong>安装防火墙</strong>并启动服务:</p><pre><code class="language-bash">sudo yum -y install firewalld</code></pre><pre><code class="language-bash">sudo systemctl enable --now firewalld</code></pre><pre><code class="language-bash">sudo firewall-cmd --add-port=9782/tcp --permanent</code></pre><pre><code class="language-bash">sudo firewall-cmd --reload</code></pre><p>您可以使用以下命令<strong>删除SSH服务</strong>:</p><pre><code class="language-bash">sudo firewall-cmd --remove-service=ssh --permanent</code></pre><pre><code class="language-bash">sudo firewall-cmd --reload</code></pre><p>运行以下命令<strong>重启SSH服务</strong>并应用更改:</p><pre><code class="language-bash">sudo systemctl restart sshd</code></pre><p>最后<strong>使用以下命令验证SSH </strong>的监听地址:</p><pre><code class="language-bash">netstat -tunl | grep 9782</code></pre><pre><code class="language-bash">tcp 0 0 0.0.0.0:9782 0.0.0.0:* LISTEN</code></pre><pre><code class="language-bash">tcp6 0 0 :::9782 :::* LISTEN</code></pre><h3><span class="ez-toc-section" id="Change_SSH_Port_on_CentOS_Stream_9"/> <strong>更改CentOS流9上的SSH端口</strong> <span class="ez-toc-section-end"/></h3><p>通过SSH控制台首次登录服务器:</p><pre><code class="language-bash">ssh <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="186a77776c5870776b6c7679757d">[email protected]</a></code></pre><p>运行下面的命令来<strong>在Linux上安装您最喜欢的编辑器</strong> (nano或VIM):</p><pre><code class="language-bash">dnf install nano -y</code></pre><p>然后<strong>使用以下命令检查防火墙状态</strong>:</p><pre><code class="language-bash">systemctl status firewalld</code></pre><p>运行以下命令<strong>安装防火墙</strong>:</p><pre><code class="language-bash">yum install firewalld</code></pre><p>现在，您需要使用以下命令再次检查防火墙状态:</p><pre><code class="language-bash">systemctl status firewalld</code></pre><p>使用以下命令<strong>启用并启动Firewalld </strong>服务:</p><pre><code class="language-bash">systemctl enable firewalld</code></pre><pre><code class="language-bash">systemctl start firewalld</code></pre><p>最后，再次检查防火墙状态:</p><pre><code class="language-bash">systemctl status firewalld</code></pre><p>运行以下命令<strong>停止防火墙</strong>:</p><pre><code class="language-bash">systemctl stop firewalld</code></pre><p>然后<strong>重启防火墙</strong>:</p><pre><code class="language-bash">systemctl restart firewalld</code></pre><p>然后使用下面的命令<strong>在Firewalld上添加您的自定义SSH端口号</strong>。例如，要使用端口9782，您可以使用以下命令加入白名单:</p><pre><code class="language-bash">sudo firewall-cmd --add-port 9782/tcp</code></pre><pre><code class="language-bash">sudo firewall-cmd --add-port 9782/tcp --permanent</code></pre><pre><code class="language-bash">sudo firewall-cmd --zone=public --permanent --add-port=9782/tcp</code></pre><p>然后运行以下命令<strong>重启防火墙</strong>服务:</p><pre><code class="language-bash">systemctl restart firewalld</code></pre><p>然后<strong>使用以下命令更改SSH端口号</strong>:</p><pre><code class="language-bash">nano /etc/ssh/sshd_config</code></pre><p>最后运行以下命令来<strong>重启SSH </strong>服务:</p><pre><code class="language-bash">systemctl restart sshd</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>如前所述，黑客可以在默认的SSH端口模式下破坏您的服务器，因此您需要更改默认的SSH端口来增加您的服务器的安全性。在本文中，我们介绍了SSH端口，您了解了如何在CentOS 7、8和9上更改SSH端口。</p></div></div>    
</body>
</html>