<html>
<head>
<title>Tutorial Install Innotop to Monitor MySQL on CentOS - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程安装Innotop来监控CentOS - Eldernode博客上的MySQL</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/innotop-to-monitor-mysql-on-centos/#0001-01-01">https://blog.eldernode.com/innotop-to-monitor-mysql-on-centos/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/6edfb73ca4ed20023567b930343686d4.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install Innotop to Monitor MySQL on CentOS" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/Tutorial-Install-Innotop-to-Monitor-MySQL-on-CentOS.png"/><p>Innotop是一个基于命令行的高级研究应用程序，用于监控InnoDB引擎下的本地服务器和MySQL输出。Innotop包括许多功能和不同类型的模式/选项。这些特性帮助用户避开MySQL输出性能的各个方面，找出MySQL服务器的问题所在。在本文中，我们试图向您介绍<strong>教程在CentOS </strong>上安装Innotop以监控MySQL。你可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>提供的套装来购买<a href="https://eldernode.com/centos-vps/" target="_blank" rel="noopener"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="How_to_Install_Innotop_to_Monitor_MySQL_on_CentOS_7_8"/> <strong>如何在CentOS 7 | 8 </strong> <span class="ez-toc-section-end"/>上安装Innotop监控MySQL</h2><h3><span class="ez-toc-section" id="Install_Innotop_to_Monitor_MySQL_on_CentOS"/> <strong>在CentOS </strong> <span class="ez-toc-section-end"/>上安装Innotop监控MySQL</h3><p>由于Innotop软件包现在默认不包含在<a href="https://blog.eldernode.com/tag/centos/" target="_blank" rel="noopener"> CentOS </a>中，您需要通过激活Epel第三方存储库来安装它。为此，您可以使用以下命令:</p><pre><code class="language-bash">yum install innotop</code></pre><p>在启动Innotop的下一步中，您必须键入“<strong> innotop </strong>”，如以下命令所示。在下面的命令行中，<strong> -u </strong>和<strong> -p </strong>选项分别是用户名和密码。</p><pre><code class="language-bash">innotop -u root -p 'eldernode'</code></pre><p>当您可以成功连接到MySQL服务器时，您将看到以下信息:</p><pre><code class="language-bash">[RO] Dashboard (? for help) localhost, 61d, 254.70 QPS, 5/2/200 con/run/cac thds, 5.1.61-log  Uptime MaxSQL ReplLag Cxns Lock QPS QPS Run Run Tbls Repl SQL  61d 4 0 254.70 _ _ 462 Off 1</code></pre><p>需要注意的是，如果你想知道Innotop中可用的特性，你可以很容易地运行“<strong>？</strong>”。通过这样做，您将看到如下信息。</p><p> </p><p><img data-lazyloaded="1" src="../Images/49d39224b845f0cd03145014e64ff249.png" decoding="async" loading="lazy" class="aligncenter wp-image-21416 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/summary-of-command-line-in-innotop.png" alt="summary of command line in innotop" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/summary-of-command-line-in-innotop.png 826w, https://blog.eldernode.com/wp-content/uploads/2020/12/summary-of-command-line-in-innotop-300x181.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/summary-of-command-line-in-innotop-768x464.png 768w" data-sizes="(max-width: 826px) 100vw, 826px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/summary-of-command-line-in-innotop.png"/></p><p> </p><p>下一节是<strong>用户统计</strong>。本节显示了按读取排序的用户统计信息和索引。</p><pre><code class="language-bash">CXN When Load QPS Slow QCacheHit KCacheHit BpsIn BpsOut   localhost Total 0.00 1.07k 697 0.00% 98.17% 476.83k 242.83k</code></pre><p>下一种模式是查询列表。注意，该模式显示了<strong>显示完整进程列表</strong>的输出。</p><pre><code class="language-bash">When Load Cxns QPS Slow Se/In/Up/De% QCacheHit KCacheHit BpsIn BpsOut  Now 0.05 1 0.20 0 0/200/450/100 0.00% 100.00% 882.54 803.24  Total 0.00 151 0.00 0 31/231470/813290/188205 0.00% 99.97% 1.40k 0.22    Cmd ID State User Host DB Time Query  Connect 25 Has read all relay system u 05:26:04</code></pre><p>下一部分是关于<strong> InnoDB I/O信息</strong>。应该注意，默认情况下，该模式显示InnoDB I/O统计信息、挂起的I/O、I/O线程、文件I/O和日志统计表。</p><p> </p><p><img data-lazyloaded="1" src="../Images/2b2e23d684193d3ca5aa8a51c23f2c26.png" decoding="async" loading="lazy" class="aligncenter wp-image-21417 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-IO-Info.png" alt="InnoDB IO Info" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-IO-Info.png 832w, https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-IO-Info-300x181.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-IO-Info-768x464.png 768w" data-sizes="(max-width: 832px) 100vw, 832px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-IO-Info.png"/></p><p> </p><p>接下来需要说的部分是<strong> InnoDB Buffers </strong>。在这个部分中，您可以查看关于InnoDB缓冲池、页面统计、缓冲区导入和自适应散列索引的信息。</p><p> </p><p><img data-lazyloaded="1" src="../Images/848fb7b2b3fe870bf93f6e5cfa41c075.png" decoding="async" loading="lazy" class="aligncenter wp-image-21420 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-Buffers.png" alt="InnoDB Buffers" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-Buffers.png 829w, https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-Buffers-300x152.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-Buffers-768x388.png 768w" data-sizes="(max-width: 829px) 100vw, 829px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/InnoDB-Buffers.png"/></p><p> </p><p>在名为<strong> InnoDB Row Ops </strong>的下一部分中，您将看到InnoDB行操作、行故障、信号量和数组表的默认输出。</p><pre><code class="language-bash">________________ InnoDB Row Operations _________________  Ins Upd Read Del Ins/Sec Upd/Sec Read/Sec Del/Sec  0 0 0 0 0.00 0.00 0.00 0.00    ________________________ Row Operation Misc _________________________  Queries Queued Queries Inside Rd Views Main Thread State   0 0 1 waiting for server activity    _____________________________ InnoDB Semaphores _____________________________  Waits Spins Rounds RW Waits RW Spins Sh Waits Sh Spins Signals ResCnt  2 0 41 1 1 2 4 5 5    ____________________________ InnoDB Wait Array _____________________________  Thread Time File Line Type Readers Lck Var Waiters Waiting? Ending?</code></pre><p>如下图所示，<strong>命令摘要</strong>模式显示了整个cmd_summary表。</p><p> </p><p><img data-lazyloaded="1" src="../Images/e39c5f57a361bdf5ca25a50035ba757b.png" decoding="async" loading="lazy" class="aligncenter wp-image-21418 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/Command-Summary-in-innodp.png" alt="Command Summary in innodp" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/Command-Summary-in-innodp.png 820w, https://blog.eldernode.com/wp-content/uploads/2020/12/Command-Summary-in-innodp-300x192.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/Command-Summary-in-innodp-768x493.png 768w" data-sizes="(max-width: 820px) 100vw, 820px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/Command-Summary-in-innodp.png"/></p><p> </p><p>下一部分是调用变量<strong>和状态</strong>。在这一部分中，与每秒查询数一样，统计信息以多种不同的模式进行计算和显示。</p><p> </p><p><img data-lazyloaded="1" src="../Images/d2ed5eead3603b38eddec36bae0ce4a3.png" decoding="async" loading="lazy" class="aligncenter wp-image-21419 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/12/Variables-Status-in-innodb.png" alt="Variables &amp; Status in innodb" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/12/Variables-Status-in-innodb.png 833w, https://blog.eldernode.com/wp-content/uploads/2020/12/Variables-Status-in-innodb-300x112.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/12/Variables-Status-in-innodb-768x288.png 768w" data-sizes="(max-width: 833px) 100vw, 833px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/12/Variables-Status-in-innodb.png"/></p><p> </p><h3><span class="ez-toc-section" id="Learn_how_to_Setup_Innotop_to_Monitor_MySQL_on_CentOS"/>了解如何在CentOS上设置Innotop来监控MySQL<span class="ez-toc-section-end"/></h3><p>请注意，另一个重要部分是<strong>复制状态</strong>。在这种情况下，您可以看到从属SQL状态、从属I/O状态和主状态的输出。前两部分显示从机状态和I/O从机状态，最后一部分显示主机状态。</p><pre><code class="language-bash">_______________________ Slave SQL Status _______________________  Master On? TimeLag Catchup Temp Relay Pos Last Error  178.16.24.115 Yes 00:00 0.00 0 41295853    _______________________ Slave I/O Status _______________________  Master On? File Relay Size Pos State   178.16.24.115 Yes mysql-bin.000025 39.38M 41295708 Waiting for master to send event    ____________ Master Status _____________  File Position Binlog Cache  mysql-bin.000010 10887846 0.00%</code></pre><p>下一部分是非交互地调用<strong/>。您可以使用以下命令以非交互方式运行“Innotop”。</p><pre><code class="language-bash">innotop --count 5 -d 1 -n</code></pre><p>最后一部分是<strong>监控远程数据库</strong>，您可以使用以下命令以及用户名、密码和主机名来完成。</p><pre><code class="language-bash">innotop -u username -p password -h hostname</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>Innotop是一个非常简单有用的工具，可以提供MySQL工作的很多细节。在本文中，我们试图向您介绍如何在CentOS上安装Innotop来监控MySQL。我们还为您描述了Innotop的各种特性和功能。</p></div></div>    
</body>
</html>