<html>
<head>
<title>How to Use Wireshark in Nmap step by step - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Nmap中逐步使用Wireshark-elder node博客</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/how-to-use-wireshark-in-nmap/#0001-01-01">https://blog.eldernode.com/how-to-use-wireshark-in-nmap/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/64742bb8a0ffe35f9f649d3d4fd52d2a.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to Use Wireshark in Nmap" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/How-to-Use-Wireshark-in-Nmap.png"/><p>Wireshark是分析网络流量和协议的强大工具。借助Wireshark，您可以捕获网络流量并在捕获的流量中进行搜索。Wireshark的强大功能和易用性使其成为网络和安全专业人士中最受欢迎的网络流量分析工具之一。在本文中，我们试图教你如何在Nmap 中使用Wireshark<strong>。需要注意的是，如果你想购买一台<strong> <a href="https://eldernode.com/vps/" target="_blank" rel="noopener"> VPS服务器</a> </strong>，可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>中提供的软件包。</strong></p><h2><span class="ez-toc-section" id="Tutorial_Use_Wireshark_in_Nmap_step_by_step"/> <strong>教程在Nmap中逐步使用Wireshark</strong><span class="ez-toc-section-end"/></h2><p>在本文的其余部分，我们将教您如何在攻击者使用<a href="https://blog.eldernode.com/install-nmap-on-linux/"> NMAP </a>端口扫描方法扫描目标时，使用Wireshark捕获网络数据包。在本教程中，您还将了解Wireshark如何记录开放和关闭端口的不同网络流量包。因此，我们请求您加入我们这篇关于如何在Nmap教程中使用<a href="https://blog.eldernode.com/introducing-wireshark-software/"> Wireshark </a>的文章。</p><h3><span class="ez-toc-section" id="Wireshark_applications"/> <strong> Wireshark应用</strong> <span class="ez-toc-section-end"/></h3><p>Wireshark可用于以下用途:</p><p>1-网络中的故障排除和调试</p><p>2-测试<a href="https://blog.eldernode.com/tag/security/">安全</a>问题</p><p>3-协议的分析和开发</p><p>4-执行黑客操作</p><p>5-网络和安全培训</p><h2><span class="ez-toc-section" id="Use_Wireshark_in_Nmap"/> <strong>在Nmap中使用Wireshark</strong>T3】</h2><p>本节需要注意的重要一点是，在本节中，工作是使用IP地址(192.168.1.102)完成的。这对于<a href="https://blog.eldernode.com/tag/windows/"> Windows </a>和<a href="https://blog.eldernode.com/tag/linux/"> Linux </a>设备来说很常见。所以你可以通过你的MAC地址来区分它们。在下文中，我们将向您介绍如何在Nmap中使用Wireshark的不同部分。请加入我们。</p><h3><span class="ez-toc-section" id="How_TCP_Scan_works"/><strong>TCP扫描如何工作</strong> <span class="ez-toc-section-end"/></h3><p>TCP扫描扫描TCP端口，如端口21、22、23、445。应该注意的是，该扫描确保通过源端口和目的端口之间的三方手动连接监听(开放)端口。完成此操作后，如果端口是打开的，源请求SYN数据包，发送SYN响应目的地、ACK数据包，然后发送ACK数据包源。最后，信源再次发送RST ACK包。</p><p>您可以键入NMAP命令来扫描TCP，如下所示。还要在另一端启动Wireshark来获取包:</p><pre><code class="language-bash">nmap -sT -p 445 192.168.1.102</code></pre><p>如下图所示，执行上述命令表明<strong>端口445 </strong>打开。</p><p> </p><p><img data-lazyloaded="1" src="../Images/c91cda46000fe3946b877ecb293b7035.png" decoding="async" loading="lazy" class="aligncenter wp-image-27589 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-920.png" alt="tcp scan on nmap" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-920.png 610w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-920-300x102.png 300w" data-sizes="(max-width: 610px) 100vw, 610px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-920.png"/></p><p> </p><p>此时，您可以查看通过Wireshark捕获的源和目的地之间的数据包传输序列。</p><p>1.源向目的地发送SYN数据包</p><p>2.目标向源发送SYN，ACK</p><p>3.源向目的地发送了ACK数据包</p><p>4.源再次向目的地发送RST确认</p><p> </p><p><img data-lazyloaded="1" src="../Images/76d5cf6fccf7573202befbc3f80b956b.png" decoding="async" loading="lazy" class="aligncenter wp-image-27590 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-921.png" alt="tcp scan on wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-921.png 921w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-921-300x70.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-921-768x180.png 768w" data-sizes="(max-width: 921px) 100vw, 921px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-921.png"/></p><p> </p><p>此时，您可以检查关闭端口的网络流量。如果扫描端口关闭，则源和目的地之间不可能进行3次握手连接。源发送Syn包，如果端口关闭，接收方通过RST发送响应ack。</p><p>您可以使用以下命令进行TCP扫描，并在另一方面启动Wireshark来捕获发送的数据包:</p><pre><code class="language-bash">nmap -sT -p 3389 192.168.1.102</code></pre><p>如下图所示，<strong>端口3389 </strong>关闭。</p><p> </p><p><img data-lazyloaded="1" src="../Images/5d34a90691be0ce207aff0ca84bfb123.png" decoding="async" loading="lazy" class="aligncenter wp-image-27591 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-922.png" alt="how to close port on nmap with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-922.png 627w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-922-300x97.png 300w" data-sizes="(max-width: 627px) 100vw, 627px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-922.png"/></p><p> </p><p>现在，您可以查看通过Wireshark捕获的源和目的地之间的数据包传输序列。</p><p> </p><p><img data-lazyloaded="1" src="../Images/79119bb50bd843e95ff3894dd7d49130.png" decoding="async" loading="lazy" class="aligncenter wp-image-27592 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-923.png" alt="packet transfer on nmap with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-923.png 783w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-923-300x74.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-923-768x189.png 768w" data-sizes="(max-width: 783px) 100vw, 783px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-923.png"/></p><p> </p><h3><span class="ez-toc-section" id="How_Stealth_Scan_works"/> <strong>隐形扫描如何工作</strong> <span class="ez-toc-section-end"/></h3><p>SYN扫描是最流行的扫描之一。这种类型的扫描可以轻松快速地完成，每秒钟扫描数千个端口。它也是相对典型和隐蔽的，因为它从不完成TCP连接。请注意，如果收到SYN数据包(没有ACK标志)作为响应，该端口也会打开。请注意，这种扫描被称为半开扫描，因为您没有打开完整的TCP连接。</p><p>像下面的命令一样，您可以扫描TCP的NMAP指令。您也可以在另一端启动Wireshark来记录发送的数据包:</p><pre><code class="language-bash">nmap -sS -p 22 192.168.1.102</code></pre><p>通过执行上述命令，您将看到<strong>端口22 </strong>是打开的。</p><p> </p><p><img data-lazyloaded="1" src="../Images/99fac97394816445f25b6b1b5f8b0ab0.png" decoding="async" loading="lazy" class="aligncenter wp-image-27594 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-924.png" alt="stealth scan on nmap with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-924.png 583w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-924-300x108.png 300w" data-sizes="(max-width: 583px) 100vw, 583px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-924.png"/></p><p> </p><p>在下图中，您可以看到通过Wireshark在源和目的地之间进行的一系列数据包传输。</p><p>1.源向目的地发送SYN数据包</p><p>2.目标向源发送SYN，ACK数据包</p><p>3.源向目的地发送RST数据包</p><p> </p><p><img data-lazyloaded="1" src="../Images/ed0f01dbfe7ee8f2c09a6b4a91b9e47e.png" decoding="async" loading="lazy" class="aligncenter wp-image-27595 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-925.png" alt="packet transfer with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-925.png 781w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-925-300x74.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-925-768x189.png 768w" data-sizes="(max-width: 781px) 100vw, 781px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-925.png"/></p><p> </p><p>现在，您需要使用下面的TCP命令来扫描NMAP指令。请注意，您必须在另一端启动Wireshark来记录发送的数据包。</p><pre><code class="language-bash">nmap -sS -p 3389 192.168.1.102</code></pre><p>如下图所示，<strong>端口3389 </strong>关闭。</p><p> </p><p><img data-lazyloaded="1" src="../Images/1e94d8e831c84da3fe6337d9ce219ddb.png" decoding="async" loading="lazy" class="aligncenter wp-image-27596 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-926.png" alt="how to close port on wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-926.png 609w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-926-300x104.png 300w" data-sizes="(max-width: 609px) 100vw, 609px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-926.png"/></p><p> </p><p>您将仔细看到下面的图像:</p><p>1.源向目的地发送SYN数据包</p><p>2.目的地向目的地发送RST ACK数据包</p><p> </p><p><img data-lazyloaded="1" src="../Images/89a0f35603a00c5b6296774b97fb04fd.png" decoding="async" loading="lazy" class="aligncenter wp-image-27597 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-927.png" alt="data transfer with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-927.png 781w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-927-300x74.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-927-768x189.png 768w" data-sizes="(max-width: 781px) 100vw, 781px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-927.png"/></p><p> </p><h3><span class="ez-toc-section" id="How_Fin_Scan_works"/> <strong>手指扫描如何工作</strong> <span class="ez-toc-section-end"/></h3><p>在本节中，我们将介绍FIN数据包。请注意，FIN数据包用于在完成数据传输后终止源端口和目的端口之间的TCP连接。如何进行这种类型的扫描如下:</p><p>Nmap使用FIN数据包代替SYN数据包启动FIN扫描。</p><p>如果端口是开放的，那么当FIN包通过源端口发送时，没有来自目的端口的响应。</p><p><em> <strong>注意:</strong> </em> Fin-Scan只在<a href="https://blog.eldernode.com/tag/linux/"> Linux </a>机器上有效，在最新版本的<a href="https://blog.eldernode.com/tag/windows/"> windows </a>上无效。</p><p>与前面的步骤一样，您可以键入以下NMAP命令进行TCP扫描，并在另一方面启动Wireshark来捕获发送的数据包:</p><pre><code class="language-bash">nmap -sF -p 22 192.168.1.102</code></pre><p>你会看到<strong>口22 </strong>是打开的。</p><p> </p><p><img data-lazyloaded="1" src="../Images/2f296a0eb47b08aac9a912a5fb5e4191.png" decoding="async" loading="lazy" class="aligncenter wp-image-27604 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-928.png" alt="how to fin scan work" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-928.png 637w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-928-300x94.png 300w" data-sizes="(max-width: 637px) 100vw, 637px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-928.png"/></p><p> </p><p>如下图所示:</p><p>1.源向目标发送FIN数据包</p><p>2.目标没有向源发送回复</p><p> </p><p><img data-lazyloaded="1" src="../Images/741d879877b0707915136925204d6d10.png" decoding="async" loading="lazy" class="aligncenter wp-image-27605 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-929.png" alt="packet transfer with fin scan" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-929.png 784w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-929-300x69.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-929-768x177.png 768w" data-sizes="(max-width: 784px) 100vw, 784px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-929.png"/></p><p> </p><p>再次扫描TCP的以下说明，并启动Wireshark记录发送的数据包:</p><pre><code class="language-bash">nmap -sF -p 3389 192.168.1.102</code></pre><p>如你所见，<strong>端口3389 </strong>关闭。</p><p> </p><p><img data-lazyloaded="1" src="../Images/08cde92c29d757d057e3bd712bc576c8.png" decoding="async" loading="lazy" class="aligncenter wp-image-27606 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-930.png" alt="Screahow to close port with fin scanenshot (930)" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-930.png 604w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-930-300x100.png 300w" data-sizes="(max-width: 604px) 100vw, 604px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-930.png"/></p><p> </p><p>查看通过Wireshark接收的源和目的地之间的数据包传输顺序，您会发现:</p><p>1.源向目的地发送SYN数据包</p><p>2.目的地向目的地发送RST数据包</p><p> </p><p><img data-lazyloaded="1" src="../Images/3150637708c59502fea6b6263702beb8.png" decoding="async" loading="lazy" class="aligncenter wp-image-27607 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-931.png" alt="transfer packet in nmap with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-931.png 782w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-931-300x68.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-931-768x175.png 768w" data-sizes="(max-width: 782px) 100vw, 782px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-931.png"/></p><p> </p><h3><span class="ez-toc-section" id="How_Null_Scan_works"/> <strong>零扫描如何工作</strong> <span class="ez-toc-section-end"/></h3><p>在本节中，我们将向您解释空扫描。空扫描是一系列包含序列号“零”(0000000)的TCP数据包。由于在这种类型的扫描中没有标志，目的地不知道如何响应请求。因此，它会销毁此数据包，并且不会发送任何指示端口已打开的响应。</p><p><em> <strong>注意:</strong> </em>空扫描只在Linux设备上有效，在最新版本的Windows上无效。</p><p>与前面的步骤一样，您可以键入以下NMAP命令进行TCP扫描，并在另一方面启动Wireshark来捕获发送的数据包:</p><pre><code class="language-bash">nmap -sN -p 22 192.168.1.102</code></pre><p>通过执行上述命令，您将看到<strong>端口22 </strong>是打开的。</p><p> </p><p><img data-lazyloaded="1" src="../Images/2ae52b9e2c4563875bb557458e359204.png" decoding="async" loading="lazy" class="aligncenter wp-image-27609 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-932.png" alt="how to null scan work" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-932.png 599w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-932-300x100.png 300w" data-sizes="(max-width: 599px) 100vw, 599px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-932.png"/></p><p> </p><p>如下图所示:</p><p>1.源向目的地发送了空数据包</p><p>2.目标没有向源发送回复</p><p> </p><p><img data-lazyloaded="1" src="../Images/deab967eb6af635fb411f6ef3edc1879.png" decoding="async" loading="lazy" class="aligncenter wp-image-27610 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-933.png" alt="null scan with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-933.png 786w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-933-300x66.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-933-768x169.png 768w" data-sizes="(max-width: 786px) 100vw, 786px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-933.png"/></p><p> </p><p>再次扫描TCP的以下说明，并启动Wireshark记录发送的数据包:</p><pre><code class="language-bash">nmap -sN -p 3389 192.168.1.102</code></pre><p>如你所见，<strong>端口3389 </strong>关闭。</p><p> </p><p><img data-lazyloaded="1" src="../Images/01b1ac97a12d3e54db973f2c9d1f031d.png" decoding="async" loading="lazy" class="aligncenter wp-image-27611 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-934.png" alt="how to close port with null scan" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-934.png 593w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-934-300x100.png 300w" data-sizes="(max-width: 593px) 100vw, 593px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-934.png"/></p><p> </p><p>查看通过Wireshark接收的源和目的地之间的数据包传输顺序，您会发现:</p><p>1.源向目标发送了空(无)数据包</p><p>2.目的地发送RST，确认来源</p><p> </p><p><img data-lazyloaded="1" src="../Images/23cc3e599fe963d51aa8548ddaa4cf39.png" decoding="async" loading="lazy" class="aligncenter wp-image-27612 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-935.png" alt="packet transfer with wireshark" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-935.png 782w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-935-300x70.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-935-768x180.png 768w" data-sizes="(max-width: 782px) 100vw, 782px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/03/Screenshot-935.png"/></p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>Wireshark是一种互联网分析工具的名称，以前称为Ethereal。该软件分析通过互联网发送和接收的数据包，并将它们显示给用户。Wireshark有许多功能，您可以使用它来检查在互联网上发送和接收的包。在本文中，我们试图通过一个例子教你如何一步一步地在Nmap中使用Wireshark。</p></div></div>    
</body>
</html>