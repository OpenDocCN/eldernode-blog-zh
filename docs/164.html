<html>
<head>
<title>How to block IP of Brute Force by CSF on DirectAdmin | Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在DirectAdmin | Eldernode上用CSF屏蔽暴力破解IP</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/block-ip-of-brute-force-by-csf/#0001-01-01">https://blog.eldernode.com/block-ip-of-brute-force-by-csf/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/b70e1623d5010b096f5211c67269a35c.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to block IP of Brute Force by CSF on DirectAdmin" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/04/How-to-block-IP-of-Brute-Force-by-CSF-on-DirectAdmin.png"/><p>在本文中，我们将在<a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener noreferrer"> <strong> Linux VPS </strong> </a>服务器和<a href="https://eldernode.com/dedicated-server/">专用</a> Linux服务器上，通过<a href="https://eldernode.com/directadmin-vps-server/" target="_blank" rel="noopener noreferrer"> DirectAdmin </a> 自动教程<strong>拦截暴力破解IP。</strong></p><h2>在DirectAdmin上通过CSF阻止暴力IP的教程</h2><p>对于<a href="https://download.configserver.com/csf/"> CFS </a>的暴力自动IP拦截，执行以下步骤:</p><p><span> 1。</span>首先转到下面的路径:</p><pre dir="ltr"><code class="language-bash">cd /usr/local/directadmin/scripts/custom/  </code></pre><p><span> 2。</span>开始之前，按照以下说明备份block_ip.sh和unblock_ip.sh文件:</p><pre dir="ltr"><code class="language-bash">cp block_ip.sh block_ip.sh.bak  cp unblock_ip.sh unblock_ip.sh.bak    </code></pre><p>上述文件可能不存在于“usr/local/direct admin/scripts/custom”路径中，在这种情况下，您会遇到以下错误。显示错误不会在过程的继续中引起任何问题。</p><pre dir="ltr"><code class="language-bash">cp: cannot stat `block_ip.sh': No such file or directory  cp: cannot stat `unblock_ip.sh': No such file or directory  </code></pre><p><span> 3。</span>使用以下命令下载适当的版本:</p><pre dir="ltr"><code class="language-bash">cd /usr/local/directadmin/scripts/custom/  wget -O block_ip.sh http://files.plugins-da.net/dl/csf_block_ip.sh.txt  wget -O unblock_ip.sh http://files.plugins-da.net/dl/csf_unblock_ip.sh.txt  wget -O show_blocked_ips.sh http://files.plugins-da.net/dl/csf_show_blocked_ips.sh.txt  chmod 700 block_ip.sh show_blocked_ips.sh unblock_ip.sh    </code></pre><p><span> </span></p><p> </p><p><span> 4。</span>使用以下命令在根路径中创建名为blocked_ips和exempt_ips的文件:</p><pre dir="ltr"><code class="language-bash">touch /root/blocked_ips.txt  touch /root/exempt_ips.txt</code></pre><p>到目前为止，IP没有被CSF自动阻止，只有一个按钮在暴力监视器中为管理员创建，以阻止所需的IP。为了让IPs自动拦截，您需要安装以下脚本，并遵循以下步骤。</p><p><span> 5。</span>进行自动IP拦截并运行以下命令:</p><pre dir="ltr"><code class="language-bash">cd /usr/local/directadmin/scripts/custom  wget -O brute_force_notice_ip.sh http://files.directadmin.com/services/all/brute_force_notice_ip.sh  chmod 700 brute_force_notice_ip.sh</code></pre><p><span> 6。</span>为了不使用CSF覆盖iptables的角色和作用，在服务器上借助以下命令关闭该服务的执行。</p><pre dir="ltr"><code class="language-bash">chkconfig iptables off  chkconfig ip6tables off    mv /etc/init.d/iptables /etc/init.d/iptables~moved  echo -e '#!/bin/bash\nexit 0;' &gt; /etc/init.d/iptables  chmod 755 /etc/init.d/iptables    chkconfig iptables on  chkconfig ip6tables on  service iptables start</code></pre><p>7 .<span>。</span>完成后，确保IP被正确阻止。尝试以下命令:</p><pre dir="ltr"><code class="language-bash">csf –g IP</code></pre><p>如有疑问或问题，可向<a href="https://eldernode.com/ask/" target="_blank" rel="noopener noreferrer">提问系统</a>咨询，提供指导。</p></div></div>    
</body>
</html>