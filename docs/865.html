<html>
<head>
<title>Tutorial Backup and Restore a MariaDB Database - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程备份和恢复一个MariaDB数据库- Eldernode博客</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/backup-and-restore-a-mariadb-database/#0001-01-01">https://blog.eldernode.com/backup-and-restore-a-mariadb-database/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/28c1b6181b96236d41387280b391e173.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Backup and Restore a MariaDB Database" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/09/Tutorial-Backup-and-Restore-a-MariaDB-Database.png"/><p>MariaDB是最流行的开源关系数据库之一。这个数据库是由最初的MySQL开发人员创建的，并保证保持开源。MariaDB是MySQL分支的DBMS或数据库管理系统，使用MariaDB存储引擎。在这篇文章中，我们将教你如何备份和恢复一个MariaDB数据库。如果你想购买一台<a href="https://eldernode.com/vps/" target="_blank" rel="noopener"> VPS服务器</a>，你可以访问<a href="https://eldernode.com/"> Eldernode </a>中提供的软件包。</p><h2><span class="ez-toc-section" id="How_to_Backup_and_Restore_a_MariaDB_Database"/> <strong>如何备份和恢复一个MariaDB数据库</strong> <span class="ez-toc-section-end"/></h2><h3><span class="ez-toc-section" id="What_is_MariaDB_Database"/> <strong>什么是MariaDB数据库？</strong>T3】</h3><p>MariaDB是世界上最流行的数据库服务器之一。这项服务的重要用户包括谷歌、维基百科和脸书。如前所述，MariaDB是作为一个开源的关系数据库开发的，它提供了一种用于访问数据的SQL接口。MariaDB的最新版本还包括GIS和JSON功能。</p><p>从网站到银行应用，这个数据库实际上将数据转换成广泛应用的结构化信息。MariaDB被认为是MySql‌.的可行替代品因为这项服务非常快速、可扩展且功能强大。通过提供插件、存储引擎和其他工具的强大生态系统，它还可以用于广泛的主题。</p><p>MariaDB的功能包括:</p><p><strong> 1。该数据库的热门客户</strong></p><p>受欢迎的大客户能给一个品牌最大的信任。MariaDB拥有谷歌、维基百科、WordPress等知名客户端，增加了这个数据库的可信度。</p><p><strong> 2。存储引擎</strong></p><p>存储引擎在MariaDB中得到了很好的发展，可以为用户提供新的功能。在存储中，引擎是XtraDB和Aria。</p><p><strong> 3。数据库安全</strong></p><p>尽管MariaDB被认为是MYSQL数据库的一个子集，但似乎数据库安全的原则在其开发中受到了更多的关注。所以在使用MariaDB时不要担心安全问题。</p><h2><span class="ez-toc-section" id="Backup_a_MariaDB_Database"/> <strong>备份一个MariaDB数据库</strong> <span class="ez-toc-section-end"/></h2><p>MariaDB数据库的备份有两种方式。逻辑备份和物理备份。在本文的其余部分，我们将教您备份MariaDB的两种方法。请加入我们。</p><h3><span class="ez-toc-section" id="How_to_make_a_Logical_Backup_of_MariaDB"/> <strong>如何对MariaDB </strong>进行逻辑备份<span class="ez-toc-section-end"/></h3><p>在本节中，我们将教您如何对MariaDB进行逻辑备份。为此，您必须按顺序执行以下步骤。首先，可以使用以下命令进行逻辑备份:</p><pre><code class="language-bash">mysqldump -u root -p inventory &gt; /backup/inventory.dump</code></pre><p>上述命令的参数解释如下:</p><p><strong> root: </strong>该参数显示连接到MariaDB进行备份的用户名。</p><p><strong> -p: </strong>使用该参数指定该用户的密码请求。</p><p><strong>清单:</strong>该参数显示选择备份的数据库。</p><p><strong> /backup/inventory.dump: </strong>指定备份文件的路径。</p><p>需要记住的一点是，要对所有数据库进行逻辑备份，必须使用-all-databases选项，如以下命令所示:</p><pre><code class="language-bash">mysqldump -u root -p --all-databases &gt; /backup/mariadb.dump</code></pre><p><em> <strong>注:</strong> </em>要知道一个逻辑备份的输出是一系列SQL语句是很有意思的。</p><h3><span class="ez-toc-section" id="How_to_make_a_Physical_Backup_of_MariaDB"/> <strong>如何对MariaDB </strong>进行物理备份<span class="ez-toc-section-end"/></h3><p>在这一节中，我们将教您如何对MariaDB进行物理备份。为此，您必须按顺序执行以下步骤。应该注意，有几种工具可用于物理备份。在下文中，我们将向您展示使用LVM备份MariaDB的过程。</p><p>首先，使用以下命令验证MariaDB文件存储:</p><pre><code class="language-bash">mysqladmin variables | grep datadir</code></pre><p><strong>输出:</strong></p><pre><code class="language-bash">| datadir | /var/lib/mysql/ |</code></pre><p>然后，您需要运行以下命令来检查哪个逻辑卷托管这个位置:</p><pre><code class="language-bash">df /var/lib/mysql</code></pre><p><img data-lazyloaded="1" src="../Images/eb3ac712f6639f27b2403be0ac3ecd1a.png" decoding="async" loading="lazy" class="alignnone wp-image-34663 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2021/09/make-a-Physical-Backup-of-MariaDB.png" alt="make a Physical Backup of MariaDB" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/09/make-a-Physical-Backup-of-MariaDB.png 732w, https://blog.eldernode.com/wp-content/uploads/2021/09/make-a-Physical-Backup-of-MariaDB-300x30.png 300w" data-sizes="(max-width: 732px) 100vw, 732px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/09/make-a-Physical-Backup-of-MariaDB.png"/></p><p>现在，您可以通过运行以下命令来确认快照的可用空间量:</p><pre><code class="language-bash">vgdisplay vg0 | grep Free</code></pre><p>您需要通过运行以下命令连接到MariaDB，拖动磁盘上的表并锁定它们:</p><pre><code class="language-bash">mysql -u root -p</code></pre><p>在下一步和另一个终端会话中，您需要使用以下命令创建LVM快照:</p><pre><code class="language-bash">lvcreate -L20G -s -n mariadb-backup /dev/vg0/mariadb</code></pre><p>需要知道的重要一点是，LVM快照必须足够大，以便从数据库解锁的那一刻起一直到数据库备份完成时都可以更改。因为当存储空间已满，备份失败时，快照就失效了。</p><p>现在，在主MariaDB会话中使用以下命令打开这些表:</p><pre><code class="language-bash">MariaDB [(none)]&gt; UNLOCK TABLES;</code></pre><p>请注意以下命令，并运行它们以在所需位置安装快照:</p><pre><code class="language-bash">mkdir /mnt/snapshot</code></pre><pre><code class="language-bash">mount /dev/vg0/mariadb-backup /mnt/snapshot</code></pre><p>在最后一步中，备份后应使用以下命令删除备份快照:</p><pre><code class="language-bash">umount /mnt/snapshot</code></pre><pre><code class="language-bash">lvremove /dev/vg0/mariadb-backup</code></pre><h2><span class="ez-toc-section" id="How_to_Restore_a_MariaDB_Database"/> <strong>如何恢复一个MariaDB数据库</strong> <span class="ez-toc-section-end"/></h2><p>正如我们在MariaDB备份部分中告诉您的，有两种物理和逻辑方法可以做到这一点。恢复备份有两种逻辑和物理方法。请继续关注本文的其余部分。</p><p>您可以很容易地使用以下命令来执行<strong>逻辑恢复</strong>:</p><pre><code class="language-bash">mysql -u root -p inventory &lt; /backup/mariadb.dump</code></pre><p>您还必须按照以下步骤执行物理恢复。首先，您需要运行以下命令来验证MariaDB文件的存储位置:</p><pre><code class="language-bash">mysqladmin variables | grep datadir</code></pre><p><strong>输出:</strong></p><pre><code class="language-bash">| datadir | /var/lib/mysql/ |</code></pre><p>这里重要的一点是，要执行物理恢复，您必须停止使用MariaDB子例程命令:</p><pre><code class="language-bash">systemctl stop mariadb</code></pre><p>最后，您需要使用以下命令删除实际内容:</p><pre><code class="language-bash">rm -rf /var/lib/mysql/*</code></pre><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>MariaDB的核心是Mysql版本5，在引擎性能上有一些差异。其实最重要的两个安全问题和调优MariaDB已经很努力了，它的生产力比Mysql好很多。在本文中，我们试图教您如何备份和恢复一个MariaDB数据库。如果愿意可以参考文章<a href="https://blog.eldernode.com/mariadb-installation-on-ubuntu/">教程Ubuntu </a>上的MariaDB安装。</p></div></div>    
</body>
</html>