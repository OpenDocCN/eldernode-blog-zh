<html>
<head>
<title>Tutorial Install Apache Tomcat 8 on CentOS 7 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在CentOS 7 - Eldernode上安装Apache Tomcat 8</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-apache-tomcat-centos-7/#0001-01-01">https://blog.eldernode.com/install-apache-tomcat-centos-7/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/f6572078eb3f3f377465f860c269e37e.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Install Apache Tomcat 8 on CentOS 7" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/09/IMG_2130.png"/><p>Apache Tomcat是Java Servlet和JavaServer Pages技术的开源实现。它是一个由Apache软件基金会发布的web服务器。但是在畅游本指南的<span>海</span>之前，请确保你有自己的<span> <a href="https://eldernode.com/linux-vps/"> Linux虚拟私人服务器</a>。</span></p><p> </p><p> </p><p>为了让本教程更好地发挥作用，请考虑以下<strong>先决条件</strong>:</p><p>拥有sudo权限的非root用户</p><p> </p><p> </p><h2><span class="ez-toc-section" id="Tutorial_Install_Apache_Tomcat_8_on_CentOS_7"/> <span>教程在CentOS 7上安装Apache Tomcat 8</span>T3】</h2><p>让我们浏览一下本教程的步骤，看看如何在CentOS 7上安装Apache Tomcat 8及其配置。</p><p> </p><h3><span class="ez-toc-section" id="Step_1_How_To_Install_Java"/> <span>步骤一:如何安装Java </span> <span class="ez-toc-section-end"/></h3><p>安装Tomcat的前一步是<a href="https://eldernode.com/install-java-apt-debian-10/" target="_blank" rel="noopener noreferrer">在服务器上安装Java </a>。随意选择任何Java web应用程序代码。所以使用下面的命令和yum来安装OpenJDK。</p><pre><code class="language-bash">sudo yum install java-1.7.0-openjdk-devel</code></pre><p>出现提示时，按<strong> <span> y </span> </strong>继续安装OpenJDK 7。</p><p>当您安装了<a href="https://blog.eldernode.com/install-java-apt-ubuntu-20/" target="_blank" rel="noopener noreferrer"> <span> Java </span> </a>之后，您就可以创建一个<span> tomcat </span>用户来运行tomcat服务了。</p><p><strong> <span>注意</span> </strong>:你可以在<span> /usr/lib/jvm/jre </span>找到JAVA_HOME目录的快捷方式，记得以后用它来配置Tomcat。</p><p> </p><p> </p><p> </p><h3><span class="ez-toc-section" id="Step_2_How_To_Create_Tomcat_User"/> <span>第二步:如何创建Tomcat用户</span> <span class="ez-toc-section-end"/></h3><p>在这一步中，您将观察<a href="https://eldernode.com/installations/configure-linux-server-security/" target="_blank" rel="noopener noreferrer">安全性</a>。为了达到这个目标，您可能必须以非特权用户的身份运行。因此，让我们创建一个新的用户和组来运行Tomcat服务。</p><p>使用下面的命令创建一个新的<span> tomcat </span>组:</p><pre><code class="language-bash">sudo groupadd tomcat</code></pre><p>从现在起，你应该骑以及你不要让任何人登录帐户。为此，您需要创建一个新的<span> tomcat </span>用户。之后，您将使这个用户成为<span> tomcat </span>组的成员，主目录为/ <span> opt/tomcat </span>，外壳为/bin/false </p><pre><code class="language-bash">sudo useradd -M -s /bin/nologin -g tomcat -d /opt/tomcat tomcat</code></pre><h3/><h3/><h3><span class="ez-toc-section" id="Step_3_How_To_Install_Tomcat"/> <span>第三步:如何安装Tomcat</span>T3】</h3><p>如果你学会了安装Tomcat 8最简单的方法呢？是的，这是可能的。你只需要下载最新的二进制版本，然后手动配置它。</p><h3/><h3 id="download-tomcat-binary"><span class="ez-toc-section" id="How_To_Download_Tomcat_Binary"/> <span>如何下载Tomcat二进制</span> <span class="ez-toc-section-end"/></h3><p>使用最短的方式下载Tomcat 8的最新版本，并访问<a href="http://tomcat.apache.org/download-80.cgi"> Tomcat 8下载页面</a>。一旦你有了它，在<strong>核心</strong>列表下，复制链接到“tar.gz”。</p><p>现在，使用<span> yum </span>包管理器开始安装<span> wget。</span></p><pre><code class="language-bash">sudo yum install wget</code></pre><p>如果您想切换到您的主目录:</p><pre><code class="language-bash">cd ~</code></pre><p>接下来，要下载Tomcat 8归档文件，使用wget并粘贴到链接中。</p><pre><code class="language-bash">wget <span class="highlight">https://www-eu.apache.org/dist/tomcat/tomcat-8/v8.5.37/bin/apache-tomcat-8.5.37.tar.gz    </span></code></pre><p>此时，是时候将Tomcat安装到<span> /opt/tomcat </span>目录中了。要做到这一点，最好使用下面的命令将归档文件解压缩到目录中。</p><pre><code class="language-bash">sudo mkdir /opt/tomcat  sudo tar xvf apache-tomcat-8*tar.gz -C /opt/tomcat --strip-components=1</code></pre><p> </p><h3 id="update-permissions"><span class="ez-toc-section" id="How_To_Update_Permissions"/> <span>如何更新权限</span> <span class="ez-toc-section-end"/></h3><p>有必要为<span> tomcat </span>用户分配对<span> Tomcat </span>安装的访问权。运行以下命令，切换到Tomcat安装路径:</p><pre><code class="language-bash">cd /opt/tomcat</code></pre><p>然后，尝试给<span> tomcat </span>组整个安装目录的所有权:</p><pre><code class="language-bash">sudo chgrp -R tomcat /opt/tomcat</code></pre><p>现在，您可以将对<span> conf </span>目录及其所有内容的读取权限分配给<span> tomcat </span>组。之后，键入以下命令来执行对目录本身的访问:</p><pre><code class="language-bash">sudo chmod -R g+r conf  sudo chmod g+x conf    </code></pre><p>正如你所猜测的，<span> tomcat </span>用户现在应该是<span> webapps </span>、<span> work </span>、<span> temp </span>和<span> logs </span>目录的所有者。</p><pre><code class="language-bash">sudo chown -R tomcat webapps/ work/ temp/ logs/</code></pre><h3/><p> </p><h3 id="install-systemd-unit-file"><span class="ez-toc-section" id="How_To_Install_Systemd_Unit_File"/> <span>如何安装Systemd单元文件</span> <span class="ez-toc-section-end"/></h3><p>要设置这个部分，您需要运行一个<span> Tomcat </span> Systemd单元文件，让您将Tomcat设置为一个服务。</p><p>键入以下命令创建并打开单元文件:</p><pre><code class="language-bash">sudo vi /etc/systemd/system/tomcat.service</code></pre><p>以防您需要修改在<span> CATALINA_OPTS </span>中指定的内存分配设置。并粘贴以下脚本。</p><p class="code-label" title="/etc/systemd/system/tomcat.service"><span> /etc/systemd/system/Tomcat。服务</span></p><pre><code class="language-bash"># Systemd unit file for tomcat  [Unit]  Description=Apache Tomcat Web Application Container  After=syslog.target network.target    [Service]  Type=forking    Environment=JAVA_HOME=/usr/lib/jvm/jre  Environment=CATALINA_PID=/opt/tomcat/temp/tomcat.pid  Environment=CATALINA_HOME=/opt/tomcat  Environment=CATALINA_BASE=/opt/tomcat  Environment='CATALINA_OPTS=-Xms<span>512M</span> -Xmx<span>1024M</span> -server -XX:+UseParallelGC'  Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom'    ExecStart=/opt/tomcat/bin/startup.sh  ExecStop=/bin/kill -15 $MAINPID    User=tomcat  Group=tomcat  UMask=0007  RestartSec=10  Restart=always    [Install]  WantedBy=multi-user.target</code></pre><p> </p><p>现在您可以保存并退出。如您所见，该脚本告诉服务器使用指定的设置，以<span> tomcat </span>用户的身份运行Tomcat服务。</p><p>毕竟，您可以重新加载Systemd来加载Tomcat单元文件:</p><pre><code class="language-bash">sudo systemctl daemon-reload</code></pre><p>要启动Tomcat服务:</p><pre><code class="language-bash">sudo systemctl start tomcat</code></pre><p>您可以使用下面的命令来检查服务是否成功启动。</p><pre><code class="language-bash">sudo systemctl status tomcat</code></pre><p>如果是，它将在服务器启动时启动，您可以通过运行以下命令来启用Tomcat服务:</p><pre><code class="language-bash">sudo systemctl enable tomcat</code></pre><p>如你所见，到这里为止，你还没有完全设置好<span> Tomcat </span>。因此，让我们通过在网络浏览器中访问您的域名或<a href="https://eldernode.com/find-server-public-ip-linux/" target="_blank" rel="noopener noreferrer"> IP地址</a>，然后是<span> 8080 </span>，来访问默认的启动页面:</p><p title="Open in web browser:">在web浏览器中打开:</p><pre><code class="language-bash">http://server_IP_address:8080</code></pre><pre><code class="language-bash"/></pre><p><span class="ez-toc-section" id="Step_4_How_To_Configure_Tomcat_Web_Management_Interface"/> <span>第四步:如何配置Tomcat Web管理界面</span> <span class="ez-toc-section-end"/></p><h3>每当您决定使用Tomcat附带的管理器web应用程序时，请尝试在我们的Tomcat服务器上添加一个登录名。要开始这样做，编辑<span> tomcat-users.xml </span>文件:</h3><p>您会看到很多描述如何配置文件的注释。因此，您有两种选择，第一种是删除下面两行之间的所有注释，第二种是如果您想要引用示例，则保留它们:</p><pre><code class="language-bash">sudo vi /opt/tomcat/conf/tomcat-users.xml</code></pre><p><span> tomcat-users.xml摘录</span></p><p class="code-label" title="tomcat-users.xml excerpt">为了添加一个可以访问<span>管理器-gui </span>和<span>管理器-gui <span>的用户，让我们定义一个类似于下面例子的用户。<strong>不要</strong>忘记将用户名<span> <a href="https://eldernode.com/how-to-create-strong-password/" target="_blank" rel="noopener noreferrer">密码</a> </span>改成安全的:</span> </span></p><pre><code class="language-bash">&lt;tomcat-users&gt;  ...  &lt;/tomcat-users&gt;</code></pre><p><span> tomcat-users.xml —管理员用户</span></p><p class="code-label" title="tomcat-users.xml — Admin User">现在，您可以保存并退出tomcat-users.xml文件。</p><pre><code class="language-bash">&lt;tomcat-users&gt;      &lt;user username="admin" password="password" roles="manager-gui,admin-gui"/&gt;  &lt;/tomcat-users&gt;</code></pre><p>如果你使用最新版本的Tomcat，你会发现它将管理器和主机管理器应用程序的访问限制在来自服务器本身的连接上。在远程计算机上安装时，您可能希望删除或更改此限制。因此，打开适当的<span> context.xml </span>文件，来改变这些上的IP地址限制。</p><p>为管理器应用程序运行以下命令:</p><p>并为主机管理器应用程序键入以下命令，键入:</p><pre><code class="language-bash">sudo vi /opt/tomcat/webapps/manager/META-INF/context.xml</code></pre><p>在内部，注释掉IP地址限制以允许来自任何地方的连接。此外，如果您希望只允许来自您自己IP地址的连接访问，您可以将您的公共IP地址添加到列表中。</p><pre><code class="language-bash">sudo vi /opt/tomcat/webapps/host-manager/META-INF/context.xml</code></pre><p><span>Tomcat web apps的context.xml文件</span></p><p class="code-label" title="context.xml files for Tomcat webapps">现在您可以在完成后保存并关闭文件。</p><pre><code class="language-bash">&lt;Context antiResourceLocking="false" privileged="true" &gt;  <span>  &lt;!--</span>&lt;Valve className="org.apache.catalina.valves.RemoteAddrValve"           allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" /&gt;<span>--&gt;</span>  &lt;/Context&gt;</code></pre><p>您也可以重新启动Tomcat服务来使您的更改生效。</p><p><span class="ez-toc-section" id="Step_5_How_To_Access_the_Web_Interface"/> <span>第五步:如何访问Web界面</span> <span class="ez-toc-section-end"/></p><pre><code class="language-bash">sudo systemctl restart tomcat</code></pre><pre><code class="language-bash"/></pre><h3>到目前为止，Tomcat已经启动并运行了，那么为什么你不能在网络浏览器中访问网络管理界面呢？</h3><p>通过在端口8080上访问服务器的公共IP地址来实现:</p><p>在web浏览器中打开:</p><p title="Open in web browser:">然后，您将看到如下页面。</p><pre><code class="language-bash">http://server_IP_address:8080</code></pre><p> </p><pre><code class="language-bash"><img data-lazyloaded="1" src="../Images/66b72390c74e692bb939bc3a8d803a39.png" decoding="async" loading="lazy" class="aligncenter wp-image-12991 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/09/splashscreen.jpg" alt="The screen of splash- Access the Web Interface" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/09/splashscreen.jpg 1017w, https://blog.eldernode.com/wp-content/uploads/2020/09/splashscreen-300x118.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/09/splashscreen-768x303.jpg 768w" data-sizes="(max-width: 1017px) 100vw, 1017px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/09/splashscreen.jpg"/></code></pre><p>查看管理web应用程序的链接，您为其配置了一个管理用户。现在，如果您使用经理应用程序，可以通过链接或<span>http:</span>//server _ IP _ address:<span>8080/Manager/html:</span>访问它</p><p><img data-lazyloaded="1" src="../Images/675879cee06a06510ab4a26d97fde28c.png" decoding="async" loading="lazy" class="aligncenter wp-image-12992 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/09/manager.jpg" alt="tomcat web application manager" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/09/manager.jpg 1601w, https://blog.eldernode.com/wp-content/uploads/2020/09/manager-300x148.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/09/manager-1024x504.jpg 1024w, https://blog.eldernode.com/wp-content/uploads/2020/09/manager-768x378.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/09/manager-1536x756.jpg 1536w" data-sizes="(max-width: 1601px) 100vw, 1601px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/09/manager.jpg"/></p><p> </p><p>您将使用Web应用程序管理器来管理Java应用程序。对于一些活动，如启动、停止、重新加载、部署和取消部署。或者对您的应用程序运行一些诊断程序。考虑到您可以通过本页的最底部访问您的服务器信息。</p><p>不过，让我们看看主机管理器，可以通过链接或<span>http://server _ IP _ address:8080/Host-Manager/html/</span>访问:</p><p><img data-lazyloaded="1" src="../Images/1954d9a4d324e6201589c5ec24303fc2.png" decoding="async" loading="lazy" class="aligncenter wp-image-12994 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager.jpg" alt="tomcat virtual host manager" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager.jpg 1599w, https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager-300x129.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager-1024x440.jpg 1024w, https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager-768x330.jpg 768w, https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager-1536x660.jpg 1536w" data-sizes="(max-width: 1599px) 100vw, 1599px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/09/host-manager.jpg"/></p><p> </p><p>使用此页面的方法是添加虚拟主机来为您的应用程序提供服务。</p><p> </p><p><span class="ez-toc-section" id="conclusion"/>结论<span class="ez-toc-section-end"/></p><h2>在本文中，通过本指南的步骤后，您已经成功安装了Apache Tomcat 8，并准备好使用它。此外，要查看更多相关文章，请阅读更多关于如何在Windows上安装Apache Tomcat的文章。</h2><p>在本文中，通过本指南的步骤后，您已经成功安装了Apache Tomcat 8，并准备好使用它。此外，要查看更多相关文章，请阅读更多关于如何在Windows上安装Apache Tomcat的文章。</p><p class="breadcrumb-area"/></div></div>    
</body>
</html>