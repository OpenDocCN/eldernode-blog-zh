<html>
<head>
<title>Tutorial Setup and Configure OpenVAS on Debian 10 - Eldernode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程在Debian 10 - Eldernode上设置和配置OpenVAS</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/setup-and-configure-openvas-on-debian/#0001-01-01">https://blog.eldernode.com/setup-and-configure-openvas-on-debian/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/d0d4495adda212f8191e25148659ddcd.png" data-src="https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Tutorial Setup and Configure OpenVAS on Debian 10" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10.png 2069w, https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/04/Tutorial-Setup-and-Configure-OpenVAS-on-Debian-10.png"/><p>OpenVAS代表开放漏洞评估系统。这个工具是一个漏洞扫描器，当然也是一个非常好的安全评估工具。OpenVAS是一个简单的软件框架，由几个用于漏洞扫描和漏洞管理的服务和工具组成。所有的OpenVAS产品都是自由软件，并且大多数都是在GNU通用公共许可证(GPL)下授权的。在这篇文章中，我们想一步一步地向你介绍如何在Debian 10 上设置和配置OpenVAS。需要注意的是，如果你想购买一台<a href="https://eldernode.com/linux-vps/" target="_blank" rel="noopener"> Linux VPS </a>服务器，可以访问<a href="https://eldernode.com/" target="_blank" rel="noopener"> Eldernode </a>中提供的软件包。</p><h2><span class="ez-toc-section" id="How_to_Setup_and_Configure_OpenVAS_on_Debian_10"/> <strong>如何在Debian 10上设置和配置open vas</strong>T3】</h2><p>OpenVAS最初被称为GNessUs，是之前开源的NessUs漏洞扫描的一个分支。Tenable Network Security的Nessus开发人员在2003年10月决定将其转变为专有软件后，OpenVAS继续作为其开源分支运营。</p><p>你可以将OpenVAS作为虚拟机或者未编译的代码安装，甚至可以直接安装在<a href="https://blog.eldernode.com/tag/linux/"> Linux </a>操作系统上。然后免费使用Nessus的所有功能。这种扫描器自2009年以来有很长的历史，每天更新(这些更新的名称是“网络漏洞测试”)或简称NVT。</p><p>截至2016年6月，已为OpenVAS发布了47，000个nvt。它还包括由一家安全软件公司支持的50，000多个漏洞测试。它还有一个内部编程语言，可以根据用户的需要执行一些特殊的和个性化的测试。您可以以虚拟机或非编译代码的形式安装这个工具，甚至可以直接安装在Linux操作系统上，并免费使用它的所有功能。</p><p>跟随我们这篇文章，教你如何在Debian  10上安装、设置和配置OpenVAS。</p><h3><span class="ez-toc-section" id="Prerequisites_for_Installing_OpenVAS_on_Debian_10"/> <strong>在Debian 10上安装OpenVAS的先决条件</strong>T3】</h3><p>在这篇文章中，我们将教你如何在Debian 10上安装GVM。green bone Vulnerability Management(GVM)，原名<strong> OpenVAS </strong>，是一款网络安全扫描器，提供一套网络漏洞(NVT)测试来识别安全漏洞。在安装这个工具之前，您需要准备一些先决条件。</p><p>_至少4 GB内存</p><p>_至少4个vCPUs</p><p>_超过8 GB的磁盘空间</p><p>下一步是使用以下命令更新系统软件包:</p><pre><code class="language-bash">apt update</code></pre><pre><code class="language-bash">apt upgrade</code></pre><p>由于我们将以系统的非特权用户身份运行GVM 20.08，因此您必须使用以下命令创建一个GVM系统帐户:</p><pre><code class="language-bash">useradd -r -d /opt/gvm -c "GVM User" -s /bin/bash gvm</code></pre><p>在下一步中，您需要创建由上面命令中的<strong> -d </strong>选项指定的<strong> GVM用户目录</strong>。然后将用户和组所有权置于GVM。</p><pre><code class="language-bash">mkdir /opt/gvm</code></pre><pre><code class="language-bash">chown gvm: /opt/gvm</code></pre><p>为了在Debian 10上正确安装OpenVAS，您还需要安装以下依赖项:</p><pre><code class="language-bash">apt install gcc g++ make bison flex libksba-dev curl redis libpcap-dev \</code></pre><pre><code class="language-bash">cmake git pkg-config libglib2.0-dev libgpgme-dev nmap libgnutls28-dev uuid-dev \</code></pre><pre><code class="language-bash">libssh-gcrypt-dev libldap2-dev gnutls-bin libmicrohttpd-dev libhiredis-dev \</code></pre><pre><code class="language-bash">zlib1g-dev libxml2-dev libradcli-dev clang-format libldap2-dev doxygen \</code></pre><pre><code class="language-bash">gcc-mingw-w64 xml-twig-tools libical-dev perl-base heimdal-dev libpopt-dev libunistring-dev graphviz \</code></pre><pre><code class="language-bash">libsnmp-dev python3-setuptools python3-paramiko python3-lxml python3-defusedxml python3-dev gettext python3-polib xmltoman \</code></pre><pre><code class="language-bash">python3-pip texlive-fonts-recommended texlive-latex-extra --no-install-recommends xsltproc sudo vim rsync</code></pre><h3><span class="ez-toc-section" id="How_to_Install_Yarn_on_Debian_10"/> <strong>如何在Debian 10上安装Yarn</strong>T3】</h3><p>在这一节，我们想教你如何安装<a href="https://blog.eldernode.com/install-yarn-on-linux-ubuntu-20-04/"> Yarn </a> JavaScript包管理器。为此，您必须按顺序输入以下命令:</p><pre><code class="language-bash">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -</code></pre><pre><code class="language-bash">echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list</code></pre><pre><code class="language-bash">apt update</code></pre><pre><code class="language-bash">apt install yarn -y</code></pre><h3><span class="ez-toc-section" id="How_to_Install_Greenbone_Vulnerability_Manager_on_Debian_10"/> <strong>如何在Debian 10上安装Greenbone漏洞管理器</strong>T3】</h3><p>你应该从源代码中构建不同的模块来在Debian 10上安装OpenVAS。使用以下命令下载构建OpenVAS所需的每个模块的源代码。</p><p>首先，运行下面的命令创建一个临时目录来存储源代码:</p><pre><code class="language-bash">mkdir /tmp/gvm10  cd /tmp/gvm10</code></pre><p>现在用下面的命令下载GVM库:</p><pre><code class="language-bash">wget https://github.com/greenbone/gvm-libs/archive/v10.0.1.tar.gz -O gvm-libs-v10.0.1.tar.gz</code></pre><p>然后下载OpenVAS扫描仪，如下所示:</p><pre><code class="language-bash">wget https://github.com/greenbone/openvas/archive/v6.0.1.tar.gz -O openvas-scanner-v6.0.1.tar.gz</code></pre><p>要下载Greenbone漏洞管理器(GVM ),请输入以下命令:</p><pre><code class="language-bash">wget https://github.com/greenbone/gvmd/archive/v8.0.1.tar.gz -O gvm-v8.0.1.tar.gz</code></pre><p>您可以通过运行以下命令下载Greenbone Security Assistant (GSA ):</p><pre><code class="language-bash">wget https://github.com/greenbone/gsa/archive/v8.0.1.tar.gz -O gsa-v8.0.1.tar.gz</code></pre><p>要下载开放式扫描仪协议守护程序(OSPd ),请输入以下命令:</p><pre><code class="language-bash">wget https://github.com/greenbone/ospd/archive/v1.3.2.tar.gz -O ospd-v1.3.2.tar.gz</code></pre><p>运行以下命令下载OpenVAS SMB:</p><pre><code class="language-bash">wget https://github.com/greenbone/openvas-smb/archive/v1.0.5.tar.gz -O openvas-smp-v1.0.5.tar.gz</code></pre><p>最后，您应该将源代码提取到当前目录，如下所示:</p><pre><code class="language-bash">for i in *.tar.gz; do tar xzf $i; done</code></pre><h2><span class="ez-toc-section" id="How_to_Install_OpenVAS_on_Debian_Linux"/>如何在Debian LinuxT3上安装<strong> OpenVAS】</strong></h2><p>OpenVAS是一个完整的扫描引擎，运行更新和广泛的网络漏洞测试(NVT)。您需要导航到您提取源代码并构建OpenVAS的每个组件的目录。</p><p>要构建和安装GVM库，请运行以下命令:</p><pre><code class="language-bash">cd gvm-libs-10.0.1/  mkdir build  cd build/  cmake ..  make  make install</code></pre><p>构建并安装OpenVAS SMB，如下所示:</p><pre><code class="language-bash">cd /tmp/gvm10/openvas-smb-1.0.5  mkdir build  cd build  cmake ..  make  make install</code></pre><p>通过运行以下命令构建并安装OSPd:</p><pre><code class="language-bash">cd /tmp/gvm10/ospd-1.3.2  python3 setup.py install</code></pre><p>运行以下命令构建并安装OpenVAS Scanner:</p><pre><code class="language-bash">cd cd /tmp/gvm10/openvas-6.0.1/  mkdir build  cd build  cmake ..  make  make install</code></pre><p>现在进行以下配置，以提高Redis服务器的性能。您应该增加somaxconn的值，以避免客户端连接缓慢的问题，如下所示:</p><pre><code class="language-bash">echo "net.core.somaxconn = 1024" &gt;&gt; /etc/sysctl.conf</code></pre><p>要防止Redis后台存储在内存不足的情况下失败，请按如下方式启用内存过量使用:</p><pre><code class="language-bash">echo 'vm.overcommit_memory = 1' &gt;&gt; /etc/sysctl.conf</code></pre><p>禁用Linux内核对透明大页面(THP)的支持，以避免Redis产生延迟和内存使用问题。现在创建一个systemd服务单元:</p><pre><code class="language-bash">vim /etc/systemd/system/disable_thp.service</code></pre><pre><code class="language-bash">[Unit]  Description=Disable Kernel Support for Transparent Huge Pages (THP)    [Service]  Type=simple  ExecStart=/bin/sh -c "echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/enabled &amp;&amp; echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/defrag"    [Install]  WantedBy=multi-user.target</code></pre><p>接下来，您需要使用下面的命令重新加载systemd配置:</p><pre><code class="language-bash">systemctl daemon-reload</code></pre><p>现在启动并使服务在系统引导时运行，如下所示:</p><pre><code class="language-bash">systemctl start disable_thp    systemctl enable disable_thp</code></pre><p>在此步骤中，使用以下命令重命名默认的Redis服务器配置文件:</p><pre><code class="language-bash">mv /etc/redis/redis.conf /etc/redis/redis.conf.bak</code></pre><p>并复制生成的Redis配置:</p><pre><code class="language-bash">cp /tmp/gvm10/openvas-6.0.1/build/doc/redis_config_examples/redis_4_0.conf /etc/redis/redis.conf</code></pre><p>使用所需的文本编辑器打开配置文件:</p><pre><code class="language-bash">vim /etc/redis/redis.conf</code></pre><p>并进行以下调整:</p><pre><code class="language-bash">#unixsocket /tmp/redis-server.sock  unixsocket /var/run/redis/redis-server.sock  ...  #pidfile /usr/local/var/run/openvas-redis.pid  pidfile /var/run/redis/redis-server.pid  ...  # Change the working directory to /var/lib/redis  dir ./  dir /var/lib/redis</code></pre><p>Redis使用/tm/redis.socket，因此必须使用db_address参数显式定义备用套接字目录，如下所示:</p><pre><code class="language-bash">echo "db_address = /var/run/redis/redis-server.sock" &gt; /usr/local/etc/openvas/openvassd.conf</code></pre><p>现在重新加载上面创建的sysctl变量，如下所示:</p><pre><code class="language-bash">sysctl -p</code></pre><p>现在使用下面的命令重新启动Redis服务器:</p><pre><code class="language-bash">systemctl restart redis-server</code></pre><p>要从green bone Security Feed/Community Feed更新OpenVAS NVTs，请运行以下命令:</p><pre><code class="language-bash">greenbone-nvt-sync</code></pre><p>运行以下命令来重新加载内核模块并启动OpenVAS Scanner:</p><pre><code class="language-bash">ldconfig &amp;&amp; openvassd</code></pre><p>检查日志，查看OpenVAS扫描仪是否有任何问题:</p><pre><code class="language-bash">tail /usr/local/var/log/gvm/openvassd.log</code></pre><p>检查正在运行的进程。</p><pre><code class="language-bash">ps aux | grep openvas</code></pre><p>运行以下命令来构建和安装GVM:</p><pre><code class="language-bash">cd /tmp/gvm10/gvmd-8.0.1/  mkdir build  cd build  cmake ..  make  make install</code></pre><p>要构建和安装GSA，请使用以下命令:</p><pre><code class="language-bash">cd /tmp/gvm10/gsa-8.0.1  mkdir build  cd build  cmake ..  make  make install</code></pre><p>您应该为服务器和客户端设置创建证书，如下所示:</p><pre><code class="language-bash">gvm-manage-certs -a</code></pre><p>现在运行以下命令来创建OpenVAS管理用户:</p><pre><code class="language-bash">gvmd --create-user openvasadmin</code></pre><p>创建您自己的密码，如下所示:</p><pre><code class="language-bash">gvmd --create-user openvasadmin --password=StrongPassword</code></pre><p>最后，通过运行以下命令重置现有用户的密码:</p><pre><code class="language-bash">gvmd --user=openvasadmin --new-password=StrongPassword</code></pre><h3><span class="ez-toc-section" id="How_to_Access_OpenVAS_on_Debian_10"/> <strong>如何在Debian 10上访问open vas</strong>T3】</h3><p>首先使用以下命令启动OpenVAS扫描仪、GSA和GVM服务:</p><pre><code class="language-bash">openvassd &amp;&amp; gvmd &amp;&amp; gsad</code></pre><p>并检查如下所示的状态:</p><pre><code class="language-bash">ps aux | grep -E "openvassd|gsad|gvmd" | grep -v grep</code></pre><p>你现在可以通过网址<strong> HTTPS:服务器IP或主机名:</strong>访问GSA</p><p> </p><p><img data-lazyloaded="1" src="../Images/32358f2286ffbfb1f255f9d23c3fdbb9.png" decoding="async" loading="lazy" class="aligncenter wp-image-29252 size-large" data-src="https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10-1024x425.png" alt="openvas login page on debian 10" data-srcset="https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10-1024x425.png 1024w, https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10-300x125.png 300w, https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10-768x319.png 768w, https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10-1536x638.png 1536w, https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10.png 1627w" data-sizes="(max-width: 1024px) 100vw, 1024px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2021/04/openvas-login-page-on-debian-10-1024x425.png"/></p><p> </p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>扫描仪和安全工具在网络世界中非常重要。安全性也可以通过多种方式在网络中实现，包括防火墙、安全扫描器，如Nikto、Nmap、OpenVas等。，但这些方法多种多样。在本文中，我们试图一步一步地教你如何在Debian 10上设置和配置OpenVAS。</p></div></div>    
</body>
</html>