<html>
<head>
<title>Tutorial Setup private DNS server on centos 8/7 - Eldernode Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在centos 8/7 - Eldernode博客上设置专用DNS服务器的教程</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/setup-private-dns-server-on-centos/#0001-01-01">https://blog.eldernode.com/setup-private-dns-server-on-centos/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/7ffa197bbd51a16e02515678ea7198c7.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="Setup private DNS server on centos 7" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/11/Setup-private-DNS-server-on-centos-7.png"/><p>了解如何<strong>在centos 8/7 </strong>上设置专用DNS服务器。简而言之，域名系统(DNS)是计算机、服务或连接到互联网或专用网络的任何资源的分层分布命名系统，用于处理分配给每个网站和公司的各种域的信息。最重要的是，它可以转化为与网络设备相关联的有意义且人性化的域名和数字标识符，以便在全球范围内定位和寻址这些设备。事实上，dns服务器将域连接到服务器。在本文中，您将了解如何在centos版本8或7发行版中的Linux上安装专用dns服务器。您可以访问<a href="https://eldernode.com/"> Eldernode </a>中的套装来购买<a href="http://eldernode.com/centos-vps/"> CentOS VPS </a>服务器。</p><h2><span class="ez-toc-section" id="Setup_private_DNS_server_on_centos_87"/>在centos 8/7上设置专用DNS服务器<span class="ez-toc-section-end"/></h2><p>下面，我们将向您介绍在<a href="https://blog.eldernode.com/tag/centos/"> centos </a> 8或centos 7上设置私有DNS服务器的过程。假设你有一个IP地址为<strong> 192.168.12.8 </strong>的服务器，你还有一个名为【eldernode.com】的域名。第一步是安装BIND包，然后配置它。最后，创建区域文件。跟随我们继续本教程。</p><p><em> <strong>注意:</strong> </em>你必须用本文中的说明替换你的IP地址和网址。</p><h3><span class="ez-toc-section" id="How_to_install_BIND_package_on_CentOS_8_or_Centos_7"/>如何在CentOS 8或Centos 7上安装BIND包<span class="ez-toc-section-end"/></h3><p>BIND代表伯克利互联网域名，这是一种提供将域名转换为IP的能力的软件。要执行在centos 7上安装BIND DNS服务器或在<a href="https://blog.eldernode.com/tag/centos/" target="_blank" rel="noopener noreferrer"> CentOS </a> 8或CentOS 7上配置BIND DNS服务器的命令，您需要<strong> root server access </strong>才能使用SSH连接到您的服务器。您可以使用以下命令安装BIND:</p><pre><code class="language-bash">yum -y install bind bind-utils</code></pre><h3><span class="ez-toc-section" id="How_to_configure_BIND_on_CentOS_8_or_centos_7"/>如何在CentOS 8或centos 7上配置BIND<span class="ez-toc-section-end"/></h3><p>绑定服务的绑定文件位于<strong> etc/named.conf/ </strong>。打开<strong> etc/named.conf/ </strong>文件，将以下两个命令行置于注释模式:</p><pre><code class="language-bash"># listen-on port 53 {127.0.0.1; };</code></pre><pre><code class="language-bash"># listen-on-v6 port 53 {:: 1; };</code></pre><p>现在你需要在下面一行添加你的网络。例如，在下面的命令中，我添加了192.168.12.0/24。这允许网络上的客户使用DNS将名称转换为IP:</p><pre><code class="language-bash">allow-query {localhost; 192.168.12.0/24; };</code></pre><p>如果您想要将所有区域移动到服务器(192.168.12.6)，请添加以下行:(<strong>可选的</strong>)</p><pre><code class="language-bash">allow-transfer {192.168.12.6; };</code></pre><h3><span class="ez-toc-section" id="Learn_how_to_create_Zone_files"/>了解如何创建区域文件<span class="ez-toc-section-end"/></h3><p>在以下命令中，我们为域<strong>eldernode.com</strong>编写了一个区域，该区域被添加到<strong> named.conf </strong>文件中:</p><pre><code class="language-bash">zone "eldernode.com" IN {  type master;  file "fwd.eldernode.com.db";  allow-update { none; };  };</code></pre><p>以下示例是在名为. conf 的文件<strong>中的反向条目，称为反向区域:</strong></p><pre><code class="language-bash">zone "12.168.192.in-addr.arpa" IN {  type master;  file "12.168.192.db";  allow-update { none; };  };</code></pre><p><strong> <em>上例中:</em> </strong></p><p><strong>–</strong><em>12 . 168 . 192 . in-addr . arpa</em>是反向参考的名称。</p><p><strong>–</strong><em>主</em>代表主dns。</p><p><strong>–</strong><em>12 . 168 . 192 . db</em>是反向查找文件。</p><p><strong>–</strong><em>allow-update</em>:既然这是原来的DNS，就不应该有，这也是我们设置为none的原因。</p><h4><span class="ez-toc-section" id="How_to_create_a_lookup_file_for_a_zone"/>如何为区域创建查找文件<span class="ez-toc-section-end"/></h4><p>现在是时候为一个区域创建查找文件了。默认情况下，区域中的查找文件位于<strong> var/named/ </strong>文件夹中。所以你需要在这个文件夹中创建一个名为<strong> fwd.eldernode.db </strong>的区域文件进行正向查找。</p><p><em> <strong>注意，所有域名都必须以点号结尾。</strong>T3】</em></p><p>以下是一些特定于区域文件的关键词:</p><pre><code class="language-bash">A – A record</code></pre><pre><code class="language-bash">NS – Name Server  </code></pre><pre><code class="language-bash">MX – Mail for Exchange  </code></pre><pre><code class="language-bash">CNAME – Canonical Name</code></pre><p>那么，使用以下命令打开创建的区域文件:</p><pre><code class="language-bash">vi /var/named/fwd.nginxweb.ir.db</code></pre><p>现在输入以下内容:</p><pre><code class="language-bash">$TTL 86400  @   IN  SOA     primary.eldernode.com. root.eldernode.com. (  2014112511  ;Serial  3600        ;Refresh  1800        ;Retry  604800      ;Expire  86400       ;Minimum TTL  )  ;Name Server Information  @      IN  NS      primary.eldernode.com.  ;IP address of Name Server  primary IN  A       192.168.12.8  ;Mail exchanger  eldernode.com. IN  MX 10   mail.eldernode.com.  ;A - Record HostName To Ip Address  www     IN  A       192.168.12.100  mail    IN  A       192.168.12.150  ;CNAME record  ftp     IN CNAME        www.eldernode.com.</code></pre><p>在<strong> var/named/ </strong>文件夹下为“反向区域”创建一个名为12.168.192.db的“<strong>区域</strong>文件。同时为上述区域设置反向指针:</p><pre><code class="language-bash">PTR – Pointer  SOA – Start of Authority</code></pre><p> </p><pre><code class="language-bash"># vi /var/named/12.168.192.db    $TTL 86400  @   IN  SOA     primary.eldernode.com. root.eldernode.com. (  2014112511  ;Serial  3600        ;Refresh  1800        ;Retry  604800      ;Expire  86400       ;Minimum TTL  )  ;Name Server Information  @ IN  NS      primary.eldernode.com.  ;Reverse lookup for Name Server  8        IN  PTR     primary.eldernode.com.  ;PTR Record IP address to HostName  100      IN  PTR     www.eldernode.com.  150      IN  PTR     mail.eldernode.com.</code></pre><p>创建区域文件后，<strong>再次重启</strong>绑定服务。</p><pre><code class="language-bash"> systemctl restart named.service</code></pre><p>您还可以使用以下命令使服务在启动时启动:</p><pre><code class="language-bash"> systemctl enable named.service</code></pre><p>您能够在centos 8/7上成功安装、配置和设置dns服务器。现在，如果你做得对，你的域名将连接到服务器。</p><h2><span class="ez-toc-section" id="Conclusion"/>结论<span class="ez-toc-section-end"/></h2><p>BIND软件是默认DNS软件之一，当然也是这项服务最受欢迎的软件，专门针对Unix/Linux操作系统。它在DNS服务器中的主要功能是将域名转换成IP地址。在Linux服务器上安装和配置BIND是服务器配置中最重要的事情之一。在本文中，我们试图教您如何在centos 8或centos 7上设置专用DNS服务器。</p></div></div>    
</body>
</html>