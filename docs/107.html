<html>
<head>
<title>How to install Java with Apt on Ubuntu 20.04 - How to manage Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Ubuntu 20.04上用Apt安装Java——如何管理Java</h1>
<blockquote>原文：<a href="https://blog.eldernode.com/install-java-apt-ubuntu-20/#0001-01-01">https://blog.eldernode.com/install-java-apt-ubuntu-20/#0001-01-01</a></blockquote><div><div class="blog-details">                                  <img data-lazyloaded="1" src="../Images/3d6fc5439a7c001a140922ba627ec2c1.png" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095.png" class="img-fluid mb-3 shadow-sm round-10 wp-post-image" alt="How to install Java with Apt on Ubuntu 20.04" decoding="async" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095.png 2069w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095-300x164.png 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095-1024x561.png 1024w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095-768x421.png 768w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095-1536x842.png 1536w, https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095-2048x1122.png 2048w" data-sizes="(max-width: 2069px) 100vw, 2069px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/IMG_2095.png"/><p>最近，你阅读了关于<span> <a href="https://eldernode.com/install-java-apt-debian-10/" target="_blank" rel="noopener noreferrer"> Java </a> </span>的内容，在本教程中，你将学习<strong>如何在Ubuntu 20.04 </strong>上用Apt安装Java。正如你所经历的，很多种类的软件都需要java和JVM (Java的虚拟机)，包括<span> <a href="http://tomcat.apache.org/" target="_blank" rel="noopener noreferrer"> Tomcat </a> </span>，<span> <a href="https://www.eclipse.org/jetty/" target="_blank" rel="noopener noreferrer"> Jetty </a> </span>，<span> <a href="https://javaee.github.io/glassfish/" target="_blank" rel="noopener noreferrer"> Glassfish </a> </span>，<span> <a href="http://cassandra.apache.org/" target="_blank" rel="noopener noreferrer"> Cassandra </a> </span>和<span> <a href="https://jenkins.io/" target="_blank" rel="noopener noreferrer"> Jenkins </a> </span>。</p><p>加入我们，了解如何使用<span> apt </span>和OpenJDK以及Oracle官方JDK安装各种版本的Java运行时环境(JRE)和Java开发工具包(JDK)。然后选择您希望用于项目的版本。完成后，您将能够使用JDK来开发软件，或者使用Java运行时来运行软件。</p><p> </p><p><strong>先决条件</strong></p><p>如果你考虑到:<br/>一个拥有<span> sudo </span>特权<br/>的非root用户要设置，遵循我们在Ubuntu 20.04  上的<span> <a href="https://eldernode.com/initial-server-setup-on-ubuntu-20/" target="_blank" rel="noopener noreferrer">初始服务器设置。</a></span></p><h2><span class="ez-toc-section" id="How_to_install_Java_with_Apt_on_Ubuntu_2004"/> <span>如何在Ubuntu 20.04上用Apt安装Java</span><span class="ez-toc-section-end"/></h2><p>让我们通过本指南的步骤来看看<strong>如何在Ubuntu 20.04 </strong>上用Apt安装Java。</p><p> </p><h3 id="installing-the-default-jre-jdk"><span class="ez-toc-section" id="Installing_the_Default_JREJDK"/> <span>安装默认的JRE/JDK</span>T3】</h3><p>你就放心用Ubuntu打包的版本安装Java吧。但是由于Ubuntu 20.04包含了Open JDK 11，默认情况下是JRE和JDK的开源变种，你需要先更新包索引。</p><pre><code class="language-bash">sudo apt update</code></pre><p>如果已经安装了Java，则:</p><pre><code class="language-bash">java -version</code></pre><p>但是如果当前没有安装Java，您会看到下面的输出。</p><p title="Output"><span>输出</span></p><pre><code class="language-bash">Command 'java' not found, but can be installed with:    sudo apt install default-jre              # version 2:1.11-72, or  sudo apt install openjdk-11-jre-headless  # version 11.0.7+10-3ubuntu1  sudo apt install openjdk-13-jre-headless  # version 13.0.3+3-1ubuntu2  sudo apt install openjdk-14-jre-headless  # version 14.0.1+7-1ubuntu1  sudo apt install openjdk-8-jre-headless   # version 8u252-b09-1ubuntu1</code></pre><p>现在，您可以使用以下命令来安装默认的Java运行时环境(JRE ),它将从OpenJDK 11安装JRE:</p><pre><code class="language-bash">sudo apt install default-jre</code></pre><p>JRE将允许你运行几乎所有的Java软件。</p><p>要验证安装，请执行以下操作:</p><pre><code class="language-bash">java -version</code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">openjdk version "11.0.7" 2020-04-14  OpenJDK Runtime Environment (build 11.0.7+10-post-Ubuntu-3ubuntu1)  OpenJDK 64-Bit Server VM (build 11.0.7+10-post-Ubuntu-3ubuntu1, mixed mode, sharing)</code></pre><p>为了编译和运行一些特定的基于Java的软件，除了JRE之外，您可能还需要Java开发工具包(JDK)。因此，使用下面的命令安装JDK，这也将安装JRE:</p><pre><code class="language-bash">sudo apt install default-jdk</code></pre><p>通过检查Java编译器<span> javac </span>的版本来验证是否安装了JDK:</p><pre><code class="language-bash">javac -version</code></pre><p title="Output"><span>输出</span></p><pre><code class="language-bash">javac 11.0.7</code></pre><h2><strong> <span> <a href="https://eldernode.com/bitcoin-vps/" target="_blank" rel="noopener noreferrer">用比特币购买VPS</a></span></strong></h2><p> </p><p><span class="ez-toc-section" id="Installing_Oracle_JDK_11"/> <span>安装甲骨文JDK 11</span>T3】</p><h3 id="installing-oracle-jdk-11">因为Oracle的Java许可协议不允许通过包管理器自动安装。您必须创建一个Oracle帐户并手动下载JDK，以便为您要用来安装Oracle JDK的版本添加一个新的软件包存储库，该版本是Oracle发布的正式版本。</h3><p><strong>注意</strong>:您需要下载的甲骨文JDK版本必须与安装程序脚本的版本相匹配。要了解您需要哪个版本，请访问<span> oracle-java11-installer </span>页面。</p><p>找到<strong>焦点</strong>的包装，如下图所示:</p><p> </p><p><img data-lazyloaded="1" src="../Images/4c70ad012566925f6df3b246ef3449dc.png" decoding="async" loading="lazy" class="aligncenter wp-image-10516 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/package-for-Focal.jpg" alt="finding the package for Focal" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/package-for-Focal.jpg 996w, https://blog.eldernode.com/wp-content/uploads/2020/08/package-for-Focal-300x141.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/package-for-Focal-768x362.jpg 768w" data-sizes="(max-width: 996px) 100vw, 996px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/package-for-Focal.jpg"/> <br/>由于脚本的版本是<span> 11.0.7 </span>，所以需要Oracle JDK 11.0.7。但是你不需要从这个页面下载任何东西，只需要很快通过<span> apt </span>下载安装脚本。</p><p>之后，您必须访问<strong> <span>下载页面</span> </strong>，找到您需要的版本。</p><p> </p><p><img data-lazyloaded="1" src="../Images/e7237601b3364e01fd96e593944bb984.png" decoding="async" loading="lazy" class="aligncenter wp-image-10518 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/Download-page.jpg" alt="Download page" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/Download-page.jpg 855w, https://blog.eldernode.com/wp-content/uploads/2020/08/Download-page-300x128.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/Download-page-768x329.jpg 768w" data-sizes="(max-width: 855px) 100vw, 855px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/Download-page.jpg"/></p><p> </p><p>点击<strong> JDK下载</strong>按钮，您将进入显示可用版本的屏幕。点击Linux的<span> .tar.gz </span>包。</p><p> </p><p><img data-lazyloaded="1" src="../Images/bcbe84b89cb66d5c4c49a2e0ef32e768.png" decoding="async" loading="lazy" class="aligncenter wp-image-10524 size-full" data-src="https://blog.eldernode.com/wp-content/uploads/2020/08/Java-SE-development.jpg" alt="Java SE development" data-srcset="https://blog.eldernode.com/wp-content/uploads/2020/08/Java-SE-development.jpg 979w, https://blog.eldernode.com/wp-content/uploads/2020/08/Java-SE-development-300x221.jpg 300w, https://blog.eldernode.com/wp-content/uploads/2020/08/Java-SE-development-768x565.jpg 768w" data-sizes="(max-width: 979px) 100vw, 979px" data-original-src="https://blog.eldernode.com/wp-content/uploads/2020/08/Java-SE-development.jpg"/></p><p>然后，您将看到一个屏幕，要求您接受Oracle许可协议。选择复选框接受许可协议，并按下<strong>下载</strong>按钮。您的下载将开始。在下载开始之前，您可能需要再次登录您的Oracle帐户。</p><p>文件下载完成后，您需要将它传输到您的服务器。在本地机器上，将文件上传到服务器。在使用Linux的Windows子系统的macOS、Linux或Windows上，使用<span> scp </span>命令将文件传输到您的<span> noodi </span>用户的主目录。以下命令假设您已经将Oracle JDK文件保存到本地机器的<span>下载</span>文件夹中:</p><p>接下来，返回到您的服务器并添加第三方存储库，它将在文件上传完成后帮助您安装Oracle的Java。</p><pre><code class="language-bash">scp Downloads/jdk-<span>11.0.7</span>_linux-x64_bin.tar.gz <span>noodi</span>@<span>your_server_ip</span>:~</code></pre><p>安装<span>软件-属性</span>-公共包，它将<span> add-apt-repository </span>命令添加到您的系统中:</p><p>然后，导入用于验证您即将安装的软件的签名密钥:</p><pre><code class="language-bash">sudo apt install software-properties-common</code></pre><p><span>输出</span></p><pre><code class="language-bash">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EA8CACC073C3DB2</code></pre><p title="Output">接下来，使用<span> add-apt-repository </span>命令将repo添加到您的包源代码列表中。</p><pre><code class="language-bash">gpg: key EA8CACC073C3DB2A: public key "Launchpad PPA for Linux Uprising" imported  gpg: Total number processed: 1  gpg:               imported: 1</code></pre><p><span>输出</span></p><pre><code class="language-bash">sudo add-apt-repository ppa:linuxuprising/java</code></pre><p>要继续安装，请按<span> ENTER <span>来查看关于</span>没有找到有效的OpenPGP数据<span>的消息，但是您可以安全地忽略它。</span> </span></p><pre><code class="language-bash"> Oracle Java 11 (LTS) and 12 installer for Ubuntu, Linux Mint and Debian.    Java binaries are not hosted in this PPA due to licensing. The packages in this PPA download and install Oracle Java 11, so a working Internet connection is required.    The packages in this PPA are based on the WebUpd8 Oracle Java PPA packages: https://launchpad.net/~webupd8team/+archive/ubuntu/java    Created for users of https://www.linuxuprising.com/    Installation instructions (with some tips), feedback, suggestions, bug reports etc.:    . . .    Press [ENTER] to continue or ctrl-c to cancel adding it</code></pre><p>更新您的软件包列表以使新软件可供安装:</p><p>安装程序会在<span>/var/cache/Oracle-JDK 11-installer-local</span>中寻找你下载的Oracle JDK。创建此目录并将Oracle JDK归档文件移动到此处:</p><p>最后，安装软件包:</p><pre><code class="language-bash">sudo apt update</code></pre><p><span class="ez-toc-section" id="Managing_Java"/> <span>管理Java</span>T3】</p><pre><code class="language-bash">sudo mkdir -p /var/cache/oracle-jdk11-installer-local/  sudo cp jdk-<span class="highlight">11.0.7</span>_linux-x64_bin.tar.gz /var/cache/oracle-jdk11-installer-local/  </code></pre><p>如果您在一个服务器上安装了多个Java，那么使用<span> update-alternatives </span>命令配置哪个版本是命令行上使用的默认版本。</p><pre><code class="language-bash">sudo apt install oracle-java11-installer-local</code></pre><p><span>输出</span></p><h3 id="managing-java">然后，按下<span>键，输入</span>保留当前设置，或者选择与Java版本相关的数字作为默认值。</h3><p>此外，您还可以对其他Java命令执行此操作，例如编译器(javac):</p><pre><code class="language-bash">sudo update-alternatives --config java</code></pre><p title="Output">该命令可以运行的其他命令包括但不限于<span> keytoo </span> l、<span> javadoc、</span>和<span> jarsigner </span>。</p><pre><code class="language-bash">There are 2 choices for the alternative java (providing /usr/bin/java).      Selection    Path                                         Priority   Status  ------------------------------------------------------------    0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      auto mode    1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      manual mode  * 2            /usr/lib/jvm/java-11-oracle/bin/java          1091      manual mode    Press &lt;enter&gt; to keep the current choice[*], or type selection number:</code></pre><p><span class="ez-toc-section" id="Setting_the_JAVA_HOME_Environment_Variable"/> <span>设置</span> <span> JAVA_HOME </span> <span>环境变量</span> <span class="ez-toc-section-end"/></p><p>请注意，许多程序是用JAVA编写的，使用<span> JAVA_HOME </span>环境变量来确定Java的安装位置。</p><pre><code class="language-bash">sudo update-alternatives --config javac</code></pre><pre><code class="language-bash"/></pre><p>要设置这个环境变量，首先要确定Java的安装位置。</p><pre><code class="language-bash"/></pre><h3 id="setting-the-java_home-environment-variable"><span>输出</span></h3><p>在这种情况下，安装路径如下:</p><p>OpenJDK 11位于<span>/usr/lib/JVM/Java-11-open JDK-amd64/bin/Java。</span></p><pre><code class="language-bash">sudo update-alternatives --config java</code></pre><pre><code class="language-bash"/></pre><p title="Output">Oracle Java位于<span>/usr/lib/JVM/Java-11-Oracle/JRE/bin/Java。</span></p><pre><code class="language-bash">There are 2 choices for the alternative java (providing /usr/bin/java).      Selection    Path                                         Priority   Status  ------------------------------------------------------------    0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      auto mode    1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java   1111      manual mode  * 2            /usr/lib/jvm/java-11-oracle/bin/java          1091      manual mode    Press &lt;enter&gt; to keep the current choice[*], or type selection number:</code></pre><p>从您的首选安装中复制路径。然后使用<span> nano </span>或您喜欢的文本编辑器打开<span> /etc/environment </span>:</p><ol><li>在这个文件的末尾，添加下面一行，确保用您自己复制的路径替换高亮显示的路径，但是<strong>不要</strong>包括路径的<span> bin/ </span>部分:</li><li><span>/etc/环境</span></li></ol><p>修改这个文件将为系统上的所有用户设置<span> JAVA_HOME </span>路径。</p><pre><code class="language-bash">sudo nano /etc/environment</code></pre><p>现在，您可以保存文件并退出编辑器。</p><p class="code-label" title="/etc/environment">接下来，重新加载该文件以将更改应用到当前会话:</p><pre><code class="language-bash">JAVA_HOME="/<span>usr/lib/jvm/java-11-openjdk-amd64</span>"  </code></pre><p>要验证是否设置了环境变量:</p><p><span>输出</span></p><p>您需要使用<span> source /etc/environment </span>或注销并重新登录，以其他用户身份应用此设置。</p><pre><code class="language-bash">source /etc/environment</code></pre><p><span> <strong>好样的</strong> </span>！你都准备好了！您已经安装了多个版本的Java，并学会了如何管理它们。您现在可以安装运行在Java上的软件，如Tomcat、Jetty、Glassfish、Cassandra或Jenkins。</p><pre><code class="language-bash">echo $JAVA_HOME</code></pre><p title="Output"><span>Output</span></p><pre><code class="language-bash">/usr/lib/jvm/java-11-openjdk-amd64</code></pre><p>You need to use the <span>source /etc/environment </span>or log out and log back in to apply this setting as other users.</p><p><strong>如果你需要更多的阅读:</strong></p><p/><p/><p><strong>In case you need to read more:</strong></p></div></div>    
</body>
</html>